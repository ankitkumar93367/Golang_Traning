{
  "type": "journey",
  "title": "Post Office Journey",
  "engineVersion": "5.19.0",
  "subJourneys": {
    "calendarSubJourney": [
      {
        "type": "input",
        "title": "Intended posting date",
        "outputData": {
          "intendDate": "{{ inputData.inputValue }}"
        },
        "inputMask": "calendar",
        "defaultValues": {
          "inputValue": "{{FORMAT_DATE(NOW(),\"DD/MM/YYYY\")}}"
        },
        "nodes": [
          {
            "type": "choice",
            "title": "Next",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "comparison": "eq",
                "expected": "1",
                "outputData": {
                  "serviceGuaranteeDate": "{{ inputData.enablers.estimatedDeliveryDate.data.serviceGuaranteeDate  }}",
                  "status": "{{inputData.enablers.estimatedDeliveryDate.status}}",
                  "destinationCity": "{{ inputData.enablers.estimatedDeliveryDate.data.destinationCity }}",
                  "destinationPostalCode": "{{ inputData.enablers.estimatedDeliveryDate.data.destinationPostalCode }}",
                  "destinationCountryName": "{{ inputData.enablers.estimatedDeliveryDate.data.destinationCountryName }}"
                },
                "enablers": [
                  {
                    "name": "estimatedDeliveryDate",
                    "id": "estimatedDeliveryDate",
                    "action": "getestimatedDeliveryDate",
                    "stepEvent": "onMatch",
                    "params": {
                      "originPostalCode": "{{ appData.device.branchPostcode}}",
                      "packageAcceptanceDateTime": "{{ outputData.intendDate }}",
                      "destinationCountryCode": "{{ outputData.countryAlpha2 }}",
                      "destinationPostalCode": "{{ outputData.postalCode }}"
                    },
                    "loadingMessage": "Waiting for the Info..."
                  }
                ],
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "khalaApiResponseSuccessJourney"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "khalaApiResponseSuccessJourney": [
      {
        "type": "condition",
        "given": "{{ outputData.status }}",
        "comparison": "eq",
        "expected": "200",
        "nodes": [
          {
            "type": "info",
            "title": "Confirm address with customer",
            "description": "City:{{ outputData.destinationCity }}\nPostcode:{{ outputData.destinationPostalCode }}\nCountry:{{ outputData.destinationCountryName }}\nEstimated date of delivery: {{ FORMAT_DATE(\"{{ outputData.serviceGuaranteeDate }}\",\"DD/MM/YYYY\") }}",
            "nodes": null
          },
          {
            "type": "subJourney",
            "name": "estimatedAddToBasket"
          },
          {
            "type": "choice",
            "title": "Finish",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "choice",
            "title": "Finish and Print",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.status }}",
        "expected": "400,401,403,500",
        "comparison": "in",
        "nodes": [
          {
            "type": "info",
            "title": "",
            "description": "An estimated delivery date could not be obtained for the address and postage date given. Error Code {{ outputData.status }}",
            "nodes": null
          },
          {
            "type": "choice",
            "title": "Cancel",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "choice",
            "title": "Print",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.status }}",
        "expected": "502",
        "comparison": "eq",
        "nodes": [
          {
            "type": "info",
            "title": "",
            "description": "The service to estimate the delivery date is currently unavailable. Please try again later.",
            "nodes": null
          },
          {
            "type": "choice",
            "title": "Cancel",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "choice",
            "title": "Print",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          }
        ]
      }
    ],
    "postalCodeEddJourney": [
      {
        "type": "input",
        "title": "Input Postal code",
        "description": "Enter ZIP/Postal code",
        "inputMask": "alphanumeric",
        "defaultValues": {
          "inputValue": "{{outputData.inputValue}}"
        },
        "outputData": {
          "postalCode": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Postal code is required"
            },
            "format": {
              "match": "{{outputData.regex}}",
              "message": "Please input {{outputData.postcodeFormat}} value and max length should be {{outputData.postcodeMaxLength}}."
            }
          }
        ],
        "nodes": [
          {
            "type": "subJourney",
            "name": "calendarSubJourney"
          }
        ]
      }
    ],
    "estimatedDeliveryDate": [
      {
        "type": "condition",
        "outputData": {
          "countryResponse": "{{ inputData.enablers.country }}"
        },
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "enablers": [
          {
            "id": "country",
            "name": "country",
            "action": "getCountry",
            "params": {
              "kahalaSupportedFilter": true
            },
            "stepEvent": "onMatch",
            "loadingMessage": "Waiting ..."
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "outputData": {
              "kahalaApiResponse": "{{ inputData.enablers.kahalaCountryLookup.results }}"
            },
            "given": "1",
            "comparison": "eq",
            "expected": "1",
            "enablers": [
              {
                "id": "kahalaCountryLookup",
                "name": "dataParser",
                "action": "countries",
                "stepEvent": "onMatch",
                "params": {
                  "data": "{{outputData.countryResponse}}"
                },
                "loadingMessage": "Waiting ..."
              }
            ],
            "nodes": [
              {
                "title": "Country",
                "type": "options",
                "data": "{{outputData.kahalaApiResponse}}",
                "outputData": {
                  "countryAlpha2": "{{ inputData.selected.iso2Code }}",
                  "postcodeFormat": "{{inputData.selected.postcodeFormat}}",
                  "postcodeMaxLength": "{{inputData.selected.postcodeMaxLength}}",
                  "regex": "{{inputData.selected.regexValidation}}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "{{outputData.regex}}",
                    "expected": "HKG",
                    "comparison": "eq",
                    "outputData": {
                      "inputValue": "HKG"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "postalCodeEddJourney"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "inputValue": ""
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "postalCodeEddJourney"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "ManualCashDeposit-PrintAndAddToBasket": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "printCustomerReceipt",
            "name": "printer",
            "action": "print",
            "params": {
              "value": "<html> <head> <style> * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px } table { width: 100% } table tbody { vertical-align: top } .no-padding h1, h2, h3, p { margin: 0; padding: 0 } h1 { font-size: 32px } h2 { font-size: 28px } h3 { font-size: 24px } .text-center { text-align: center } hr { width: 100%; border: 0; height: 1px; background-color: #ccc } </style>\r\n </head> <body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n <hr />\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n <hr />\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p>\r\n<p> Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p>\r\n<p> Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.barcodeInfo.Rref }}</p>\r\n<p>Amount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"\") }} Cash</p>\r\n<p>Product No: {{ outputData.barcodeInfo.ProdNo }}</p>\r\n <hr />\r\n<p>Sort Code: {{ outputData.sortCode }}</p>\r\n<p>Account Number: {{ outputData.accountNumber }}</p> \r\n<p>Serial Number: {{ outputData.serialNo }}</p>\r\n<p>Tran Code: {{ outputData.tranCode }}</p>\r\n<p>HOCA Code: {{ outputData.HOCACode }}</p>\r\n </div>\r\n <hr />\r\n<div class=\"text-center\">\r\n\t<p>PLEASE KEEP THIS RECEIPT SAFE UNTIL YOU ARE CERTAIN YOUR ACCOUNT HAS BEEN UPDATED.</p>\r\n</div>\r\n<hr />\r\n<div class=\"text-center\">\r\n\t<p>This is not a VAT receipt</p>\r\n</div>\r\n<div>\r\n <hr />\r\n </div>\r\n </body> </html>"
            },
            "stepEvent": "onMatch",
            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
          }
        ],
        "nodes": [
          {
            "type": "complete",
            "basket": {
              "id": "{{ outputData.barcodeInfo.mediumName }}"
            },
            "transaction": {
              "itemID": "{{ outputData.barcodeInfo.itemID }}",
              "entryType": "banking",
              "quantity": "1",
              "receiptLine": "1",
              "valueInPence": "{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
              "value": "{{ outputData.inputAmount }}",
              "voidable": "true",
              "quantityFixed": "true",
              "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
              "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
              "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
              "tokens.APTransactionReference": "0001",
              "tokens.SortCode": "{{ outputData.sortCode }}",
              "tokens.versionNumber": "1",
              "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
              "tokens.paymentCode": "1",
              "tokens.PCA": "{{ outputData.PCA }}",
              "tokens.HOCA": "{{ outputData.HOCACode }}",
              "tokens.TranCode": "{{ outputData.tranCode }}",
              "tokens.SerialNo": "{{ outputData.serialNo }}",
              "tokens.AccountNumber": "{{ outputData.accountNumber }}"
            }
          }
        ]
      }
    ],
    "NatwestManualCashDeposit-PostHOCAFieldEntry": [
      {
        "type": "input",
        "title": "Serial Number",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "serialNo": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Serial number is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6,6}$",
              "message": "Serial Number must be 6 digits in length."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Amount",
            "inputMask": "currency",
            "outputData": {
              "inputAmount": "{{ inputData.inputValue }}"
            },
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "numericality": {
                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Re-Enter Amount",
                "inputMask": "currency",
                "description": "0.00",
                "unit": {
                  "position": "left",
                  "value": "£",
                  "type": "text"
                },    
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Amount is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "confirmation": {
                      "value": "{{ outputData.inputAmount }}",
                      "message": "The amounts entered mismatch. Please re-key."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "Confirm Deposit amount",
                    "visual": {
                      "actionAlignment": "left",
                      "transition": false
                    },
                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                    "actions": [
                      {
                        "title": "Re-enter",
                        "value": "reenter",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Confirm",
                        "value": "confirm",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.inputGroup": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "reenter",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 4
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "confirm",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "true",
                            "expected": "{{ outputData.HOCAFieldRequired }}",
                            "comparison": "eq",
                            "outputData": {
                              "tranCode": "00",
                              "serialNo": "000000"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "ManualCashDeposit-PrintAndAddToBasket"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "false",
                            "expected": "{{ outputData.HOCAFieldRequired }}",
                            "comparison": "eq",
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "ManualCashDeposit-PrintAndAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "LoqateAbortError": [
      {
        "type": "prompt",
        "title": "{{ outputData.loqateError.title }}",
        "visual": {
          "actionAlignment": "left"
        },
        "description": "{{ outputData.loqateError.description }}",
        "actions": [
          {
            "title": "Ok",
            "value": "ok",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort"
          }
        ]
      }
    ],
    "NatwestManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "excludedSortCodes": "622933|622799|623141|622845|623121|623126|623102|622888|622644|621350|622504|622453|622934|622919|623023|622812|623056|623057|621707|622145|621348|623114|623115|621179|621914|622657|622658|623150|623149|622911|622914|622913|622912|622910|623053|622868|621306|622562|623051|622005|623137|622413|622776|622494|622725|622849|622602|622603|622604|624001|624002|624004|624005|624010|624011|624012|624013|624014|624007|622152|622104|622561|622929|623003|621709|622699|622700|622457|622411|623187|623157|621109|622492|621335|621705|621708|622802|621352|622085|622810|622620|623172|622448|622821|622670|621272|620044|622917|623156|622103|622400|622999|623079|621037|622155|623035|622949|623036|623016|622765|622837|622791|622838|622672|622739|622586|622722|622745|622839|622645|622867|622756|622150|622844|622726|622661|621761|622572|622754|623129|622816|621887|623120|623119|622017|622734|622491|622809|622623|621710|622678|622618|623025|623160|622398|622414|622918|622437|622440|622659|622818|622900|622052|621873|623006|621110|621325|883000|623020|623017|623019|623021|623022|623026|622600|622997|622232|623088|623117|622908|622907|622909|622905|623176|623039|622231|622436|622587|622610|623054|622574|622792|622936|622083|623133|623135|622769|622147|623188|622337|621970|571745",
          "HOCAFieldRequiredForSortCodes": "621118|622899|622206|622202|622203|622204|622207|622205|622201|622800|622979|622505|622981|623175|622751|621169|622197|621880|622735|622736|622937|622938|622889|622948|622993|622994|621894|623142|622773|623092|621797|623147|622370|622573|622928|623080|622943|623190|622850|622647|622833|622591|622826|622824|622825|622139|621112|623099|623094|623101|622259|623122|622094|622862|622863|622476|623100|623098|623197|622546|622808|621169|622953|622848|623037|622976|623105|623059|623063|623061|623058|623060|623062|623104|623109|623106|622973|622198|621208|622526|623171|621895|622159|622055|622859|622860|622541|622395|623013|622951|622230|622238|623144|622487|622968|622978|622980|622967|622974|622977|623065|623067|623069|623064|623066|623068|621161|622763|622885|622831|622886|622884|623143|623198|623199|623200|623201|623202|623203|623204|623205|623206|623207|623208|623209|623210|623211|623212|623213|623214|623215|623216|623217|623218|623219|623220|623221|623222|623223|623224|623225|623226|623227|623228|623229|623230|623231|623232|623233|623234|623235|623236|623237|623238|623239|623240|623241|623242|623243|623244|623245",
          "HOCAFieldRequired": "false",
          "expectedBankNames": "NATIONAL WESTMINSTER BANK|National Westminster Bank|national westminster bank",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149101",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^(?!({{ outputData.excludedSortCodes }})$)",
                  "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "condition",
                                        "given": "^({{ outputData.HOCAFieldRequiredForSortCodes }})$",
                                        "expected": "{{ outputData.sortCode }}",
                                        "comparison": "matchregexp",
                                        "outputData": {
                                          "HOCAFieldRequired": "true"
                                        },
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "HOCA",
                                            "inputMask": "alphanumeric",
                                            "description": "Enter",
                                            "outputData": {
                                              "HOCACode": "{{ inputData.inputValue }}"
                                            },
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "required": {
                                                  "message": "HOCA code is required."
                                                }
                                              },
                                              {
                                                "field": "inputValue",
                                                "format": {
                                                  "match": "^[0-9]{1,18}$",
                                                  "message": "HOCA code must be 1-18 digits in length."
                                                }
                                              }
                                            ],
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter HOCA",
                                                "inputMask": "alphanumeric",
                                                "description": "Enter",
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "HOCA code is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.HOCACode }}",
                                                      "message": "Please enter the same HOCA code."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "subJourney",
                                                    "name": "NatwestManualCashDeposit-PostHOCAFieldEntry"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "condition",
                                        "given": "1",
                                        "expected": "1",
                                        "comparison": "eq",
                                        "outputData": {
                                          "HOCACode": " "
                                        },
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "NatwestManualCashDeposit-PostHOCAFieldEntry"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "LloydsManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "customDepositLimitTranCodes": "84",
          "allowedSortCodes": "(77[0-9]{4}$)|(87[0-9]{4}$)|(30[0-9]{4}$)",
          "excludedSortCodes": "111307|121318|122130|126000|126001|126002|126003|126004|126005|126006|126007|126008|126009|126010|126011|126012|126014|126020|126021|126030|126031|126032|126033|126034|126035|126036|126037|126038|126039|126040|126041|126042|126046|126050|126051|126052|126053|126054|126060|126070|300027|300030|300034|300045|300050|300051|300053|300055|300056|300057|300058|300059|300066|300072|300076|300079|300080|300081|300083|300084|300085|300087|300088|300089|300097|300098|300103|300114|300120|300125|300127|300128|300129|300140|300141|300142|300143|300144|300146|300147|300151|300173|300174|300190|300195|300196|300197|300198|300199|300231|300308|300316|300333|300354|300363|300381|300395|300456|301001|301012|301022|301027|301047|301049|301058|301061|301075|301076|301112|301114|301139|301142|301143|301154|301155|301166|301170|301174|301234|301234|301242|301275|301281|301295|301301|301309|301342|301350|301352|301353|301376|301393|301400|301419|301433|301435|301439|301443|301456|301458|301463|301466|301469|301473|301474|301482|301485|301486|301487|301495|301510|301514|301517|301519|301525|301542|301542|301561|301573|301607|301627|301629|301631|301635|301655|301657|301658|301664|301696|301696|301700|301700|301705|301757|301777|301785|301795|301809|301816|301816|301816|301825|301869|301869|301869|301869|301898|301901|301902|301903|302581|302581|302581|302581|302581|302581|302582|302582|302583|302583|302583|302584|302585|302585|302585|302585|302586|302586|302586|302587|302587|302588|302589|302589|302795|302870|302873|302874|302875|304013|304014|304015|304159|304400|305735|305907|305908|305909|305910|305911|305912|305913|305914|305915|305916|305917|305918|305919|305920|305921|305922|305923|305924|305925|305926|305927|305928|305929|305930|305931|305932|305933|305934|305935|305936|305937|305938|305939|305941|305942|305943|305944|305945|305946|305947|305948|305949|305950|305951|305952|305953|305954|305955|305956|305957|305958|305959|305960|305971|305974|305978|305982|305984|305985|305986|305988|305990|305991|305992|306045|306150|306151|306153|306154|306155|306181|306182|306183|306184|306185|306186|306187|306196|306273|306412|306414|306434|306539|306572|306592|306695|306748|306749|306759|306789|307184|307271|307688|307742|308026|308085|308087|308097|308422|308434|308448|308452|308469|308472|308789|308957|309004|309006|309015|309018|309024|309050|309050|309059|309059|309062|309074|309095|309100|309100|309121|309122|309141|309143|309150|309150|309162|309193|309204|309210|309243|309272|309276|309303|309315|309322|309322|309329|309329|309340|309341|309344|309366|309367|309370|309370|309372|309372|309375|309382|309388|309388|309424|309424|309425|309426|309426|309434|309434|309446|309453|309460|309475|309490|309503|309519|309526|309534|309548|309548|309552|309557|309566|309576|309576|309576|309588|309588|309608|309625|309628|309628|309629|309633|309633|309660|309666|309667|309686|309714|309720|309735|309755|309755|309755|309776|309780|309780|309780|309797|309803|309814|309822|309823|309843|309846|309846|309846|309846|309849|309852|309870|309904|309910|309911|309919|309919|309927|309958|309965|309968|309974|770104|770204|770210|770404|770511|770515|770601|770605|770606|770702|770703|770705|770709|770806|770811|770905|770907|770909|770919|771003|771005|771101|771102|771104|771202|771218|771221|771227|771228|771229|771302|771304|771315|771405|771413|771414|771501|771503|771601|771706|771707|771708|771709|771710|771714|771716|771723|771733|771741|771745|771909|771910|771913|771915|771918|771925|771927|771937|771941|771946|771955|771956|771957|772004|772005|772007|772009|772010|772016|772017|772020|772022|772024|772033|772035|772036|772037|772053|772054|772055|772057|772058|772060|772114|772201|772208|772210|772214|772216|772219|772222|772224|772229|772235|772241|772243|772305|772506|772601|772603|772605|772606|772608|772610|772614|772616|772617|772620|772626|772627|772628|772630|772702|772708|772710|772719|772725|772727|772730|772901|772903|772905|772907|772910|772911|772929|772931|772932|772933|772934|772936|772947|772948|772949|772953|772962|772978|772979|772984|772989|772995|772996|772997|772998|773002|773018|773022|773029|773032|773033|773037|773038|773039|773040|773041|773042|773043|773044|773045|773046|773047|773054|773101|773104|773202|773205|773212|773303|773310|773475|773476|774336|774802|774803|774806|774808|774814|774816|774818|774827|774831|774832|774927|775003|775011|775023|775027|775035|775106|775114|775116|775118|775603|775606|775612|775670|775701|775702|775703|775704|775801|775809|775813|775815|775904|776202|776205|776212|776301|776333|776400|776493|776499|776501|776502|776505|776507|776517|776518|776548|776557|776569|776576|776580|776582|776587|776591|776594|776595|776596|776597|776598|776599|776602|776603|776610|776625|776629|776630|776638|776644|776652|776662|776663|776664|776665|776668|776669|776671|776672|776673|776674|776709|776713|776715|776716|776717|776719|776803|776805|776806|776813|776815|776817|776821|776822|776826|776829|776830|776831|776832|776833|776834|776835|776836|776837|776838|776839|776841|776844|776845|776846|776848|776849|776850|776851|776852|776853|776854|776855|776856|776857|776858|776859|776862|776863|776864|776874|776875|776876|776877|776878|776879|776880|776881|776882|776886|776888|776889|776893|776920|776937|776938|776939|776950|776966|776967|776968|776969|776995|776996|776997|776998|776999|777017|777029|777043|777048|777050|777058|777059|777060|777061|777064|777067|777068|777069|777070|777072|777073|777074|777075|777076|777077|777095|777096|777101|777104|777105|777106|777107|777110|777112|777113|777114|777116|777119|777125|777133|777135|777136|777140|777141|777146|777147|777148|777149|777150|777153|777154|777155|777158|777162|777163|777169|777170|777171|777173|777202|777203|777211|777212|777217|777218|777221|777224|777234|777239|777241|777243|777258|777260|777261|777262|777263|777264|777265|777266|777267|777268|777269|777270|777272|777273|777275|777276|777277|777311|777402|777406|777415|777422|777436|777438|777439|777459|777528|777602|777603|777607|777608|777613|777615|777618|777619|777624|777627|777628|777635|777668|777678|777681|777903|777910|777912|777913|777916|778111|778241|778272|778507|778509|778511|778518|778530|778537|778539|778540|778541|778544|778545|778555|778566|778568|778571|778589|778712|779111|779114|779119|779121|779127|779134|779138|779140|779142|779147|779149|779150|779153|779154|779158|779163|779164|779169|779503|779513|872635|872636|872639|872644|872645|872646|872647|872648|872649|872693|872694|872695|872696|872697|872743|872746|872773|872792|873400|873401|873402|873403|873404|873405|873406|873407|873408|873410|873411|873412|873413|873414|873415|873416|873417|873418|873419|873420|873421|873422|873423|873424|873425|873427|873428|873429|873430|873432|873433|873434|873435|873436|873437|873438|873439|873440|873441|873443|873444|873445|873446|873447|873448|873449|873450|873451|873452|873453|873454|873455|873466|873467|873701|873705|873706|873707|873708|873710|873711|873712|873713|873714|873715|873716|873717|873718|873719|873720|873721|873722|873725|873726|873727|873728|873729|873731|873732|873733|873734|873735|873736|873737|873738|873739|873740|873741|873742|873743|873744|873745|873746|873747|873748|873749|873750|873751|873752|873753|873754|873755|873756|873757|873759|873760|873763|873764|873765|873766|873767|873768|873769|873770|873771|873772|873774|873775|873776|873777|873790|873799|873901|873902|873903|873904|873905|873906|873907|873953|874016|874017|874018|874221|874231|874234|874301|874302|874303|874304|874305|874306|874307|874308|874309|874310|874311|874312|874313|874316|874350|874351|874356|874358|874360|874362|874401|874401|874404|874405|874406|874407|874408|874409|874411|874414|874415|874431|874644|874645|876401|876402|876404|876405|876406|876408|876488|876489|876491|876801|876804|876807|876808|876810|876811|876812|876814|876816|876818|876819|876820|876823|876824|876825|876827|876828|876840|876842|876843|876847|876860|876861|876883|876884|876885|876887|876890|876891|876892|876894|876895|876896|876919|876921|876922|876923|876924|876925|876926|876927|876928|876929|876930|876931|876932|876934|876935|876957|876961|876962|876963|876964|876965|877001|877002|877003|877004|877005|877006|877007|877008|877009|877010|877011|877012|877014|877015|877016|877018|877019|877020|877021|877022|877023|877024|877025|877026|877027|877028|877030|877031|877032|877033|877034|877035|877037|877039|877041|877042|877044|877045|877046|877047|877052|877053|877054|877055|877056|877057|877062|877063|877066|877071|877078|877790|877791|877901|877902|877904|877905|877907|877908|877909|877911|877914|877915|877931|878811|878853|878858|878864",
          "expectedBankNames": "LLOYDS|Lloyds|lloyds",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149003",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required"
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "({{ outputData.allowedSortCodes }})$",
                  "message": "This transaction is not supported at Post Office, please refer customer to their bank."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^(?!({{ outputData.excludedSortCodes }})$)",
                  "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    },
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "condition",
                                        "given": "{{ outputData.tranCode }}",
                                        "comparison": "matchregexp",
                                        "expected": "(^{{ outputData.customDepositLimitTranCodes }})$",
                                        "outputData": {
                                          "barcodeInfo.maximumValue": "1000.00",
                                          "HOCACode": " "
                                        },
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "condition",
                                        "given": "^(85)$",
                                        "expected": "{{ outputData.tranCode }}",
                                        "comparison": "matchregexp",
                                        "outputData": {
                                          "HOCACode": " "
                                        },
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "condition",
                                        "given": "1",
                                        "expected": "1",
                                        "comparison": "eq",
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "HOCA",
                                            "inputMask": "alphanumeric",
                                            "description": "Enter",
                                            "outputData": {
                                              "HOCACode": "{{ inputData.inputValue }}"
                                            },
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "required": {
                                                  "message": "HOCA code is required."
                                                }
                                              },
                                              {
                                                "field": "inputValue",
                                                "format": {
                                                  "match": "^[0-9]{1,18}$",
                                                  "message": "HOCA code must be 1-18 digits in length."
                                                }
                                              }
                                            ],
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter HOCA",
                                                "inputMask": "alphanumeric",
                                                "description": "Enter",
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "HOCA code is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.HOCACode }}",
                                                      "message": "Please enter the same HOCA code."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "subJourney",
                                                    "name": "LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry": [
      {
        "type": "input",
        "title": "Serial Number",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "serialNo": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Serial number is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6,6}$",
              "message": "Serial Number must be 6 digits in length."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Amount",
            "inputMask": "currency",
            "outputData": {
              "inputAmount": "{{ inputData.inputValue }}"
            },
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "numericality": {
                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Re-Enter Amount",
                "inputMask": "currency",
                "description": "0.00",
                "unit": {
                  "position": "left",
                  "value": "£",
                  "type": "text"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Amount is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "confirmation": {
                      "value": "{{ outputData.inputAmount }}",
                      "message": "The amounts entered mismatch. Please re-key."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "Confirm Deposit amount",
                    "visual": {
                      "actionAlignment": "left",
                      "transition": false
                    },
                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                    "actions": [
                      {
                        "title": "Re-enter",
                        "value": "reenter",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Confirm",
                        "value": "confirm",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.inputGroup": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "reenter",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 4
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "confirm",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Natwest_BCD_Entry": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "printCustomerReceipt",
            "name": "printer",
            "action": "print",
            "params": {
              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
            },
            "stepEvent": "onMatch",
            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
          }
        ],
        "nodes": [
          {
            "type": "complete",
            "basket": {
              "id": "{{ outputData.itemName }}"
            },
            "transaction": {
              "itemID": "{{ outputData.itemID }}",
              "entryType": "banking",
              "quantity": "1",
              "receiptLine": "1",
              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
              "value": "{{ outputData.amount }}",
              "voidable": "true",
              "quantityFixed": "true",
              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
              "tokens.APTransactionReference": "0001",
              "tokens.SortCode": "{{ outputData.sortcode }}",
              "tokens.versionNumber": "1",
              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
              "tokens.paymentCode": "1",
              "tokens.AccountNumber": "{{ outputData.accountNumber }}",
              "tokens.SerialNo": "{{ outputData.serialNo }}",
              "tokens.TranCode": "77",
              "tokens.HOCA": "{{ outputData.HOCACode }}",
              "tokens.SVC": "{{ outputData.svc }}",
              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
              "tokens.PCA": " "
            }
          }
        ]
      }
    ],
    "HalifaxManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "allowedSortCodes": "11000\\d|1100[1-9]\\d|110[1-9]\\d{2}|11[1-8]\\d{3}|1190\\d{2})|(11920\\d|1192[1-9]\\d|119[3-9]\\d{2}",
          "excludedSortCodes": "11910[0-9]|1191[1-9][0-9]",
          "HOCACode": " ",
          "customDepositLimitTranCodes": "84",
          "expectedBankNames": "Halifax|HALIFAX",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149005",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^({{ outputData.allowedSortCodes }})",
                  "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^(?!({{ outputData.excludedSortCodes }})$)",
                  "message": "This transaction is not supported at Post Office, please refer customer to their bank."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "condition",
                                        "given": "{{ outputData.tranCode }}",
                                        "comparison": "matchregexp",
                                        "expected": "(^{{ outputData.customDepositLimitTranCodes }})$",
                                        "outputData": {
                                          "barcodeInfo.maximumValue": "1000.00"
                                        },
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "HalifaxManualCashDeposit-Stage-2"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "condition",
                                        "given": "1",
                                        "comparison": "eq",
                                        "expected": "1",
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "HalifaxManualCashDeposit-Stage-2"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "HalifaxManualCashDeposit-Stage-2": [
      {
        "type": "input",
        "title": "Serial Number",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "serialNo": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Serial number is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6,6}$",
              "message": "Serial Number must be 6 digits in length."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Amount",
            "inputMask": "currency",
            "outputData": {
              "inputAmount": "{{ inputData.inputValue }}"
            },
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "numericality": {
                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Re-Enter Amount",
                "inputMask": "currency",
                "description": "0.00",
                "unit": {
                  "position": "left",
                  "value": "£",
                  "type": "text"
                },    
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Amount is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "confirmation": {
                      "value": "{{ outputData.inputAmount }}",
                      "message": "The amounts entered mismatch. Please re-key."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "Confirm Deposit amount",
                    "visual": {
                      "actionAlignment": "left",
                      "transition": false
                    },
                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                    "actions": [
                      {
                        "title": "Re-enter",
                        "value": "reenter",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Confirm",
                        "value": "confirm",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.inputGroup": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "reenter",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 4
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "confirm",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "TSBManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "expectedBankNames": "TSB|tsb",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149006",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^(?!(300000|774832|774831)$)",
                  "message": "This transaction is not supported at Post Office, please refer customer to their bank."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            },                                
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                },                                    
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "YorkshireManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "expectedBankNames": "YORKSHIRE|Yorkshire|yorkshire",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149008",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "Yorkshire Bank"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Client name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            },                                
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                }, 
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "BankOfScotlandManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "customDepositLimitTranCodes": "84",
          "expectedBankNames": "BANK OF SCOTLAND|Bank of Scotland|bank of scotland",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149007",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^(120103|120104|120132|120133|120154|120157|120158|120159|120565|120577|120594|120881|120883|120895|120919|120925|120926|120949|120961|120969|121101|121103|121257|121268|121282|121283|121285|121286|121287|121311|121355|121630|121639|121735|121740|121750|121805|121868|121946|122012|122014|122023|122024|122026|122029|122137|122139|122153|122154|122181|122182|122183|122184|122186|122187|122189|122191|122192|122194|122207|122208|122210|122227|122230|122231|122233|122236|122237|122238|122241|122242|122245|122246|122248|122250|122253|122254|122255|122256|122261|122262|122264|122265|122267|122269|122276|122283|122284|122291|122311|122399|122441|122443|122444|122445|122446|122450|122453|122454|122455|122456|122457|122458|122459|122471|122472|122481|122482|122491|122492|122493|122494|122496|122497|122606|122608|122609|122610|122611|122711|122712|122713|122714|122715|122717|122718|122720|122721|122723|122724|122725|122726|122727|122728|122729|122730|122731|122732|122733|122734|122735|122736|122737|122738|122739|122740|122741|122742|122743|122745|122746|122747|122748|122749|122750|122751|122752|122753|122754|122755|122756|122757|122758|122759|122760|122761|122762|122763|122764|122765|122766|122767|122768|122771|122772|122773|122774|122775|122776|122777|122778|122779|122780|122782|122783|122784|122785|122786|122787|122788|122789|122790|123492|123493|123494|123495|123496|123497|123498|123499|123500|123509|123510|123529|123547|123549|123555|123614|123615|123616|124057|124058|124059|124061|124062|124063|124097|124098|124099|124101|124102|124103|124104|124105|124106|124107|124108|124109|124111|124112|124113|124114|124115|124116|124117|124118|124542|124797|124814|124914|124915|124926|124931|124932|124933|124934|124935|124936|124937|124938|124939|124945|124951|124956|124961|124965|124968|124969|124970|124974|125001|125002|125003|125004|125005|125006|125007|125008|125009|125010|125011|125012|125013|125014|125015|125016|125017|125018|125019|125020|125021|125022|125023|125024|125025|125026|125027|125028|125029|125030|125031|125032|125033|125034|125035|125036|125037|125038|125039|125040|125041|125042|125043|125044|125045|125046|125047|125048|125049|125050|125051|125052|125053|125054|125055|125056|125057|125058|125059|125060|125549|125550|125660|125661|800214|800219|800222|800224|800227|800228|800229|800232|800233|800234|800238|800254|800255|800260|800271|800273|800277|800278|800283|800285|800287|800288|800510|800511|800514|800516|800517|800519|800521|800522|800525|800526|800527|800528|800530|800532|800537|800540|800551|800552|800554|800556|800557|800560|800561|800562|800563|800564|800568|800580|800581|800582|800583|800584|800587|800591|800593|800611|800614|800618|800619|800620|800621|800624|800626|800629|800633|800635|800636|800641|800647|800655|800657|800660|800664|800666|800671|800674|800676|800677|800681|800683|800684|800686|800687|800688|800691|800695|800696|800712|800714|800715|800717|800724|800734|800736|800743|800746|800748|800752|800753|800755|800760|800761|800765|800767|800773|800774|800775|800776|800778|800785|800809|800816|800821|800822|800823|800824|800825|800831|800833|800841|800842|800845|800853|800863|800864|800866|800871|800877|800880|800882|800884|800885|800886|800888|800891|800892|800894|800898|800911|800915|800917|800922|800929|800932|800933|800938|800939|800941|800943|800947|800948|800951|800955|800958|800968|800972|800973|800975|800982|800983|800986|800988|800992|800993|800996|801100|801105|801110|801114|801120|801130|801135|801145|801155|801158|801160|801163|801168|801171|801174|801177|801178|801180|801193|801194|801206|801208|801215|801235|801239|801248|801262|801266|801271|801275|801279|801280|801288|801297|801302|801313|801315|801328|801346|801351|801353|801357|801370|801371|801395|801426|801439|801462|801497|801506|801515|801528|801551|801559|801582|801586|801595|801622|801648|801653|801657|801679|801684|801702|801706|801711|801728|801733|801737|801742|801759|801768|801786|801791|801795|801799|801826|801831|801844|801853|801862|801866|801871|801893|801902|801933|801942|801990|801992|801993|802000|802001|802003|802004|802007|802008|802009|802011|802013|802015|802016|802017|802019|802021|802032|802036|802037|802041|802060|802066|802067|802068|802069|802070|802071|802072|802073|802074|802075|802089|802178|802179|802202|802204|802260|802278|802282|802290|802442|802461|802462|802463|802465|802468|802476|802477|802479|802488|802602|802603|802620|802621|802622|802623|802624|802625|802626|802627|802628|802629|802630|802631|802633|802634|802636|802638|802640|802641|802642|802643|802644|802645|802646|802647|802648|802649|802650|802651|802652|802653|802654|802655|802656|802657|802658|802659|802660|802661|802662|802663|802664|802665|802666|802670|802671|802680|802681|802682|802683|802684|802685|802686|802687|802688|802689|802690|802691|802692|802693|802694|802695|802696|802697|802698|802699|802702|802706|802921|802922|802923|802924|802925|802926|802927|802928|802929|802930|802931|803120|803150|803556|803557|803558|803559|803563|803564|803566|803567|803568|803569|803570|803571|803572|803573|803574|803575|803577|803578|803579|803581|803582|803583|803584|803585|803617|803618|803619|803633|803637|803638|803639|803646|803647|803648|803653|803654|803656|803657|803658|803659|803660|803661|803662|803663|803664|803665|803666|803667|803668|803669|803670|803671|803672|803673|803674|803675|803676|803677|803678|803679|803680|803681|803682|803683|803684|803685|803686|803687|803694|803695|803696|803697|803698|803699|803701|803702|803703|803720|803731|803734|803735|803736|803737|803738|803739|803740|803741|803742|803743|803744|803745|803746|803747|803748|803749|803750|804121|804255|804256|804257|804258|804259|804261|804262|804263|804264|804265|804266|804267|804268|804269|804271|804272|804273|804274|804275|804276|804277|804278|804288|804355|804502|804504|804505|804506|804507|804508|804509|804511|804512|804513|804514|804515|804516|804517|804518|804519|804521|804522|804523|804524|804525|804526|804527|804528|804529|804531|804532|804533|804534|804535|804536|804537|804538|804539|804540|804541|804544|804545|804547|804548|804549|804551|804552|804553|804554|804555|804556|804557|804560|804561|804562|804563|804564|804565|804566|804567|804568|804571|804572|804573|804576|804577|804578|804579|804581|804583|804584|804585|804586|804587|804588|804589|804591|804592|804594|804595|804596|804597|804598|804599|804601|804602|804603|804604|804605|804606|804607|804608|804609|804611|804613|804614|804615|804616|804617|804618|804619|804622|804623|804624|804625|804626|804627|804628|804629|804631|804632|804633|804634|804635|804636|804637|804638|804642|804643|804644|804645|804646|804647|804648|804649|804651|804652|804653|804655|804656|804657|804658|804659|804661|804662|804663|804664|804665|804666|804667|804669|804671|804672|804673|804674|804676|804677|804678|804679|804681|804682|804683|804684|804686|804687|804688|804689|804690|804691|804692|804694|804695|804696|804697|804699|804700|804701|804703|804704|804705|804706|804708|804709|804711|804712|804713|804714|804715|804716|804717|804718|804719|804721|804722|804723|804724|804725|804726|804727|804728|804732|804733|804734|804735|804736|804737|804738|804741|804742|804743|804745|804746|804747|804748|804750|804752|804755|804756|804757|804758|804759|804760|804761|804764|804765|804766|804767|804768|804770|804771|804772|804773|804774|804775|804776|804777|804778|804779|804780|804782|804783|804784|804785|804787|804789|804790|804791|804792|804793|804794|804795|804796|804797|804799|804801|804802|804804|804805|804806|804807|804808|804809|804810|804811|804812|804813|804815|804816|804817|804818|804819|804822|804824|804826|804827|804828|804829|804831|804832|804833|804834|804835|804836|804837|804838|804839|804840|804842|804843|804844|804845|804847|804848|804849|804851|804853|804855|804856|804858|804859|804860|804861|804862|804863|804864|804865|804866|804867|804868|804870|804871|804872|804873|804874|804875|804877|804879|804880|804881|804882|804884|804885|804886|804887|804888|804889|804891|804892|804897|804920|804927|804928|804929|804930|804941|804943|804944|804955|804957|804960|804962|804963|804964|804966|804967|804971|804972|804973|804975|804976|804977|804978|804979|804988|805001|805002|805003|805004|805005|805006|805007|805008|805009|805010|805011|805012|805013|805014|805015|805016|805017|805018|805019|805020|805021|805022|805023|805024|805025|805026|805027|805028|805029|805030|805031|805032|805033|805034|805035|805036|805037|805038|805039|805040|805041|805042|805043|805044|805045|805046|805047|805048|805049|805050|805051|805052|805053|805054|805055|805056|805057|805058|805059|805060|805061|805062|805063|805064|805065|805066|805067|805068|805069|805070|805071|805072|805073|805074|805075|805076|805077|805078|805079|805080|805081|805082|805083|805084|805085|805086|805087|805088|805089|805090|805091|805092|805093|805094|805095|805096|805097|805098|805099|805101|805102|805103|805104|805105|805106|805107|805108|805109|805110|805111|805112|805113|805114|805115|805116|805117|805118|805119|805120|805121|805122|805123|805124|805125|805126|805127|805128|805129|805130|805131|805132|805133|805134|805135|805136|805137|805138|805139|805140|805141|805142|805143|805144|805145|805146|805147|805148|805149|805150|805151|805152|805153|805154|805155|805156|805157|805158|805159|805160|805161|805162|805163|805164|805165|805166|805167|805168|805169|805171|805172|805173|805174|805175|805176|805177|805178|805179|805180|805181|805182|805183|805184|805185|805186|805187|805188|805189|805190|805191|805192|805193|805194|805195|805196|805197|805198|805199|805201|805202|805203|805204|805205|805206|805207|805208|805209|805210|805211|805212|805213|805214|805215|805216|805217|805218|805219|805220|805221|805222|805223|805224|805225|805226|805227|805228|805229|805230|805231|805232|805233|805234|805235|805236|805237|805238|805239|805240|805241|805242|805243|805244|805245|805246|805247|805248|805249|805250|805251|805252|805253|805254|805255|805256|805257|805258|805259|805260|805301|805302|805303|805304|805305|805306|805307|805308|805309|805310|805311|805312|805313|805314|805315|805316|805317|805318|805319|805320|805321|805322|805323|805324|805325|805326|805327|805328|805329|805330|805331|805332|805333|805334|805335|805336|805337|805338|805339|805341|805342|805343|805344|805345|805346|805348|805349|805350|805354|805355|805356|805357|805358|805359|805360|805361|805362|805363|805364|805365|805366|805367|805368|805369|805370|805371|805372|805373|805374|805375|805376|805377|805378|805390|805391|805392|805393|805394|805401|805403|805404|805405|805406|805407|805408|805409|805411|805412|805413|805415|805416|805417|805418|805419|805420|805421|805422|805423|805424|805425|805426|805428|805429|805430|805431|805432|805433|805434|805435|805436|805437|805438|805439|805440|805441|805442|805443|805444|805445|805446|805447|805448|805449|805450|805451|805452|805453|805454|805465|805466|805467|805468|805469|805470|805471|805472|805473|805474|805475|805476|805477|805478|805479|805480|805481|805482|805483|805484|805485|805486|805487|805488|805489|805490|805491|805492|805493|805494|805495|805496|805497|805498|805552|805553|805554|805557|805558|805559|805560|805561|805562|805563|805564|805566|805567|805568|805569|805570|805571|805572|805573|805574|805576|805578|805579|805580|805581|805582|805583|805584|805585|805587|805588|805590|805591|805592|805593|805594|805595|805596|805597|805598|805599|805600|805601|805603|805604|805605|805606|805607|805608|805609|805610|805611|805612|805613|805614|805615|805616|805617|805618|805619|805620|805621|805622|805623|805624|805625|805627|805628|805629|805630|805632|805633|805635|805636|805637|805638|805640|805641|805643|805644|805645|805646|805647|805648|805650|805651|805652|805653|805656|805657|805659|805670|805709|805710|805711|805716|805739|805745|805762|805763|805764|805767|805768|805773|805774|805776|805788|805794|805795|805797|805798|805799|805810|805811|805812|805813|805814|805815|805816|805817|805818|805819|805820|805821|805822|805823|805824|805825|805826|805827|805828|805829|805830|805841|805842|805843|805844|805845|805846|805847|805848|805849|805850|805851|805852|805853|805854|805855|805856|805857|805858|805859|805860|805861|805862|805863|805864|805865|805900|805976|805977|807330|807331|807440|807441|807442|807443|807444|807445|807446|807447|807448|807449|807450|807451|807452|807453|807454|807455|807456|807457|807471|807472|807600|807700|807800|807900|808333|808344|808388|809125|809126|809127|809128|809129|809970|809971|809972|809973|809974|809975|809976|809977|809978|809979)$",
                  "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "condition",
                                        "given": "{{ outputData.tranCode }}",
                                        "comparison": "matchregexp",
                                        "expected": "(^{{ outputData.customDepositLimitTranCodes }})$",
                                        "outputData": {
                                          "barcodeInfo.maximumValue": "1000.00"
                                        },
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "BankOfScotlandManualCashDeposit-Stage-2"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "condition",
                                        "given": "1",
                                        "comparison": "eq",
                                        "expected": "1",
                                        "nodes": [
                                          {
                                            "type": "subJourney",
                                            "name": "BankOfScotlandManualCashDeposit-Stage-2"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "BankOfScotlandManualCashDeposit-Stage-2": [
      {
        "type": "input",
        "title": "Serial Number",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "serialNo": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Serial number is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6,6}$",
              "message": "Serial Number must be 6 digits in length."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Amount",
            "outputData": {
              "inputAmount": "{{ inputData.inputValue }}"
            },
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            }, 
            "inputValidation": [
              {
                "field": "inputValue",
                "numericality": {
                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                }
              }
            ],
            "inputMask": "currency",
            "nodes": [
              {
                "type": "input",
                "title": "Re-Enter Amount",
                "inputMask": "currency",
                "description": "0.00",
                "unit": {
                  "position": "left",
                  "value": "£",
                  "type": "text"
                }, 
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Amount is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "confirmation": {
                      "value": "{{ outputData.inputAmount }}",
                      "message": "The amounts entered mismatch. Please re-key."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "Confirm Deposit amount",
                    "visual": {
                      "actionAlignment": "left",
                      "transition": false
                    },
                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                    "actions": [
                      {
                        "title": "Re-enter",
                        "value": "reenter",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Confirm",
                        "value": "confirm",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.inputGroup": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "reenter",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 4
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.inputGroup }}",
                        "expected": "confirm",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "ClydesdaleManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "expectedBankNames": "CLYDESDALE|Clydesdale|clydesdale",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149009",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "Clydesdale Bank"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Client name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            }, 
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                }, 
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "UlsterManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "expectedBankNames": "ULSTER BANK|Ulster Bank|ulster bank",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149010",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            }, 
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                }, 
                                                "inputMask": "currency",
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "BankOfIrelandManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "HOCACode": " ",
          "expectedBankNames": "Bank of Ireland|BANK OF IRELAND",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510149011",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.ClientAccName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            }, 
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                }, 
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "FirstTrustAIBManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "barcodeInfo.itemID": "{{ inputData.enablers.product.itemID }}",
          "barcodeInfo.itemName": "{{ inputData.enablers.product.itemName }}",
          "barcodeInfo.longName": "{{ inputData.enablers.product.longName }}",
          "barcodeInfo.mediumName": "{{ inputData.enablers.product.mediumName }}",
          "barcodeInfo.shortName": "{{ inputData.enablers.product.shortName }}",
          "barcodeInfo.minimumValue": "{{ inputData.enablers.product.minimumValue }}",
          "barcodeInfo.maximumValue": "{{ inputData.enablers.product.maximumValue }}",
          "barcodeInfo.ProdNo": "{{ inputData.enablers.product.itemID }}",
          "HOCACode": " ",
          "expectedBankNames": "AIB GROUP|Aib Group|aib group",
          "PCA": "0"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "9826935101491",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          },
          {
            "name": "tokeniser",
            "id": "product",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "ProdNo": "42834"
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.longName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required"
                },
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            }, 
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                }, 
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "AlliedIrishBankManualCashDeposit": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "barcodeInfo.itemID": "{{ inputData.enablers.product.itemID }}",
          "barcodeInfo.itemName": "{{ inputData.enablers.product.itemName }}",
          "barcodeInfo.longName": "{{ inputData.enablers.product.longName }}",
          "barcodeInfo.mediumName": "{{ inputData.enablers.product.mediumName }}",
          "barcodeInfo.shortName": "{{ inputData.enablers.product.shortName }}",
          "barcodeInfo.minimumValue": "{{ inputData.enablers.product.minimumValue }}",
          "barcodeInfo.maximumValue": "{{ inputData.enablers.product.maximumValue }}",
          "barcodeInfo.ProdNo": "{{ inputData.enablers.product.itemID }}",
          "HOCACode": " ",
          "expectedBankNames": "ALLIED IRISH BANK|Allied Irish Bank|allied irish bank",
          "PCA": "0",
          "permittedTranCodes": "74|77|78|84|85|86|98"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "9826935101491",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          },
          {
            "name": "tokeniser",
            "id": "product",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "ProdNo": "42836"
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Bank name",
            "description": "{{ outputData.barcodeInfo.longName }}"
          },
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "{{ outputData.barcodeInfo.itemName }}"
          },
          {
            "type": "input",
            "title": "Sort Code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account Number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "visual": {
                  "transition": true
                },
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required"
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "{{ outputData.expectedBankNames }}",
                        "outputData": {
                          "PCA": "1"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "input",
                                    "title": "Tran Code",
                                    "inputMask": "alphanumeric",
                                    "description": "Enter",
                                    "outputData": {
                                      "tranCode": "{{ inputData.inputValue }}"
                                    },
                                    "inputValidation": [
                                      {
                                        "field": "inputValue",
                                        "required": {
                                          "message": "Tran code is required."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "{{ outputData.permittedTranCodes }}",
                                          "message": "Tran code must be one of the following: 77, 74, 78, 84, 85, 86 or 98."
                                        }
                                      },
                                      {
                                        "field": "inputValue",
                                        "format": {
                                          "match": "^[0-9]{2}$",
                                          "message": "Tran code should be 2 digits in length."
                                        }
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Serial Number",
                                        "inputMask": "alphanumeric",
                                        "description": "Enter",
                                        "outputData": {
                                          "serialNo": "{{ inputData.inputValue }}"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "required": {
                                              "message": "Serial number is required."
                                            }
                                          },
                                          {
                                            "field": "inputValue",
                                            "format": {
                                              "match": "^[0-9]{6,6}$",
                                              "message": "Serial Number must be 6 digits in length."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "input",
                                            "title": "Amount",
                                            "outputData": {
                                              "inputAmount": "{{ inputData.inputValue }}"
                                            },
                                            "description": "0.00",
                                            "unit": {
                                              "position": "left",
                                              "value": "£",
                                              "type": "text"
                                            }, 
                                            "inputValidation": [
                                              {
                                                "field": "inputValue",
                                                "numericality": {
                                                  "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                                  "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                }
                                              }
                                            ],
                                            "inputMask": "currency",
                                            "nodes": [
                                              {
                                                "type": "input",
                                                "title": "Re-Enter Amount",
                                                "inputMask": "currency",
                                                "description": "0.00",
                                                "unit": {
                                                  "position": "left",
                                                  "value": "£",
                                                  "type": "text"
                                                },
                                                "inputValidation": [
                                                  {
                                                    "field": "inputValue",
                                                    "required": {
                                                      "message": "Amount is required."
                                                    }
                                                  },
                                                  {
                                                    "field": "inputValue",
                                                    "confirmation": {
                                                      "value": "{{ outputData.inputAmount }}",
                                                      "message": "The amounts entered mismatch. Please re-key."
                                                    }
                                                  }
                                                ],
                                                "nodes": [
                                                  {
                                                    "type": "prompt",
                                                    "title": "Confirm Deposit amount",
                                                    "visual": {
                                                      "actionAlignment": "left",
                                                      "transition": false
                                                    },
                                                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                    "actions": [
                                                      {
                                                        "title": "Re-enter",
                                                        "value": "reenter",
                                                        "visual": {
                                                          "view": "secondary"
                                                        }
                                                      },
                                                      {
                                                        "title": "Confirm",
                                                        "value": "confirm",
                                                        "visual": {
                                                          "view": "primary"
                                                        }
                                                      }
                                                    ],
                                                    "outputData": {
                                                      "actions.inputGroup": "{{ inputData.action }}"
                                                    },
                                                    "nodes": [
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "reenter",
                                                        "nodes": [
                                                          {
                                                            "type": "undo",
                                                            "numberOfSteps": 4
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "condition",
                                                        "comparison": "eq",
                                                        "given": "{{ outputData.actions.inputGroup }}",
                                                        "expected": "confirm",
                                                        "nodes": [
                                                          {
                                                            "type": "subJourney",
                                                            "name": "ManualCashDeposit-PrintAndAddToBasket"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Bank details mismatch",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "The bank selected does not match the sort code and account number entered.",
                            "actions": [
                              {
                                "title": "Re-enter",
                                "value": "reenter",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Abort",
                                "value": "abort",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "reenter",
                                "nodes": [
                                  {
                                    "type": "undo",
                                    "numberOfSteps": 6
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "comparison": "eq",
                                "given": "{{ outputData.action }}",
                                "expected": "abort",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Natwest_BCD": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}",
          "accountNumber": "00000000",
          "barcodeSplit": "{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
        },
        "inputMask": "currency",
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        }, 
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            }, 
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "outputData": {
                          "transCode": "77",
                          "svc": "{{ outputData.barcodeSplit[2] }}",
                          "serialNo": "{{ outputData.barcodeSplit[3] }}",
                          "sortcode": "{{ outputData.barcodeSplit[4] }}",
                          "HOCACode": " "
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "given": "/^(0|1|2|3)$/",
                            "comparison": "matchregexp",
                            "outputData": {
                              "accountNumber": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "Natwest_BCD_Entry"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "4",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "comparison": "eq",
                            "outputData": {
                              "accountNumber": "00000000",
                              "HOCACode": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "Natwest_BCD_Entry"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "RBS_BCD_Entry": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "printCustomerReceipt",
            "name": "printer",
            "action": "print",
            "params": {
              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
            },
            "stepEvent": "onMatch",
            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
          }
        ],
        "nodes": [
          {
            "type": "complete",
            "basket": {
              "id": "{{ outputData.itemName }}"
            },
            "transaction": {
              "itemID": "{{ outputData.itemID }}",
              "entryType": "banking",
              "quantity": "1",
              "receiptLine": "1",
              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
              "value": "{{ outputData.amount }}",
              "voidable": "true",
              "quantityFixed": "true",
              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
              "tokens.APTransactionReference": "0001",
              "tokens.SortCode": "{{ outputData.sortcode }}",
              "tokens.versionNumber": "1",
              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
              "tokens.paymentCode": "1",
              "tokens.AccountNumber": "{{ outputData.accountNumber }}",
              "tokens.SerialNo": "{{ outputData.serialNo }}",
              "tokens.TranCode": "77",
              "tokens.HOCA": "{{ outputData.HOCACode }}",
              "tokens.SVC": "{{ outputData.svc }}",
              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
              "tokens.PCA": " "
            }
          }
        ]
      }
    ],
    "RBS_BCD": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        }, 
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}",
          "accountNumber": "00000000",
          "barcodeSplit": "{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            }, 
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "outputData": {
                          "transCode": "77",
                          "svc": "{{ outputData.barcodeSplit[2] }}",
                          "serialNo": "{{ outputData.barcodeSplit[3] }}",
                          "sortcode": "{{ outputData.barcodeSplit[4] }}",
                          "HOCACode": " "
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "given": "/^(0|1|2|3)$/",
                            "comparison": "matchregexp",
                            "outputData": {
                              "accountNumber": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "RBS_BCD_Entry"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "4",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "comparison": "eq",
                            "outputData": {
                              "accountNumber": "00000000",
                              "HOCACode": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "RBS_BCD_Entry"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item39208": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}",
          "barcodeSplit": "{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{4})(\\w{8})(\\w{7})(\\w{1})\") }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        }, 
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            }, 
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "outputData": {
                          "NSC": "90{{ outputData.barcodeSplit[2] }}",
                          "ACC_NO": "{{ outputData.barcodeSplit[3] }}",
                          "TRANS_DESC": "{{ outputData.barcodeSplit[4] }}"
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "expected": "1",
                            "comparison": "eq",
                            "enablers": [
                              {
                                "id": "printCustomerReceipt",
                                "name": "printer",
                                "action": "print",
                                "params": {
                                  "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "complete",
                                "basket": {
                                  "id": "{{ outputData.itemName }}"
                                },
                                "transaction": {
                                  "itemID": "{{ outputData.itemID }}",
                                  "entryType": "banking",
                                  "quantity": "1",
                                  "receiptLine": "1",
                                  "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                  "value": "{{ outputData.amount }}",
                                  "voidable": "true",
                                  "quantityFixed": "true",
                                  "tokens.TRANS_DESC": "{{ outputData.TRANS_DESC }}",
                                  "tokens.NSC": "{{ outputData.NSC }}",
                                  "tokens.ACC_NO": "{{ outputData.ACC_NO }}",
                                  "tokens.CASH_AMT": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                  "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                                  "tokens.versionNumber": "1",
                                  "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                                  "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                                  "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                                  "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                  "tokens.APTransactionReference": "0001",
                                  "tokens.paymentCode": "1"
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Ulster_BCD_Entry": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "printCustomerReceipt",
            "name": "printer",
            "action": "print",
            "params": {
              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
            },
            "stepEvent": "onMatch",
            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
          }
        ],
        "nodes": [
          {
            "type": "complete",
            "basket": {
              "id": "{{ outputData.itemName }}"
            },
            "transaction": {
              "itemID": "{{ outputData.itemID }}",
              "entryType": "banking",
              "quantity": "1",
              "receiptLine": "1",
              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
              "value": "{{ outputData.amount }}",
              "voidable": "true",
              "quantityFixed": "true",
              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
              "tokens.APTransactionReference": "0001",
              "tokens.SortCode": "{{ outputData.sortcode }}",
              "tokens.versionNumber": "1",
              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
              "tokens.paymentCode": "1",
              "tokens.AccountNumber": "{{ outputData.accountNumber }}",
              "tokens.SerialNo": "{{ outputData.serialNo }}",
              "tokens.TranCode": "77",
              "tokens.HOCA": "{{ outputData.HOCACode }}",
              "tokens.SVC": "{{ outputData.svc }}",
              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
              "tokens.PCA": " "
            }
          }
        ]
      }
    ],
    "Ulster_BCD": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}",
          "accountNumber": "00000000",
          "barcodeSplit": "{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
        },
        "inputMask": "currency",
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        }, 
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            }, 
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "outputData": {
                          "transCode": "77",
                          "svc": "{{ outputData.barcodeSplit[2] }}",
                          "serialNo": "{{ outputData.barcodeSplit[3] }}",
                          "sortcode": "{{ outputData.barcodeSplit[4] }}",
                          "HOCACode": " "
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "given": "/^(0|1|2|3)$/",
                            "comparison": "matchregexp",
                            "outputData": {
                              "accountNumber": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "Ulster_BCD_Entry"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "4",
                            "expected": "{{ outputData.barcodeSplit[2] }}",
                            "comparison": "eq",
                            "outputData": {
                              "accountNumber": "00000000",
                              "HOCACode": "{{ outputData.barcodeSplit[5] }}"
                            },
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "Ulster_BCD_Entry"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item49081": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        },
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "enablers": [
                          {
                            "id": "printCustomerReceipt",
                            "name": "printer",
                            "action": "print",
                            "params": {
                              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "complete",
                            "basket": {
                              "id": "{{ outputData.itemName }}"
                            },
                            "transaction": {
                              "itemID": "{{ outputData.itemID }}",
                              "tokens.Amount": "{{outputData.amount}}",
                              "entryType": "banking",
                              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                              "value": "{{ outputData.amount }}",
                              "quantity": "1",
                              "receiptLine": "1",
                              "voidable": "true",
                              "quantityFixed": "true",
                              "tokens.X_DATA_PN": "{{ outputData.ProdNo }}",
                              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                              "tokens.APTransactionReference": "0001",
                              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                              "tokens.versionNumber": "1",
                              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                              "tokens.paymentCode": "1"
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item49082": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        },
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "printCustomerReceipt",
                            "name": "printer",
                            "action": "print",
                            "params": {
                              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "complete",
                            "basket": {
                              "id": "{{ outputData.itemName }}"
                            },
                            "transaction": {
                              "itemID": "{{ outputData.itemID }}",
                              "entryType": "banking",
                              "quantity": "1",
                              "receiptLine": "1",
                              "tokens.X_DATA_PN": "{{ outputData.ProdNo }}",
                              "tokens.Amount": "{{outputData.amount}}",
                              "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
                              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                              "value": "{{ outputData.amount }}",
                              "voidable": "true",
                              "quantityFixed": "true",
                              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                              "tokens.APTransactionReference": "0001",
                              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                              "tokens.versionNumber": "1",
                              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                              "tokens.paymentCode": "1"
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item49011": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        },
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "printCustomerReceipt",
                            "name": "printer",
                            "action": "print",
                            "params": {
                              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "complete",
                            "basket": {
                              "id": "{{ outputData.itemName }}"
                            },
                            "transaction": {
                              "itemID": "{{ outputData.itemID }}",
                              "entryType": "banking",
                              "quantity": "1",
                              "receiptLine": "1",
                              "tokens.X_DATA_PN": "{{ outputData.ProdNo }}",
                              "tokens.Amount": "{{outputData.amount}}",
                              "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
                              "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                              "value": "{{ outputData.amount }}",
                              "voidable": "true",
                              "quantityFixed": "true",
                              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                              "tokens.APTransactionReference": "0001",
                              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                              "tokens.versionNumber": "1",
                              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                              "tokens.paymentCode": "1"
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item49078": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "amount": "{{ inputData.inputValue }}"
        },
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.maximumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          },
          {
            "field": "inputValue",
            "numericality": {
              "gte": "{{ outputData.minimumValue }}",
              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
            }
          }
        ],
        "description": "0.00",
        "unit": {
          "position": "left",
          "value": "£",
          "type": "text"
        },
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputMask": "currency",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.amount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "re-enter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirmed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "re-enter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.action }}",
                    "expected": "confirmed",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "enablers": [
                          {
                            "id": "printCustomerReceipt",
                            "name": "printer",
                            "action": "print",
                            "params": {
                              "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "complete",
                            "basket": {
                              "id": "{{ outputData.itemName }}"
                            },
                            "transaction": {
                              "itemID": "{{ outputData.itemID }}",
                              "tokens.Amount": "{{ outputData.amount }}",
                              "value": "{{ outputData.amount }}",
                              "entryType": "banking",
                              "quantity": "1",
                              "receiptLine": "1",
                              "voidable": "true",
                              "quantityFixed": "true",
                              "tokens.X_DATA_PN": "{{ outputData.ProdNo }}",
                              "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                              "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                              "tokens.APTransactionReference": "0001",
                              "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                              "tokens.versionNumber": "1",
                              "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                              "tokens.paymentCode": "1"
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item9201": [
      {
        "type": "info",
        "title": "Bank name",
        "description": "{{ outputData.ClientAccName }}"
      },
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{ outputData.itemName }}"
      },
      {
        "type": "input",
        "title": "Scan or enter 2nd barcode",
        "inputMask": "alphanumeric",
        "description": "Barcode",
        "outputData": {
          "secondBarcode": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "2nd barcode is required"
            },
            "format": {
              "match": "^[A][A-Za-z0-9]{3,20}$",
              "message": "2nd barcode should be alphanumeric and between 4-21 characters."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Amount",
            "outputData": {
              "amount": "{{ inputData.inputValue }}"
            },
            "inputMask": "currency",
            "description": "0.00",
            "unit": {
              "position": "left",
              "value": "£",
              "type": "text"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "numericality": {
                  "lte": "{{ outputData.maximumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                }
              },
              {
                "field": "inputValue",
                "numericality": {
                  "gte": "{{ outputData.minimumValue }}",
                  "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Re-Enter Amount",
                "inputMask": "currency",
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Amount is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "confirmation": {
                      "value": "{{ outputData.amount }}",
                      "message": "The amounts entered mismatch. Please re-key."
                    }
                  }
                ],
                "description": "0.00",
                "unit": {
                  "position": "left",
                  "value": "£",
                  "type": "text"
                },    
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "Confirm Deposit amount",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                    "actions": [
                      {
                        "title": "Re-enter",
                        "value": "re-enter",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Confirm",
                        "value": "confirmed",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "action": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.action }}",
                        "expected": "re-enter",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 4
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.action }}",
                        "expected": "confirmed",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "printCustomerReceipt",
                                "name": "printer",
                                "action": "print",
                                "params": {
                                  "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>\r\n{{ appData.device.branchName }}<br>\r\n{{ appData.device.branchAddress }}<br>\r\n{{ appData.device.branchPostcode }}\r\n</td>\r\n<td>\r\nTP: {{ appData.device.nodeID }}<br>\r\nFAD: {{ appData.device.branchID }}\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<p>Session Id: TBC</p>\r\n<p>Txn Id: TBC</p>\r\n<p>Client: {{ outputData.ClientAccName }}</p>\r\n<p>Scheme: {{ outputData.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.clientSrvCode }}</p>\r\n<p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p>\r\n<p>Ref: {{ outputData.Rref }}</p>\r\n<p>Amount: {{ outputData.amount }}</p>\r\n<p>Product No: {{ outputData.ProdNo }}</p>\r\n<hr/>\r\n<p>Customer Ref: {{ outputData.customerRefNumber }}</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n</div>\r\n</body></html>"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "complete",
                                "basket": {
                                  "id": "{{ outputData.itemName }}"
                                },
                                "transaction": {
                                  "itemID": "{{ outputData.itemID }}",
                                  "entryType": "banking",
                                  "quantity": "1",
                                  "receiptLine": "1",
                                  "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
                                  "valueInPence": "{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                  "value": "{{ outputData.amount }}",
                                  "voidable": "true",
                                  "quantityFixed": "true",
                                  "tokens.tokenIdentifier": "{{ outputData.TokenId }}",
                                  "tokens.clientAccountNo": "{{ outputData.ClientAcc }}",
                                  "tokens.APTransactionReference": "0001",
                                  "tokens.customerRefNumber": "{{ outputData.customerRefNumber }}",
                                  "tokens.versionNumber": "1",
                                  "tokens.clientSrvCode": "{{ outputData.clientSrvCode }}",
                                  "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                  "tokens.paymentCode": "1"
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "readabilityTest": [
      {
        "type": "choice",
        "title": "2D Label Readability Test",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "barcode",
            "title": "Input barcode",
            "description": "Enter barcode value",
            "outputData": {
              "rawBarcode": "{{ inputData.barcode }}",
              "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
              "displayInfo": "{{ inputData.enablers.displayLabel }}"
            },
            "enablers": [
              {
                "name": "tokeniser",
                "id": "tokeniser",
                "action": "tokenise",
                "stepEvent": "onChange",
                "params": {
                  "barcode": "{{ inputData.barcode }}"
                },
                "loadingMessage": "Please wait..."
              },
              {
                "id": "displayLabel",
                "name": "displayOnScreen",
                "action": "display",
                "params": {
                  "data": "{{ inputData.enablers.tokeniser }}"
                },
                "stepEvent": "onChange"
              }
            ],
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "comparison": "eq",
                "expected": "1",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "{{ outputData.barcodeInfo.Type }}",
                    "expected": "jgb4",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "info",
                        "title": "",
                        "visual": {
                          "view": "list"
                        },
                        "params": []
                      },
                      {
                        "type": "choice",
                        "title": "Ok",
                        "visual": {
                          "transition": false
                        },
                        "nodes": [
                          {
                            "type": "choice",
                            "title": "Add to basket",
                            "nodes": [
                              {
                                "type": "complete",
                                "basket": {
                                  "id": "{{ outputData.barcodeInfo.UPUTrackingNumber }}",
                                  "Service": "2D Readability"
                                },
                                "transaction": {
                                  "tokens.Weight2d": "{{outputData.barcodeInfo.Weight}}",
                                  "tokens.PRN2d": "{{outputData.barcodeInfo.ProdNo}}",
                                  "tokens.destinationAddress": "{{ outputData.barcodeInfo.DestinationPostCode }}",
                                  "tokens.premiss": "{{outputData.barcodeInfo.BuildingNameNumber}}",
                                  "tokens.destination": "{{ outputData.barcodeInfo.DestinationCountry }}",
                                  "entryType": "mails",
                                  "itemID": "{{ outputData.product.Service.LaunchItemID }}",
                                  "quantity": "1",
                                  "basketItems": "",
                                  "receiptLine": "1",
                                  "voidable": "true",
                                  "value": "{{outputData.amount}}"
                                },
                                "nodes": null
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "info",
                        "title": "The barcode is not of a type that the Readability Test expects. Only Post Office printed postage labels with a 2D barcode can be tested.",
                        "nodes": null
                      },
                      {
                        "type": "choice",
                        "title": "Finish",
                        "nodes": [
                          {
                            "type": "abort",
                            "nodes": null
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "BillPay": [
      {
        "type": "info",
        "title": "PAN",
        "description": "{{ outputData.Rref }}",
        "nodes": null
      },
      {
        "type": "info",
        "title": "Client Name",
        "description": "{{  outputData.ClientAccName }}",
        "nodes": null
      },
      {
        "type": "info",
        "title": "Description",
        "description": "{{  outputData.TokenName }}",
        "nodes": null
      },
      {
        "type": "info",
        "title": "",
        "description": "Min. payable amount £ {{  outputData.minimumValue }}",
        "nodes": null
      },
      {
        "type": "info",
        "title": "",
        "description": "Max. payable amount £ {{  outputData.maximumValue }}",
        "nodes": null
      },
      {
        "type": "input",
        "title": "Amount",
        "inputMask": "currency",
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Amount is required."
            },
            "numericality": {
              "lte": "{{ outputData.maximumValue}}",
              "gte": "{{ outputData.minimumValue}}",
              "message": "Amount should be less than {{ outputData.maximumValue }} and greater than {{ outputData.minimumValue }}"
            }
          },
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          }
        ],
        "visual": {
          "transition": false
        },
        "outputData": {
          "amount": "{{ inputData.inputValue }}",
          "Rref": "{{ outputData.Rref }}",
          "ClientAccName": "{{ outputData.ClientAccName }}",
          "TokenName": "{{ outputData.TokenName }}"
        },
        "nodes": [
          {
            "type": "choice",
            "title": "Cancel",
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "choice",
            "title": "Add to basket",
            "nodes": [
              {
                "type": "complete",
                "basket": {
                  "id": "{{ outputData.Rref }}",
                  "title": "{{ outputData.ClientAccName }}"
                },
                "transaction": {
                  "tokens.amountRequested": "{{ outputData.amount }}",
                  "tokens.authorisation_code": "85312345678917",
                  "tokens.bankTransactionID": "{{ outputData.Rref }}",
                  "tokens.cardImpounded": "0",
                  "tokens.clientID": "{{ outputData.CuR }}",
                  "tokens.currency": "GBP",
                  "tokens.fee": "0",
                  "tokens.horizonTransactionID": "TBC",
                  "tokens.financialTransaction": "0",
                  "tokens.issuerSchemeID": "{{ outputData.issuerSchemeId }}",
                  "merchantNumber ": "85312345678917",
                  "tokens.pan": "token.pan",
                  "tokens.receiptDate": "20211223",
                  "tokens.recoveryFlag": "N",
                  "tokens.responseCode": "201",
                  "tokens.settlementDate": "20211223",
                  "tokens.transactionResultCode": "1",
                  "tokens.transactionType": "61",
                  "tokens.agentSlaInfo": "000064",
                  "tokens.counterSlaInfo": "000916",
                  "tokens.bankResponse": "",
                  "tokens.bankValueFlag": "N",
                  "entryType": "Bill Payment",
                  "itemID": "{{ outputData.CuR }}",
                  "quantity": "1",
                  "voidable": "true",
                  "quantityFixed": "true",
                  "receiptLine": "1",
                  "value": "{{outputData.amount}}"
                },
                "inputValidation": [
                  {
                    "field": "outputData.CuR",
                    "uniqueness": {
                      "selector": "{{ basketData[*].id }}",
                      "message": "This item is already in the basket"
                    }
                  }
                ],
                "nodes": null
              }
            ]
          }
        ]
      }
    ],
    "OnlineCashWithdrawal": [
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "inputAmount": "{{ inputData.inputValue }}"
        },
        "defaultValues": {
          "inputValue": "0.00"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          }
        ],
        "inputMask": "currency",
        "nodes": [
          {
            "type": "choice",
            "title": "Continue",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "condition",
                "outputData": {
                  "pedResponseX": "{{ inputData.enablers.cashWithdrawalX }}"
                },
                "given": "1",
                "comparison": "eq",
                "expected": "1",
                "enablers": [
                  {
                    "name": "banking",
                    "id": "cashWithdrawalX",
                    "action": "CashWithdrawalX",
                    "stepEvent": "onMatch",
                    "params": {},
                    "loadingMessage": "Ask the customer to insert or present their card or device"
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "outputData": {
                      "referenceData": "{{ inputData.enablers.referenceData }}"
                    },
                    "given": "{{ outputData.pedResponseX.responseCode }}",
                    "comparison": "eq",
                    "expected": "01",
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "referenceData",
                        "action": "TokeniserLookup",
                        "stepEvent": "onMatch",
                        "params": {
                          "maskedPan": "{{ outputData.pedResponseX.maskedPan }}",
                          "operation": "Cash Withdraw"
                        },
                        "loadingMessage": "Please wait, processing"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.referenceData.isValidOperation }}",
                        "comparison": "eq",
                        "expected": "false",
                        "nodes": [
                          {
                            "type": "info",
                            "title": "Unsupported Card",
                            "description": "The transaction has been declined. Advise the customer to use an alternative card for this transaction."
                          },
                          {
                            "type": "choice",
                            "title": "Cancel Transaction",
                            "visual": {
                              "transition": true
                            },
                            "nodes": [
                              {
                                "type": "abort",
                                "nodes": null
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.referenceData.isValidOperation }}",
                        "comparison": "eq",
                        "expected": "true",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "{{ outputData.inputAmount }}",
                            "comparison": "lt",
                            "expected": "{{ outputData.referenceData.item.minimumValue }}",
                            "nodes": [
                              {
                                "type": "info",
                                "title": "Invalid Amount",
                                "description": "The minimum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.minimumValue }}\", \"GBP\") }}."
                              },
                              {
                                "type": "choice",
                                "title": "Cancel Transaction",
                                "visual": {
                                  "transition": true
                                },
                                "nodes": [
                                  {
                                    "type": "abort",
                                    "nodes": null
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "{{ outputData.inputAmount }}",
                            "comparison": "gt",
                            "expected": "{{ outputData.referenceData.item.maximumValue }}",
                            "nodes": [
                              {
                                "type": "info",
                                "title": "Invalid Amount",
                                "description": "The maximum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.maximumValue }}\", \"GBP\") }}."
                              },
                              {
                                "type": "choice",
                                "title": "Cancel Transaction",
                                "visual": {
                                  "transition": false
                                },
                                "nodes": [
                                  {
                                    "type": "abort",
                                    "nodes": null
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "printReceipt",
                                "name": "printer",
                                "action": "print",
                                "params": {
                                  "value": "<html><head><style>\r\n    * {font-family:\"monospace\";}\r\n    body,tr,td,span,p,ul,li,div {font-size:24px;}\r\n    table {width:100%}\r\n    table tbody {vertical-align: top;}\r\n    .no-padding h1, h2, h3, p { margin: 0; padding: 0; }\r\n    h1 {font-size:32px;}\r\n    h2 {font-size:28px;}\r\n    h3 {font-size:24px;}\r\n    .text-center { text-align: center; }\r\n    hr { width:100%; border:0; height:1px; background-color: #cccccc;}\r\n    </style>\r\n  </head><body>\r\n      <div class=\"text-center no-padding\">\r\n    <h1>Post Office Ltd.</h1>\r\n    <h3>Your Receipt</h3>\r\n  </div>\r\n  <hr/>\r\n    <div class=\"no-padding\">\r\n    <table>\r\n      <tr>\r\n        <td>DATE TO BE ADDED<br>\r\n        Moulton<br>\r\n          Whitlow Lane,<br>Northwich,<br>Cheshire<br>CW9 8QN\r\n        </td>\r\n        <td>\r\n        TP: 33<br>\r\n        FAD: 2314010\r\n      </td>\r\n      </tr>\r\n    </table>\r\n    <hr/>\r\n    <h3 class=\"text-center\">{{ outputData.referenceData.item.itemName }}</h3>\r\n    <hr/>\r\n    <h3>Post Office Banking Services</h3>\r\n    <p>Service: {{ outputData.referenceData.item.itemName }}</p>\r\n    <p>Card Number: {{ outputData.pedResponseX.maskedPan }}</p>\r\n    <p>Amount: {{outputData.inputAmount}}</p>\r\n  </div>\r\n    <div>\r\n      <hr/>\r\n      <div class=\"no-padding\">\r\n      <p>Service: <strong>Cash Withdrawal</strong></p>\r\n      <hr/>\r\n    </div>\r\n    <hr/>\r\n    <div class=\"no-padding\">\r\n    </div>\r\n  </div>\r\n   <hr/>\r\n  <div class=\"text-center no-padding\">\r\n      <h3>CARDHOLDER RECEIPT</h3><br>\r\n      <p>Please retain for future reference</p>\r\n      <p>This is not a VAT receipt</p>\r\n    </div>\r\n    </body></html>"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Wait while customer's receipt is printed."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "complete",
                                "basket": {
                                  "id": "{{ outputData.referenceData.item.itemName }}"
                                },
                                "transaction": {
                                  "tokens.amountRequested": "{{ outputData.inputAmount }}",
                                  "tokens.authorisation_code": "WILL_COME_FROM_FULFILLMENT",
                                  "tokens.bankTransactionID": "WILL_COME_FROM_FULFILLMENT",
                                  "tokens.cardImpounded": "N",
                                  "tokens.clientID": "{{ outputData.referenceData.tokenmask.ClientId }}",
                                  "tokens.currency": "GBP",
                                  "tokens.fee": "0",
                                  "tokens.horizonTransactionID": "TBC",
                                  "tokens.financialTransaction": "TBC",
                                  "tokens.issuerSchemeID": "{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                  "merchantNumber": "TBC",
                                  "routingGateway": "TBC",
                                  "tokens.pan": "{{ outputData.pedResponseX.maskedPan }}",
                                  "tokens.receiptDate": "TBC",
                                  "tokens.recoveryFlag": "N",
                                  "tokens.responseCode": "WILL_COME_FROM_FULFILLMENT",
                                  "tokens.settlementDate": "TBC",
                                  "tokens.transactionResultCode": "TBC",
                                  "tokens.transactionType": "TBC",
                                  "tokens.agentSlaInfo": "TBC",
                                  "tokens.counterSlaInfo": "TBC",
                                  "tokens.bankResponse": "WILL_COME_FROM_FULFILLMENT",
                                  "tokens.bankValueFlag": "TBC",
                                  "entryType": "banking",
                                  "itemID": "{{ outputData.referenceData.item.itemID }}",
                                  "quantity": "1",
                                  "quantityFixed": "true",
                                  "voidable": "true",
                                  "receiptLine": "1",
                                  "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
                                  "valueInPence": "-{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
                                  "value": "-{{ outputData.inputAmount }}",
                                  "fulfilmentAction": "withdrawal"
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.pedResponseX.responseCode }}",
                    "comparison": "eq",
                    "expected": "01",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "TransactionDeclinedPrompt"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "Cancel",
        "visual": {
          "transition": true,
          "variant": "secondary"
        },
        "nodes": [
          {
            "type": "abort",
            "nodes": null
          }
        ]
      }
    ],
    "OnlineBalanceEnquiry": [
      {
        "type": "condition",
        "outputData": {
          "pedResponseX": "{{ inputData.enablers.balanceEnquiryX }}"
        },
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "enablers": [
          {
            "name": "banking",
            "id": "balanceEnquiryX",
            "action": "BalanceEnquiryX",
            "stepEvent": "onMatch",
            "params": {},
            "loadingMessage": "Ask the customer to insert or present their card or device"
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "outputData": {
              "referenceData": "{{ inputData.enablers.referenceData }}"
            },
            "given": "{{ outputData.pedResponseX.responseCode }}",
            "comparison": "eq",
            "expected": "01",
            "enablers": [
              {
                "name": "banking",
                "id": "referenceData",
                "action": "TokeniserLookup",
                "stepEvent": "onMatch",
                "params": {
                  "maskedPan": "{{ outputData.pedResponseX.maskedPan }}",
                  "operation": "Balance"
                },
                "loadingMessage": "Please wait, processing"
              }
            ],
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.referenceData.isValidOperation }}",
                "comparison": "eq",
                "expected": "true",
                "nodes": [
                  {
                    "type": "condition",
                    "outputData": {},
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "printReceipt",
                        "name": "printer",
                        "action": "print",
                        "params": {
                          "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>DATE TO BE ADDED<br>\r\nMoulton<br>\r\nWhitlow Lane,<br>Northwich,<br>Cheshire<br>CW9 8QN\r\n</td>\r\n<td>\r\nTP: 33<br>\r\nFAD: 2314010\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<h3 class=text-center>{{ outputData.referenceData.item.itemName }}</h3>\r\n<hr/>\r\n<h3>Post Office Banking Services</h3>\r\n<p>Card Number: {{ outputData.pedResponseX.maskedPan }}</p>\r\n<p>Auth Code: {{ outputData.pedResponseY.authCode }}</p>\r\n<p>Application ID: {{ outputData.pedResponseY.applicationId }}</p>\r\n<p>PAN Seq No: {{ outputData.pedResponseY.panSequenceNumber }}</p>\r\n<p>Transaction ID: TR000099933000000938000000002</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n<div class=no-padding>\r\n<p>Service: <strong>Balance Enquiry</strong></p>\r\n<hr/>\r\n<h3><strong>BALANCE ENQUIRY APPROVED</strong></h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>Account available balance</td>\r\n<td>\u00A3{{ outputData.pedResponseY.availableBalance }}</td>\r\n</tr>\r\n<tr>\r\n<td>Account balance</td>\r\n<td>\u00A3{{ outputData.pedResponseY.balance }}</td>\r\n</tr>\r\n</table>\r\n</div>\r\n</div>\r\n<hr/>\r\n<div class=\"text-center no-padding\">\r\n<h3>CARDHOLDER RECEIPT</h3><br>\r\n<p>Please retain for your records</p>\r\n<p>This is not a VAT receipt</p>\r\n</div>\r\n</body></html>"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Wait while customer's receipt is printed."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "complete",
                        "basket": {
                          "id": "{{ outputData.referenceData.item.itemName }}"
                        },
                        "transaction": {
                          "tokens.amountRequested": "0",
                          "tokens.authorisation_code": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.bankTransactionID": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.cardImpounded": "0",
                          "tokens.clientID": "{{ outputData.referenceData.tokenmask.ClientId }}",
                          "tokens.currency": "GBP",
                          "tokens.fee": "0",
                          "tokens.horizonTransactionID": "TBC",
                          "tokens.financialTransaction": "TBC",
                          "tokens.issuerSchemeID": "{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                          "merchantNumber": "TBC",
                          "routingGateway": "TBC",
                          "tokens.pan": "{{ outputData.pedResponseX.maskedPan }}",
                          "tokens.receiptDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                          "tokens.recoveryFlag": "N",
                          "tokens.responseCode": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.settlementDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                          "tokens.transactionResultCode": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.transactionType": "TBC",
                          "tokens.agentSlaInfo": "TBC",
                          "tokens.counterSlaInfo": "TBC",
                          "tokens.bankResponse": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.bankValueFlag": "N",
                          "entryType": "banking",
                          "itemID": "{{ outputData.referenceData.item.itemID }}",
                          "quantity": "1",
                          "voidable": "true",
                          "quantityFixed": "true",
                          "receiptLine": "1",
                          "valueInPence": "0",
                          "value": "0",
                          "fulfilmentAction": "balance",
                          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}"
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.pedResponseX.responseCode }}",
                "comparison": "eq",
                "expected": "01",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "TransactionDeclinedPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.referenceData.isValidOperation }}",
                "comparison": "eq",
                "expected": "false",
                "nodes": [
                  {
                    "type": "info",
                    "title": "Unsupported Card",
                    "description": "The transaction has been declined. Advise the customer to use an alternative card for this transaction."
                  },
                  {
                    "type": "choice",
                    "title": "Cancel Transaction",
                    "visual": {
                      "transition": true
                    },
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "OnlineChangePin": [
      {
        "type": "condition",
        "outputData": {
          "pedResponseX": "{{ inputData.enablers.changePinX }}"
        },
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "enablers": [
          {
            "name": "banking",
            "id": "changePinX",
            "action": "ChangePinX",
            "stepEvent": "onMatch",
            "params": {},
            "loadingMessage": "Ask the customer to insert or present their card or device"
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "outputData": {
              "referenceData": "{{ inputData.enablers.referenceData }}"
            },
            "given": "{{ outputData.pedResponseX.responseCode }}",
            "comparison": "eq",
            "expected": "01",
            "enablers": [
              {
                "name": "banking",
                "id": "referenceData",
                "action": "TokeniserLookup",
                "stepEvent": "onMatch",
                "params": {
                  "maskedPan": "{{ outputData.pedResponseX.maskedPan }}",
                  "operation": "Change PIN"
                },
                "loadingMessage": "Please wait, processing"
              }
            ],
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.referenceData.isValidOperation }}",
                "comparison": "eq",
                "expected": "true",
                "nodes": [
                  {
                    "type": "condition",
                    "outputData": {},
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "printReceipt",
                        "name": "printer",
                        "action": "print",
                        "params": {
                          "value": "<html><head><style>*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}</style>\r\n</head><body>\r\n<div class=\"text-center no-padding\">\r\n<h1>Post Office Ltd.</h1>\r\n<h3>Your Receipt</h3>\r\n</div>\r\n<hr/>\r\n<div class=no-padding>\r\n<table>\r\n<tr>\r\n<td>DATE TO BE ADDED<br>\r\nMoulton<br>\r\nWhitlow Lane,<br>Northwich,<br>Cheshire<br>CW9 8QN\r\n</td>\r\n<td>\r\nTP: 33<br>\r\nFAD: 2314010\r\n</td>\r\n</tr>\r\n</table>\r\n<hr/>\r\n<h3 class=text-center>{{ outputData.referenceData.item.itemName }}</h3>\r\n<hr/>\r\n<h3>Post Office Everyday Banking</h3>\r\n<p>Card Number: {{ outputData.pedResponseX.maskedPan }}</p>\r\n<p>Auth Code: {{ outputData.pedResponseY.authCode }}</p>\r\n<p>Application ID: {{ outputData.pedResponseY.applicationId }}</p>\r\n<p>HTxn ID: 8JNDA1020831</p>\r\n</div>\r\n<div>\r\n<hr/>\r\n<div class=no-padding>\r\n<p>Service: <strong>PIN CHANGE</strong></p>\r\n<hr/>\r\n<h3><strong>PIN CHANGE APPROVED</strong></h3>\r\n<p>Your PIN has been successfully changed.</p>\r\n</div>\r\n<hr/>\r\n<div class=\"text-center no-padding\">\r\n<h3>CARDHOLDER RECEIPT</h3><br>\r\n<p>Please retain for your records</p>\r\n<p>This is not a VAT receipt</p>\r\n</div>\r\n</body></html>"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Wait while customer's receipt is printed."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "complete",
                        "basket": {
                          "id": "{{ outputData.referenceData.item.itemName }}"
                        },
                        "transaction": {
                          "tokens.amountRequested": "0",
                          "tokens.authorisation_code": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.bankTransactionID": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.cardImpounded": "0",
                          "tokens.clientID": "{{ outputData.referenceData.tokenmask.ClientId }}",
                          "tokens.currency": "GBP",
                          "tokens.fee": "0",
                          "tokens.horizonTransactionID": "TBC",
                          "tokens.financialTransaction": "TBC",
                          "tokens.issuerSchemeID": "{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                          "merchantNumber": "TBC",
                          "routingGateway": "TBC",
                          "tokens.pan": "{{ outputData.pedResponseX.maskedPan }}",
                          "tokens.receiptDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                          "tokens.recoveryFlag": "N",
                          "tokens.responseCode": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.settlementDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                          "tokens.transactionResultCode": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.transactionType": "TBC",
                          "tokens.agentSlaInfo": "TBC",
                          "tokens.counterSlaInfo": "TBC",
                          "tokens.bankResponse": "WILL_COME_FROM_FULFILLMENT",
                          "tokens.bankValueFlag": "N",
                          "entryType": "banking",
                          "itemID": "{{ outputData.referenceData.item.itemID }}",
                          "quantity": "1",
                          "voidable": "true",
                          "quantityFixed": "true",
                          "receiptLine": "1",
                          "valueInPence": "0",
                          "value": "0",
                          "fulfilmentAction": "pinChange",
                          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}"
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.referenceData.isValidOperation }}",
                "comparison": "eq",
                "expected": "false",
                "nodes": [
                  {
                    "type": "info",
                    "title": "Unsupported Card",
                    "description": "The transaction has been declined. Advise the customer to use an alternative card for this transaction."
                  },
                  {
                    "type": "choice",
                    "title": "Cancel Transaction",
                    "visual": {
                      "transition": true
                    },
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.pedResponseX.responseCode }}",
            "comparison": "eq",
            "expected": "01",
            "nodes": [
              {
                "type": "subJourney",
                "name": "TransactionDeclinedPrompt"
              }
            ]
          }
        ]
      }
    ],
    "OnlineCashDeposit": [
      {
        "type": "input",
        "title": "Amount",
        "outputData": {
          "inputAmount": "{{ inputData.inputValue }}"
        },
        "defaultValues": {
          "inputValue": "0.00"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "format": {
              "notMatch": "^0.00$",
              "message": "Amount is required."
            }
          }
        ],
        "inputMask": "currency",
        "nodes": [
          {
            "type": "input",
            "title": "Re-Enter Amount",
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Amount is required."
                }
              },
              {
                "field": "inputValue",
                "confirmation": {
                  "value": "{{ outputData.inputAmount }}",
                  "message": "The amounts entered mismatch. Please re-key."
                }
              }
            ],
            "defaultValues": {
              "inputValue": "0.00"
            },
            "inputMask": "currency",
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm Deposit amount",
                "visual": {
                  "actionAlignment": "left",
                  "transition": false
                },
                "description": "You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                "actions": [
                  {
                    "title": "Re-enter",
                    "value": "reenter",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Confirm",
                    "value": "confirm",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.inputGroup": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.inputGroup }}",
                    "expected": "reenter",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.inputGroup }}",
                    "expected": "confirm",
                    "nodes": [
                      {
                        "type": "condition",
                        "outputData": {
                          "pedResponseX": "{{ inputData.enablers.cashDepositX }}"
                        },
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "name": "banking",
                            "id": "cashDepositX",
                            "action": "CashDepositX",
                            "stepEvent": "onMatch",
                            "params": {},
                            "loadingMessage": "Ask the customer to insert or present their card or device"
                          }
                        ],
                        "nodes": [
                          {
                            "type": "condition",
                            "outputData": {
                              "referenceData": "{{ inputData.enablers.referenceData }}"
                            },
                            "given": "{{ outputData.pedResponseX.responseCode }}",
                            "comparison": "eq",
                            "expected": "01",
                            "enablers": [
                              {
                                "name": "banking",
                                "id": "referenceData",
                                "action": "TokeniserLookup",
                                "stepEvent": "onMatch",
                                "params": {
                                  "maskedPan": "{{ outputData.pedResponseX.maskedPan }}",
                                  "operation": "Cash Deposit"
                                },
                                "loadingMessage": "Please wait, processing"
                              }
                            ],
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "{{ outputData.referenceData.isValidOperation }}",
                                "comparison": "eq",
                                "expected": "false",
                                "nodes": [
                                  {
                                    "type": "info",
                                    "title": "Unsupported Card",
                                    "description": "The transaction has been declined. Advise the customer to use an alternative card for this transaction."
                                  },
                                  {
                                    "type": "choice",
                                    "title": "Cancel Transaction",
                                    "visual": {
                                      "transition": true
                                    },
                                    "nodes": [
                                      {
                                        "type": "abort",
                                        "nodes": null
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "{{ outputData.referenceData.isValidOperation }}",
                                "comparison": "eq",
                                "expected": "true",
                                "nodes": [
                                  {
                                    "type": "condition",
                                    "given": "{{ outputData.inputAmount }}",
                                    "comparison": "lt",
                                    "expected": "{{ outputData.referenceData.item.minimumValue }}",
                                    "nodes": [
                                      {
                                        "type": "info",
                                        "title": "Invalid Amount",
                                        "description": "The minimum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.minimumValue }}\", \"GBP\") }}."
                                      },
                                      {
                                        "type": "choice",
                                        "title": "Cancel Transaction",
                                        "visual": {
                                          "transition": true
                                        },
                                        "nodes": [
                                          {
                                            "type": "abort",
                                            "nodes": null
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "condition",
                                    "given": "{{ outputData.inputAmount }}",
                                    "comparison": "gt",
                                    "expected": "{{ outputData.referenceData.item.maximumValue }}",
                                    "nodes": [
                                      {
                                        "type": "info",
                                        "title": "Invalid Amount",
                                        "description": "The maximum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.maximumValue }}\", \"GBP\") }}."
                                      },
                                      {
                                        "type": "choice",
                                        "title": "Cancel Transaction",
                                        "visual": {
                                          "transition": false
                                        },
                                        "nodes": [
                                          {
                                            "type": "abort",
                                            "nodes": null
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "condition",
                                    "given": "1",
                                    "comparison": "eq",
                                    "expected": "1",
                                    "enablers": [
                                      {
                                        "id": "printReceipt",
                                        "name": "printer",
                                        "action": "print",
                                        "params": {
                                          "value": "<html><head><style>\r\n    * {font-family:\"monospace\";}\r\n    body,tr,td,span,p,ul,li,div {font-size:24px;}\r\n    table {width:100%}\r\n    table tbody {vertical-align: top;}\r\n    .no-padding h1, h2, h3, p { margin: 0; padding: 0; }\r\n    h1 {font-size:32px;}\r\n    h2 {font-size:28px;}\r\n    h3 {font-size:24px;}\r\n    .text-center { text-align: center; }\r\n    hr { width:100%; border:0; height:1px; background-color: #cccccc;}\r\n    </style>\r\n  </head><body>\r\n      <div class=\"text-center no-padding\">\r\n    <h1>Post Office Ltd.</h1>\r\n    <h3>Your Receipt</h3>\r\n  </div>\r\n  <hr/>\r\n    <div class=\"no-padding\">\r\n    <table>\r\n      <tr>\r\n        <td>DATE TO BE ADDED<br>\r\n        Moulton<br>\r\n          Whitlow Lane,<br>Northwich,<br>Cheshire<br>CW9 8QN\r\n        </td>\r\n        <td>\r\n        TP: 33<br>\r\n        FAD: 2314010\r\n      </td>\r\n      </tr>\r\n    </table>\r\n    <hr/>\r\n    <h3 class=\"text-center\">{{ outputData.referenceData.item.itemName }}</h3>\r\n    <hr/>\r\n    <h3>Post Office Banking Services</h3>\r\n    <p>Service: {{ outputData.referenceData.item.itemName }}</p>\r\n    <p>Card Number: {{ outputData.pedResponseX.maskedPan }}</p>\r\n    <p>Amount: {{outputData.inputAmount}}</p>\r\n  </div>\r\n    <div>\r\n      <hr/>\r\n      <div class=\"no-padding\">\r\n      <p>Service: <strong>Cash Deposit</strong></p>\r\n      <hr/>\r\n    </div>\r\n    <hr/>\r\n    <div class=\"no-padding\">\r\n    </div>\r\n  </div>\r\n   <hr/>\r\n  <div class=\"text-center no-padding\">\r\n      <h3>CARDHOLDER RECEIPT</h3><br>\r\n      <p>Please retain for future reference</p>\r\n      <p>This is not a VAT receipt</p>\r\n    </div>\r\n    </body></html>"
                                        },
                                        "stepEvent": "onMatch",
                                        "loadingMessage": "Wait while customer's receipt is printed."
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "complete",
                                        "basket": {
                                          "id": "{{ outputData.referenceData.item.itemName }}"
                                        },
                                        "transaction": {
                                          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
                                          "tokens.receiptDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                          "tokens.settlementDate": "{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                          "tokens.amountRequested": "{{ outputData.inputAmount }}",
                                          "tokens.authorisation_code": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.bankTransactionID": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.cardImpounded": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.clientID": "{{ outputData.referenceData.tokenmask.ClientId }}",
                                          "tokens.currency": "GBP",
                                          "tokens.fee": "0",
                                          "tokens.horizonTransactionID": "TBC",
                                          "tokens.financialTransaction": "TBC",
                                          "tokens.issuerSchemeID": "{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                          "merchantNumber": "TBC",
                                          "routingGateway": "TBC",
                                          "tokens.pan": "{{ outputData.pedResponseX.maskedPan }}",
                                          "tokens.recoveryFlag": "N",
                                          "tokens.responseCode": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.transactionResultCode": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.transactionType": "TBC",
                                          "tokens.agentSlaInfo": "TBC",
                                          "tokens.counterSlaInfo": "TBC",
                                          "tokens.bankResponse": "WILL_COME_FROM_FULFILLMENT",
                                          "tokens.bankValueFlag": "TBC",
                                          "entryType": "banking",
                                          "itemID": "{{ outputData.referenceData.item.itemID }}",
                                          "quantity": "1",
                                          "quantityFixed": "true",
                                          "voidable": "true",
                                          "receiptLine": "1",
                                          "valueInPence": "{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
                                          "value": "{{ outputData.inputAmount }}",
                                          "fulfilmentAction": "deposit"
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "{{ outputData.pedResponseX.responseCode }}",
                            "comparison": "eq",
                            "expected": "01",
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "TransactionDeclinedPrompt"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticRules": [
      {
        "type": "info",
        "viewSize": "large",
        "visual": {
          "view": "notification-info"
        },
        "description": "Refer to the laminate and scan the appropriate barcode",
        "title": "Item is restricted or prohibited",
        "nodes": null
      },
      {
        "type": "info",
        "title": "What's inside?",
        "description": "(For the purpose of safety)"
      },
      {
        "type": "choice",
        "title": "Not restricted",
        "outputData": {
          "dgTitle": "Contents are not restricted",
          "dgDescription": "1. Check that the packaging is adequate\n2. Check a return address is applied",
          "returnTo": "dangerousGoodsDomesticRules"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodPrompt"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Not restricted - 2 or more questions asked",
        "outputData": {
          "dangerousGoodsItemId": "36903",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Customer Not Restricted",
          "dangerousGoodsShortName": "Domestic Not Restricted",
          "returnTo": "dangerousGoodsDomesticRules",
          "dgTitle": "Contents are not restricted",
          "dgDescription": "1. Check that the packaging is adequate\n2. Check a return address is applied"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsNotRestrictedQuestionsAsked"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Restricted",
        "visual": {
          "transition": true
        },
        "outputData": {
          "returnTo": "dangerousGoodsDomesticRules"
        },
        "nodes": [
          {
            "type": "info",
            "title": "What is the restricted content?"
          },
          {
            "type": "choice",
            "title": "Aerosols",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsDomesticAerosols"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Lithium Batteries",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsDomesticBattery"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Nail Varnish",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsDomesticNailVarnish"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Perfume or aftershave",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsDomesticPerfumeAftershave"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Spirits",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsDomesticSpirits"
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "Prohibited",
        "outputData": {
          "dgTitle": "Contents are Prohibited and cannot be sent",
          "dgDescription": "1. Ask if the customer needs a prohibited Item advice slip \n2. Offer the customer a Prohibited and Restricted Items leaflet",
          "dangerousGoodsItemId": "36902",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Customer Prohibited",
          "dangerousGoodsShortName": "Domestic Prohibited"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodPromptProhibited"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Not sure - scan laminate",
        "nodes": [
          {
            "type": "abort"
          }
        ]
      }
    ],
    "dangerousGoodsInternationalRules": [
      {
        "type": "info",
        "viewSize": "large",
        "visual": {
          "view": "notification-info"
        },
        "description": "Refer to the laminate and scan the appropriate barcode",
        "title": "Item is restricted or prohibited",
        "nodes": null
      },
      {
        "type": "info",
        "title": "What's inside?",
        "description": "(For the purpose of safety)"
      },
      {
        "type": "choice",
        "title": "Not restricted",
        "outputData": {
          "returnTo": "dangerousGoodsInternationalRules",
          "dgTitle": "Contents are not restricted",
          "dgDescription": "1. Check that the packaging is adequate\n2. Check a return address is applied"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodPrompt"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Not restricted - 2 or more questions asked",
        "outputData": {
          "dangerousGoodsItemId": "36208",
          "dangerousGoodsLongName": "RMG Dangerous Goods International - Customer Not Restricted",
          "dangerousGoodsShortName": "International Not Restricted",
          "returnTo": "dangerousGoodsInternationalRules",
          "dgTitle": "Contents are not restricted",
          "dgDescription": "1. Check that the packaging is adequate\n2. Check a return address is applied"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsNotRestrictedQuestionsAsked"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Lithium Batteries",
        "visual": {
          "transition": true
        },
        "outputData": {
          "returnTo": "dangerousGoodsInternationalRules"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsInternationalBattery"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Prohibited",
        "outputData": {
          "dangerousGoodsItemId": "36209",
          "dangerousGoodsLongName": "RMG Dangerous Goods International - Customer Prohibited",
          "dangerousGoodsShortName": "International Prohibited",
          "dgTitle": "Item is prohibited and cannot be sent",
          "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items Leaflet"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Proceed without printing",
                "value": "ProceedWithoutPrinting",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Print advice slip",
                "value": "PrintReceipt",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "ProceedWithoutPrinting",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "PrintReceipt",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "fakeReceiptPrinter",
                        "name": "test",
                        "action": "echoSlowResponse",
                        "params": {
                          "timeout": "2000"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Printing advice slip..."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "Not sure - scan laminate",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "abort"
          }
        ]
      }
    ],
    "dangerousGoodsInternationalBattery": [
      {
        "type": "info",
        "title": "Does the battery contain lithium?"
      },
      {
        "type": "choice",
        "title": "Yes",
        "nodes": [
          {
            "type": "info",
            "title": "Are the batteries in a device?"
          },
          {
            "type": "choice",
            "title": "Yes",
            "visual": {
              "transition": false
            },
            "outputData": {
              "dangerousGoodsItemId": "36212",
              "dangerousGoodsLongName": "RMG Dangerous Goods International - Batteries Restricted Inside",
              "dangerousGoodsShortName": "International Batteries Restricted",
              "returnTo": "dangerousGoodsInternationalRules",
              "dgTitle": "Item is restricted and require action",
              "dgDescription": "1. Check the parcel contains no more than 2 batteries in the device\n2. Check a return address is applied\n3. Check the country specific variations as some countries will not accept these items"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Next",
                    "value": "next",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "next",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "No",
            "outputData": {
              "dangerousGoodsItemId": "36211",
              "dangerousGoodsLongName": "RMG Dangerous Goods International - Batteries Prohibited Not Inside",
              "dangerousGoodsShortName": "International Batteries Prohibited",
              "dgTitle": "Item is prohibited and cannot be sent",
              "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items Leaflet"
            },
            "visual": {
              "transition": false
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Proceed without printing",
                    "value": "ProceedWithoutPrinting",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Print advice slip",
                    "value": "PrintReceipt",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "ProceedWithoutPrinting",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "PrintReceipt",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "fakeReceiptPrinter",
                            "name": "test",
                            "action": "echoSlowResponse",
                            "params": {
                              "timeout": "2000"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Printing advice slip..."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "No",
        "outputData": {
          "dangerousGoodsItemId": "36210",
          "dangerousGoodsLongName": "RMG Dangerous Goods International - Batteries Not Restricted",
          "dangerousGoodsShortName": "International Batteries Not Restricted",
          "dgTitle": "This item is not restricted",
          "dgDescription": "This item is not restricted and no action is required.\nEnsure there are a return address is on the item."
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Check another item",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Confirm",
                "value": "next",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "next",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticBattery": [
      {
        "type": "info",
        "title": "Does the battery contain lithium?"
      },
      {
        "type": "choice",
        "title": "Yes",
        "nodes": [
          {
            "type": "info",
            "title": "Are the batteries in a device?"
          },
          {
            "type": "choice",
            "title": "Yes",
            "visual": {
              "transition": false
            },
            "outputData": {
              "dgTitle": "Item is restricted but no label is required",
              "dgDescription": "1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied",
              "dangerousGoodsItemId": "36913",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Lith Batteries Inside Restricted",
              "dangerousGoodsShortName": "Domestic Batteries Inside Restricted"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Check further contents",
                    "value": "Scan",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Next",
                    "value": "next",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "Scan",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "next",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "No",
            "nodes": [
              {
                "type": "info",
                "title": "Are the batteries with the device?"
              },
              {
                "type": "choice",
                "title": "Yes",
                "visual": {
                  "transition": false
                },
                "outputData": {
                  "dgTitle": "Item is restricted but no label is required",
                  "dgDescription": "1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied",
                  "dangerousGoodsItemId": "36914",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Lith Batteries With Restricted",
                  "dangerousGoodsShortName": "Domestic Batteries With Restricted"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Check further contents",
                        "value": "Scan",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Next",
                        "value": "next",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "Scan",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "next",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "choice",
                "title": "No",
                "visual": {
                  "transition": false
                },
                "outputData": {
                  "dangerousGoodsItemId": "36915",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Lith Batteries Prohibited",
                  "dangerousGoodsShortName": "Domestic Batteries Prohibited",
                  "dgTitle": "Item is prohibited and cannot be sent",
                  "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Proceed without printing",
                        "value": "ProceedWithoutPrinting",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Print advice slip",
                        "value": "PrintReceipt",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "ProceedWithoutPrinting",
                        "nodes": [
                          {
                            "type": "abort",
                            "nodes": null
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "PrintReceipt",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "fakeReceiptPrinter",
                                "name": "test",
                                "action": "echoSlowResponse",
                                "params": {
                                  "timeout": "2000"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Printing advice slip..."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "No",
        "outputData": {
          "dangerousGoodsItemId": "36916",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Non Lit Batteries Not Restricted",
          "dangerousGoodsShortName": "Domestic Batteries Not Restricted",
          "dgTitle": "Item is restricted but no label is required",
          "dgDescription": "1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Check further contents",
                "value": "Scan",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Next",
                "value": "next",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "Scan",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "next",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsNotRestrictedQuestionsAsked": [
      {
        "type": "prompt",
        "title": "{{ outputData.dgTitle }}",
        "visual": {
          "actionAlignment": "left"
        },
        "description": "{{ outputData.dgDescription }}",
        "actions": [
          {
            "title": "Back",
            "value": "back",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Check further contents",
            "value": "Scan",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Post item now",
            "value": "next",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.segregation": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "back",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "Scan",
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsReturnToFromBasket"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "next",
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsAddToBasket"
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticAerosols": [
      {
        "type": "info",
        "title": "Is the aerosol for medical or toiletry purposes? "
      },
      {
        "type": "choice",
        "title": "Yes",
        "nodes": [
          {
            "type": "info",
            "title": "Is the aerosol can 500ml or less?"
          },
          {
            "type": "choice",
            "title": "Yes",
            "nodes": [
              {
                "type": "info",
                "title": "How many aerosols are present?"
              },
              {
                "type": "choice",
                "title": "1-2",
                "outputData": {
                  "dgTitle": "Contents are restricted and require action",
                  "dgDescription": "1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied",
                  "dangerousGoodsItemId": "36904",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Aerosols Restricted",
                  "dangerousGoodsShortName": "Aerosols Restricted"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Check further contents",
                        "value": "Scan",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Next",
                        "value": "next",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "Scan",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsReturnToFromBasket"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "next",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "choice",
                "title": "3 or more",
                "outputData": {
                  "dangerousGoodsItemId": "36905",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Aerosols Prohibited",
                  "dangerousGoodsShortName": "Aerosols Prohibited",
                  "dgTitle": "Item is prohibited and cannot be sent",
                  "dgDescription": "1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Proceed without printing",
                        "value": "ProceedWithoutPrinting",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Print advice slip",
                        "value": "PrintReceipt",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "ProceedWithoutPrinting",
                        "nodes": [
                          {
                            "type": "abort",
                            "nodes": null
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "PrintReceipt",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "fakeReceiptPrinter",
                                "name": "test",
                                "action": "echoSlowResponse",
                                "params": {
                                  "timeout": "2000"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Printing advice slip..."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "No",
            "outputData": {
              "dangerousGoodsItemId": "36905",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Aerosols Prohibited",
              "dangerousGoodsShortName": "Aerosols Prohibited",
              "dgTitle": "Item is Prohibited and cannot be sent",
              "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Proceed without printing",
                    "value": "ProceedWithoutPrinting",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Print advice slip",
                    "value": "PrintReceipt",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "ProceedWithoutPrinting",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "PrintReceipt",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "fakeReceiptPrinter",
                            "name": "test",
                            "action": "echoSlowResponse",
                            "params": {
                              "timeout": "2000"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Printing advice slip..."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "No",
        "outputData": {
          "dangerousGoodsItemId": "36905",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Aerosols Prohibited",
          "dangerousGoodsShortName": "Aerosols Prohibited",
          "dgTitle": "Item is prohibited and cannot be sent",
          "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Proceed without printing",
                "value": "ProceedWithoutPrinting",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Print advice slip",
                "value": "PrintReceipt",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "ProceedWithoutPrinting",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "PrintReceipt",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "fakeReceiptPrinter",
                        "name": "test",
                        "action": "echoSlowResponse",
                        "params": {
                          "timeout": "2000"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Printing advice slip..."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticNailVarnish": [
      {
        "type": "info",
        "title": "Does the parcel contain Nail varnish remover?"
      },
      {
        "type": "choice",
        "title": "Yes",
        "outputData": {
          "dangerousGoodsItemId": "36910",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Nail Varnish Prohibited",
          "dangerousGoodsShortName": "Nail Varnish Prohibited",
          "dgTitle": "Item is prohibited and cannot be sent",
          "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Proceed without printing",
                "value": "ProceedWithoutPrinting",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Print advice slip",
                "value": "PrintReceipt",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "ProceedWithoutPrinting",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "PrintReceipt",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "fakeReceiptPrinter",
                        "name": "test",
                        "action": "echoSlowResponse",
                        "params": {
                          "timeout": "2000"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Printing advice slip..."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "No",
        "nodes": [
          {
            "type": "info",
            "title": "How many bottles of Nail varnish are in there?"
          },
          {
            "type": "choice",
            "title": "4 or less",
            "outputData": {
              "dangerousGoodsItemId": "36909",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Nail Varnish Restricted",
              "dangerousGoodsShortName": "Nail Varnish Restricted",
              "dgTitle": "Contents are restricted and require action",
              "dgDescription": "1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied"
            },
            "visual": {
              "transition": false
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Check further contents",
                    "value": "Scan",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Next",
                    "value": "next",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "Scan",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "next",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "5 or more",
            "visual": {
              "transition": false
            },
            "outputData": {
              "dangerousGoodsItemId": "36910",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Nail Varnish Prohibited",
              "dangerousGoodsShortName": "Nail Varnish Prohibited",
              "dgTitle": "Item is prohibited and cannot be sent",
              "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Proceed without printing",
                    "value": "ProceedWithoutPrinting",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Print advice slip",
                    "value": "PrintReceipt",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "ProceedWithoutPrinting",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "PrintReceipt",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "fakeReceiptPrinter",
                            "name": "test",
                            "action": "echoSlowResponse",
                            "params": {
                              "timeout": "2000"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Printing advice slip..."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticPerfumeAftershave": [
      {
        "type": "info",
        "title": "How many bottles of perfume or aftershave are in the parcel?"
      },
      {
        "type": "choice",
        "title": "4 or less",
        "nodes": [
          {
            "type": "info",
            "title": "Is the item(s) in its original packaging?"
          },
          {
            "type": "choice",
            "title": "Yes",
            "nodes": [
              {
                "type": "info",
                "title": "What is the volume of the individual items?"
              },
              {
                "type": "choice",
                "title": "No more than 150ml",
                "outputData": {
                  "dangerousGoodsItemId": "36911",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Perfume Restricted",
                  "dangerousGoodsShortName": "Perfume Restricted",
                  "dgTitle": "Item are restricted and require action",
                  "dgDescription": "1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Check further contents",
                        "value": "Scan",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Next",
                        "value": "next",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "Scan",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "next",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "choice",
                "title": "More than 150ml",
                "outputData": {
                  "dangerousGoodsItemId": "36912",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Perfume Prohibited",
                  "dangerousGoodsShortName": "Perfume Prohibited",
                  "dgTitle": "Item is prohibited and cannot be sent",
                  "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Proceed without printing",
                        "value": "ProceedWithoutPrinting",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Print advice slip",
                        "value": "PrintReceipt",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "ProceedWithoutPrinting",
                        "nodes": [
                          {
                            "type": "abort",
                            "nodes": null
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "PrintReceipt",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "fakeReceiptPrinter",
                                "name": "test",
                                "action": "echoSlowResponse",
                                "params": {
                                  "timeout": "2000"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Printing advice slip..."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "No",
            "outputData": {
              "dangerousGoodsItemId": "36912",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Perfume Prohibited",
              "dangerousGoodsShortName": "Perfume Prohibited",
              "dgTitle": "Item is prohibited and cannot be sent",
              "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Proceed without printing",
                    "value": "ProceedWithoutPrinting",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Print advice slip",
                    "value": "PrintReceipt",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "ProceedWithoutPrinting",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "PrintReceipt",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "fakeReceiptPrinter",
                            "name": "test",
                            "action": "echoSlowResponse",
                            "params": {
                              "timeout": "2000"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Printing advice slip..."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "5 or more",
        "outputData": {
          "dangerousGoodsItemId": "36912",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Perfume Prohibited",
          "dangerousGoodsShortName": "Perfume Prohibited",
          "dgTitle": "Item is prohibited and cannot be sent",
          "dgDescription": "1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Proceed without printing",
                "value": "ProceedWithoutPrinting",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Print advice slip",
                "value": "PrintReceipt",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "ProceedWithoutPrinting",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "PrintReceipt",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "enablers": [
                      {
                        "id": "fakeReceiptPrinter",
                        "name": "test",
                        "action": "echoSlowResponse",
                        "params": {
                          "timeout": "2000"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Printing advice slip..."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsDomesticSpirits": [
      {
        "type": "info",
        "title": "Is the alcoholic drink a spirit, EG whiskey, vodka or gin?"
      },
      {
        "type": "choice",
        "title": "Yes",
        "nodes": [
          {
            "type": "info",
            "title": "Alcohol content 70% ABV or more?"
          },
          {
            "type": "choice",
            "title": "Yes",
            "visual": {
              "transition": false
            },
            "outputData": {
              "dangerousGoodsItemId": "36908",
              "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Alcohol Prohibited",
              "dangerousGoodsShortName": "Alcohol Prohibited",
              "dgTitle": "Item is prohibited and cannot be sent",
              "dgDescription": "1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet"
            },
            "nodes": [
              {
                "type": "prompt",
                "title": "{{ outputData.dgTitle }}",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "{{ outputData.dgDescription }}",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Proceed without printing",
                    "value": "ProceedWithoutPrinting",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Print advice slip",
                    "value": "PrintReceipt",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.segregation": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 3
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "ProceedWithoutPrinting",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "dangerousGoodsAddToBasket"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.segregation }}",
                    "expected": "PrintReceipt",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "enablers": [
                          {
                            "id": "fakeReceiptPrinter",
                            "name": "test",
                            "action": "echoSlowResponse",
                            "params": {
                              "timeout": "2000"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Printing advice slip..."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "choice",
            "title": "No",
            "nodes": [
              {
                "type": "info",
                "title": "Is each bottle 1 litre or less?"
              },
              {
                "type": "choice",
                "title": "Yes",
                "nodes": [
                  {
                    "type": "info",
                    "title": "How many bottles are present?"
                  },
                  {
                    "type": "choice",
                    "title": "1 or 2",
                    "visual": {
                      "transition": false
                    },
                    "outputData": {
                      "dangerousGoodsItemId": "36906",
                      "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Alcohol Restricted",
                      "dangerousGoodsShortName": "Alcohol Restricted",
                      "dgTitle": "Item is Restricted but no label is required",
                      "dgDescription": "1. Check that the packaging is adequate.\n2. Check a return address is applied"
                    },
                    "nodes": [
                      {
                        "type": "prompt",
                        "title": "{{ outputData.dgTitle }}",
                        "visual": {
                          "actionAlignment": "left"
                        },
                        "description": "{{ outputData.dgDescription }}",
                        "actions": [
                          {
                            "title": "Back",
                            "value": "back",
                            "visual": {
                              "view": "secondary"
                            }
                          },
                          {
                            "title": "Check further contents",
                            "value": "Scan",
                            "visual": {
                              "view": "secondary"
                            }
                          },
                          {
                            "title": "Next",
                            "value": "next",
                            "visual": {
                              "view": "primary"
                            }
                          }
                        ],
                        "outputData": {
                          "actions.segregation": "{{ inputData.action }}"
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "back",
                            "nodes": [
                              {
                                "type": "undo",
                                "numberOfSteps": 3
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "Scan",
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "next",
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "choice",
                    "title": "3 or more",
                    "visual": {
                      "transition": false
                    },
                    "outputData": {
                      "dangerousGoodsItemId": "36908",
                      "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Alcohol Prohibited",
                      "dangerousGoodsShortName": "Alcohol Prohibited",
                      "dgTitle": "Item is prohibited and cannot be sent",
                      "dgDescription": "1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet"
                    },
                    "nodes": [
                      {
                        "type": "prompt",
                        "title": "{{ outputData.dgTitle }}",
                        "visual": {
                          "actionAlignment": "left"
                        },
                        "description": "{{ outputData.dgDescription }}",
                        "actions": [
                          {
                            "title": "Back",
                            "value": "back",
                            "visual": {
                              "view": "secondary"
                            }
                          },
                          {
                            "title": "Proceed without printing",
                            "value": "ProceedWithoutPrinting",
                            "visual": {
                              "view": "secondary"
                            }
                          },
                          {
                            "title": "Print advice slip",
                            "value": "PrintReceipt",
                            "visual": {
                              "view": "primary"
                            }
                          }
                        ],
                        "outputData": {
                          "actions.segregation": "{{ inputData.action }}"
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "back",
                            "nodes": [
                              {
                                "type": "undo",
                                "numberOfSteps": 3
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "ProceedWithoutPrinting",
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.segregation }}",
                            "expected": "PrintReceipt",
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "1",
                                "comparison": "eq",
                                "expected": "1",
                                "enablers": [
                                  {
                                    "id": "fakeReceiptPrinter",
                                    "name": "test",
                                    "action": "echoSlowResponse",
                                    "params": {
                                      "timeout": "2000"
                                    },
                                    "stepEvent": "onMatch",
                                    "loadingMessage": "Printing advice slip..."
                                  }
                                ],
                                "nodes": [
                                  {
                                    "type": "subJourney",
                                    "name": "dangerousGoodsAddToBasket"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "choice",
                "title": "More than 1 litre",
                "visual": {
                  "transition": false
                },
                "outputData": {
                  "dangerousGoodsItemId": "36908",
                  "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Alcohol Prohibited",
                  "dangerousGoodsShortName": "Alcohol Prohibited",
                  "dgTitle": "Item is prohibited and cannot be sent",
                  "dgDescription": "1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet"
                },
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "{{ outputData.dgTitle }}",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "{{ outputData.dgDescription }}",
                    "actions": [
                      {
                        "title": "Back",
                        "value": "back",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Proceed without printing",
                        "value": "ProceedWithoutPrinting",
                        "visual": {
                          "view": "secondary"
                        }
                      },
                      {
                        "title": "Print advice slip",
                        "value": "PrintReceipt",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "outputData": {
                      "actions.segregation": "{{ inputData.action }}"
                    },
                    "nodes": [
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "back",
                        "nodes": [
                          {
                            "type": "undo",
                            "numberOfSteps": 3
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "ProceedWithoutPrinting",
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "dangerousGoodsAddToBasket"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "comparison": "eq",
                        "given": "{{ outputData.actions.segregation }}",
                        "expected": "PrintReceipt",
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "1",
                            "comparison": "eq",
                            "expected": "1",
                            "enablers": [
                              {
                                "id": "fakeReceiptPrinter",
                                "name": "test",
                                "action": "echoSlowResponse",
                                "params": {
                                  "timeout": "2000"
                                },
                                "stepEvent": "onMatch",
                                "loadingMessage": "Printing advice slip..."
                              }
                            ],
                            "nodes": [
                              {
                                "type": "subJourney",
                                "name": "dangerousGoodsAddToBasket"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "choice",
        "title": "No",
        "outputData": {
          "dangerousGoodsItemId": "36907",
          "dangerousGoodsLongName": "RMG Dangerous Goods Inland - Alcohol Not Restricted",
          "dangerousGoodsShortName": "Alcohol Not Restricted",
          "dgTitle": "Item is not restricted",
          "dgDescription": "Check the packaging is adequate\nCheck a return address is applied"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "{{ outputData.dgTitle }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.dgDescription }}",
            "actions": [
              {
                "title": "Back",
                "value": "back",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Check further contents",
                "value": "Scan",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "next",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.segregation": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "back",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "Scan",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsReturnToFromBasket"
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.segregation }}",
                "expected": "next",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsAddToBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.dangerousGoodsShortName }}",
          "Service": "{{ outputData.dangerousGoodsLongName }}"
        },
        "transaction": {
          "basketItems": "",
          "entryType": "mails",
          "itemID": "{{ outputData.dangerousGoodsItemId }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0"
        }
      }
    ],
    "dangerousGoodsReturnToFromBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.dangerousGoodsShortName }}",
          "Service": "{{ outputData.dangerousGoodsLongName }}"
        },
        "transaction": {
          "basketItems": "",
          "entryType": "mails",
          "itemID": "{{ outputData.dangerousGoodsItemId }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0"
        },
        "returnTo": "{{ outputData.returnTo }}"
      }
    ],
    "dangerousGoodPrompt": [
      {
        "type": "prompt",
        "title": "{{ outputData.dgTitle }}",
        "visual": {
          "actionAlignment": "left"
        },
        "description": "{{ outputData.dgDescription }}",
        "actions": [
          {
            "title": "Back",
            "value": "back",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Check further contents",
            "value": "Scan",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Post item now",
            "value": "next",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.segregation": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "back",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "Scan",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3,
                "returnTo": "{{ outputData.returnTo }}"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "next",
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          }
        ]
      }
    ],
    "dangerousGoodsSubJourney": [
      {
        "type": "info",
        "title": "Select area for item being screened"
      },
      {
        "type": "choice",
        "title": "UK",
        "visual": {
          "transition": true
        },
        "outputData": {
          "returnTo": "dangerousGoodsDomesticRules"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticRules"
          }
        ]
      },
      {
        "type": "choice",
        "title": "International",
        "visual": {
          "transition": true
        },
        "outputData": {
          "returnTo": "dangerousGoodsInternationalRules"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsInternationalRules"
          }
        ]
      }
    ],
    "dangerousGoodsDomesticRestricted": [
      {
        "type": "info",
        "title": "What is the restricted content?"
      },
      {
        "type": "choice",
        "title": "Aerosols",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticAerosols"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Lithium Batteries",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticBattery"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Nail Varnish",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticNailVarnish"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Perfume or aftershave",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticPerfumeAftershave"
          }
        ]
      },
      {
        "type": "choice",
        "title": "Spirits",
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "dangerousGoodsDomesticSpirits"
          }
        ]
      }
    ],
    "dangerousGoodPromptProhibited": [
      {
        "type": "prompt",
        "title": "{{ outputData.dgTitle }}",
        "visual": {
          "actionAlignment": "left"
        },
        "description": "{{ outputData.dgDescription }}",
        "actions": [
          {
            "title": "Back",
            "value": "back",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Proceed without printing",
            "value": "WithoutPrint",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Print advice slip",
            "value": "Print",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.segregation": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "back",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "WithoutPrint",
            "nodes": [
              {
                "type": "subJourney",
                "name": "dangerousGoodsAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "Print",
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "comparison": "eq",
                "expected": "1",
                "enablers": [
                  {
                    "id": "fakeReceiptPrinter",
                    "name": "test",
                    "action": "echoSlowResponse",
                    "params": {
                      "timeout": "2000"
                    },
                    "stepEvent": "onMatch",
                    "loadingMessage": "Printing advice slip..."
                  }
                ],
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "dangerousGoodsAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "estimatedAddToBasket": [
      {
        "type": "choice",
        "title": "Add to basket",
        "nodes": [
          {
            "type": "complete",
            "basket": {
              "id": "Estimated Delivery Date journey",
              "Service": "Estimated Delivery Date"
            },
            "transaction": {
              "tokens.City": "{{ outputData.destinationCity }}",
              "tokens.Postcode": "{{ outputData.destinationPostalCode }}",
              "tokens.Country": "{{ outputData.destinationCountryName }}",
              "tokens.Date": "{{ FORMAT_DATE(\"{{ outputData.serviceGuaranteeDate }}\",\"DD/MM/YYYY\") }}",
              "entryType": "mails",
              "itemID": "{{ outputData.EDDItemId }}",
              "quantity": "1",
              "basketItems": "",
              "receiptLine": "1",
              "voidable": "true",
              "value": "{{outputData.amount}}"
            },
            "nodes": null
          }
        ]
      }
    ],
    "Item31351": [
      {
        "type": "info",
        "title": "PAN",
        "description": "9826935100676"
      },
      {
        "type": "info",
        "title": "Client Name",
        "description": "Offline Banking"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "Banking - Cheque Deposit"
      },
      {
        "type": "input",
        "title": "Sort Code",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "sortCode": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Sort code is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6}$",
              "message": "Branch sort code must be 6 digits in length."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^(?!(401255)$)",
              "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Account number",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "accountNumber": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Account number is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{8}$",
                  "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                }
              }
            ],
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "expected": "1",
                "comparison": "eq",
                "outputData": {
                  "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                },
                "enablers": [
                  {
                    "name": "banking",
                    "id": "accountValidation",
                    "action": "AccountValidation",
                    "stepEvent": "onMatch",
                    "params": {
                      "accountNumber": "{{ outputData.accountNumber }}",
                      "sortCode": "{{ outputData.sortCode }}"
                    },
                    "retriable": true,
                    "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                    "loadingMessage": "Validating account details"
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                    "expected": "UnknownSortCode",
                    "comparison": "eq",
                    "outputData": {
                      "loqateError.title": "Transaction Declined",
                      "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "LoqateAbortError"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                    "expected": "InvalidAccountNumber",
                    "comparison": "eq",
                    "outputData": {
                      "loqateError.title": "Transaction Declined",
                      "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "LoqateAbortError"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.branch }}",
                    "comparison": "matchregexp",
                    "expected": "Cahoot",
                    "outputData": {
                      "productNo": "4374",
                      "bankName": "Cahoot",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Cahoot."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "ADAM & COMPANY PLC|adam & company plc|Adam & Company Plc",
                    "outputData": {
                      "productNo": "48914",
                      "receiptNotice": "In the event of a query on this deposit <br>please contact Adam24 on 0131 278 3777"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "ALLIED IRISH BANK \\(GB\\)|Allied Irish Bank \\(GB\\)|Allied Irish Bank \\(Gb\\)|allied irish bank \\(gb\\)",
                    "outputData": {
                      "productNo": "46722",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact AIB (NI)."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "AIB GROUP \\(UK\\) PLC \\(TRADING NAME FIRST T|Aib Group \\(UK\\) Plc \\(Trading Name First T|Aib Group \\(UK\\) plc \\(Trading Name First T|aib group \\(UK\\) plc \\(trading name first t",
                    "outputData": {
                      "productNo": "46721",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact AIB (NI)."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "Bank of Scotland",
                    "outputData": {
                      "productNo": "43168",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Bank of Scotland on<br>0345 721 3141."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "Barclays|BARCLAYS|Woolwich|WOOLWICH",
                    "outputData": {
                      "productNo": "4371",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Barclays."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "Bank of Ireland|BANK OF IRELAND",
                    "outputData": {
                      "productNo": "5978",
                      "bankName": "Bank of Ireland",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Bank of Ireland."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "CAF BANK LIMITED",
                    "outputData": {
                      "productNo": "35446",
                      "bankName": "CAF",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact cafbank@cafonline.org <br>or ring 03000 123 456."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "CO-OPERATIVE|Co-Operative|co-operative",
                    "nodes": [
                      {
                        "type": "prompt",
                        "title": "Confirm bank selection",
                        "visual": {
                          "actionAlignment": "left"
                        },
                        "description": "Please confirm if the Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is for Smile or The Co-Op Bank.",
                        "actions": [
                          {
                            "title": "Co-Op Bank",
                            "value": "co-op",
                            "visual": {
                              "view": "secondary"
                            }
                          },
                          {
                            "title": "Smile Bank",
                            "value": "smile",
                            "visual": {
                              "view": "secondary"
                            }
                          }
                        ],
                        "outputData": {
                          "bankSelection": "{{ inputData.action }}"
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "given": "co-op",
                            "expected": "{{ outputData.bankSelection }}",
                            "comparison": "eq",
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "1",
                                "expected": "1",
                                "comparison": "eq",
                                "outputData": {
                                  "productNo": "4377",
                                  "receiptNotice": "In the event of a query on this deposit<br>please contact the Co-op."
                                },
                                "nodes": [
                                  {
                                    "type": "subJourney",
                                    "name": "Item31351-PostBankSelection"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "given": "smile",
                            "expected": "{{ outputData.bankSelection }}",
                            "comparison": "eq",
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "1",
                                "expected": "1",
                                "comparison": "eq",
                                "outputData": {
                                  "productNo": "4386",
                                  "receiptNotice": "In the event of a query on this deposit<br>please contact Smile"
                                },
                                "nodes": [
                                  {
                                    "type": "subJourney",
                                    "name": "Item31351-PostBankSelection"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "COUTTS & CO|Coutts & Co|coutts & co",
                    "outputData": {
                      "productNo": "48913",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Coutts24 on 020 7957 2424."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.branch }}",
                    "comparison": "matchregexp",
                    "expected": "FIRST DIRECT|First Direct|first direct|FirstDirect|Firstdirect|firstdirect",
                    "outputData": {
                      "productNo": "4380",
                      "receiptNotice": "If you have any questions about the<br>cheques you've paid in,<br>please contact first direct on<br>03 456 00 100."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "Halifax|HALIFAX",
                    "outputData": {
                      "productNo": "31789",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Halifax on 0345 720 3040"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "LLOYDS|Lloyds|lloyds",
                    "outputData": {
                      "productNo": "4383",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Lloyds Bank on <br>0345 300 0000."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "METRO BANK PLC|Metro Bank plc",
                    "outputData": {
                      "productNo": "41693",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Metro Bank on <br>0345 08 08 508."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "NATIONAL WESTMINSTER BANK|National Westminster Bank|national westminster bank",
                    "outputData": {
                      "productNo": "38877",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact NatWest"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "ROYAL BANK OF SCOTLAND|Royal Bank of Scotland|royal bank of scotland",
                    "outputData": {
                      "productNo": "38875",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact RBS."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "SANTANDER UK PLC|Santander Uk Plc|Santander Uk plc|Santander UK plc|santander uk plc",
                    "outputData": {
                      "productNo": "45263",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Santander"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "THINK MONEY LIMITED|Think Money Limited|think money limited",
                    "outputData": {
                      "productNo": "40160",
                      "receiptNotice": "In the event of a query on this deposit<br>please refer to ThinkMoney via<br>www.thinkmoney.co.uk/help-support"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "TSB|tsb",
                    "outputData": {
                      "productNo": "37114",
                      "receiptNotice": "In the event of a query on this deposit<br>please visit www.TSB.co.uk<br>for your local TSB branch contact details."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "ULSTER|Ulster|ulster",
                    "outputData": {
                      "productNo": "38878",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Ulster Bank."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "HSBC|hsbc",
                    "outputData": {
                      "productNo": "36804",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact HSBC on <br>0345 740 4404"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "CLYDESDALE|Clydesdale|clydesdale",
                    "outputData": {
                      "productNo": "6166",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Clydesdale."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.bankAccountDetails.bank }}",
                    "comparison": "matchregexp",
                    "expected": "YORKSHIRE|Yorkshire|yorkshire",
                    "outputData": {
                      "productNo": "37633",
                      "receiptNotice": "In the event of a query on this deposit<br>please contact Yorkshire Bank."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "Item31351-PostBankSelection"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "1",
                    "comparison": "eq",
                    "expected": "1",
                    "outputData": {
                      "loqateError.title": "Transaction Declined",
                      "loqateError.description": "The Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is not valid for Personal Banking.\n\nClick Ok to end the transaction."
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "LoqateAbortError"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item31351-PostBankSelection": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.product }}",
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "product",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "ProdNo": "{{ outputData.productNo }}"
            },
            "loadingMessage": "Retrieving bank details..."
          },
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "9826935100676"
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "prompt",
            "title": "Confirm bank selection",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Continue",
                "value": "continue",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "action": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "given": "continue",
                "expected": "{{ outputData.action }}",
                "comparison": "eq",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "enablers": [
                      {
                        "id": "printCustomerReceipt",
                        "name": "printer",
                        "action": "print",
                        "params": {
                          "value": "<html> <head> <style> * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; } </style> </head> <body> <div class=\"text-center no-padding\"> <h1>Post Office Ltd.</h1> <h3>www.postoffice.co.uk</h3> </div> <hr /> <div class=no-padding> <table> <tr> <td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>{{ appData.device.branchName }}<br>{{ appData.device.branchAddress }}<br>{{ appData.device.branchPostcode }}</td> <td>TP: {{ appData.device.nodeID }}<br>FAD: {{ appData.device.branchID }}</td> </tr> </table> <hr /> <p>Session Id: TBC</p> <p>Txn Id: TBC</p> <p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p> <p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p> <p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p> <p>Ref: {{ outputData.barcodeInfo.Rref }}</p> <p>Amount: 0.00 Cash</p> <p>Product No: {{ outputData.productNo }}</p> <hr /> <p>Sort Code: {{ outputData.sortCode }}</p> <p>Account Number: {{ outputData.accountNumber }}</p> </div> <hr /> <div class=\"text-center\"> <p>Please retain for future reference.</p> <hr /> <p>{{ outputData.receiptNotice }}</p> </div> <hr /> </div> <div class=\"text-center\"> <p>This is not a VAT receipt.</p> </div> <hr /> </body> </html>"
                        },
                        "stepEvent": "onMatch",
                        "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                      }
                    ],
                    "nodes": [
                      {
                        "type": "complete",
                        "basket": {
                          "id": "{{ outputData.product.longName }}"
                        },
                        "transaction": {
                          "itemID": "{{ outputData.productNo }}",
                          "entryType": "banking",
                          "quantity": "1",
                          "receiptLine": "1",
                          "valueInPence": "0",
                          "value": "0",
                          "voidable": "true",
                          "quantityFixed": "true",
                          "tokens.PN": "{{ outputData.productNo }}",
                          "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                          "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                          "tokens.APTransactionReference": "0001",
                          "tokens.SortCode": "{{ outputData.sortCode }}",
                          "tokens.versionNumber": "1",
                          "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                          "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                          "tokens.paymentCode": "1",
                          "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_VER": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_RESULT_RCODE": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_VER": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SVC": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_VID": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TTYP": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TREF": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_CTR": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TDATE": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_FAD": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_STAFF": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SCD": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_ACC": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_ACC": "TBC",
                          "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_SCD": "TBC",
                          "tokens.BNM": "TBC",
                          "tokens.BRN": "TBC",
                          "tokens.AD1": "TBC",
                          "tokens.TWN": "TBC",
                          "tokens.PCD": "TBC",
                          "tokens.DD": "TBC",
                          "tokens.DDI": "TBC",
                          "tokens.SmileCheck": "TBC",
                          "tokens.X_DATA_SetProduct_PN": "TBC",
                          "tokens.X_DATA_SetProduct_FP": "TBC",
                          "tokens.X_DATA_SetProduct_LN": "TBC",
                          "tokens.X_DATA_SetProduct_MnV": "TBC",
                          "tokens.X_DATA_SetProduct_MV": "TBC",
                          "tokens.X_DATA_SetProduct_MxV": "TBC",
                          "tokens.X_DATA_SetProduct_RN": "TBC",
                          "tokens.X_DATA_SetProduct_RP": "TBC",
                          "tokens.X_DATA_SetProduct_SN": "TBC",
                          "tokens.ValidationDeclined": "TBC",
                          "tokens.DeclineAbort": "TBC",
                          "tokens.Timeout": "TBC",
                          "tokens.ValidationFailed": "TBC",
                          "tokens.ValidationFailedAbort": "TBC",
                          "tokens.ManualLookup": "TBC",
                          "tokens.ConfirmBank": "TBC",
                          "tokens.Receipt_Text2": "TBC",
                          "tokens.X_DATA_PN": "{{ outputData.productNo }}"
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "condition",
                "given": "cancel",
                "expected": "{{ outputData.action }}",
                "comparison": "eq",
                "nodes": [
                  {
                    "type": "abort"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Item35383": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.product }}",
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "product",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "ProdNo": "35383"
            },
            "loadingMessage": "Retrieving bank details..."
          },
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "9826935100981"
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "PAN",
            "description": "{{ outputData.barcodeInfo.Rref }}"
          },
          {
            "type": "info",
            "title": "Client name",
            "description": "Offline Banking"
          },
          {
            "type": "info",
            "title": "Description",
            "description": "Banking - Cheque Deposit"
          },
          {
            "type": "input",
            "title": "Sort code",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "outputData": {
              "sortCode": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Sort code is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{6}$",
                  "message": "Branch sort code must be 6 digits in length."
                }
              }
            ],
            "nodes": [
              {
                "type": "input",
                "title": "Account number",
                "inputMask": "alphanumeric",
                "description": "Enter",
                "outputData": {
                  "accountNumber": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Account number is required."
                    }
                  },
                  {
                    "field": "inputValue",
                    "format": {
                      "match": "^[0-9]{8}$",
                      "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "condition",
                    "given": "1",
                    "expected": "1",
                    "comparison": "eq",
                    "outputData": {
                      "bankAccountDetails": "{{ inputData.enablers.accountValidation }}"
                    },
                    "enablers": [
                      {
                        "name": "banking",
                        "id": "accountValidation",
                        "action": "AccountValidation",
                        "stepEvent": "onMatch",
                        "params": {
                          "accountNumber": "{{ outputData.accountNumber }}",
                          "sortCode": "{{ outputData.sortCode }}"
                        },
                        "retriable": true,
                        "errorMessage": "It has not been possible to validate the account number and sort code. Please try again.",
                        "loadingMessage": "Validating account details"
                      }
                    ],
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "UnknownSortCode",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.statusInformation }}",
                        "expected": "InvalidAccountNumber",
                        "comparison": "eq",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.bankAccountDetails.bank }}",
                        "comparison": "matchregexp",
                        "expected": "Northern Bank Ltd|NORTHERN BANK LTD|Danske Bank|NORTHERN BANK LIMITED T/A DANSKE BANK",
                        "outputData": {
                          "productNo": "48914",
                          "receiptNotice": "In the event of a query on this deposit <br>please contact Adam24 on 0131 278 3777"
                        },
                        "nodes": [
                          {
                            "type": "prompt",
                            "title": "Confirm bank selection",
                            "visual": {
                              "actionAlignment": "left"
                            },
                            "description": "Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                            "actions": [
                              {
                                "title": "Cancel",
                                "value": "cancel",
                                "visual": {
                                  "view": "secondary"
                                }
                              },
                              {
                                "title": "Continue",
                                "value": "continue",
                                "visual": {
                                  "view": "primary"
                                }
                              }
                            ],
                            "outputData": {
                              "action": "{{ inputData.action }}"
                            },
                            "nodes": [
                              {
                                "type": "condition",
                                "given": "continue",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "condition",
                                    "given": "1",
                                    "expected": "1",
                                    "comparison": "eq",
                                    "enablers": [
                                      {
                                        "id": "printCustomerReceipt",
                                        "name": "printer",
                                        "action": "print",
                                        "params": {
                                          "value": "<html><head><style>* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }</style></head><body><div class=\"text-center no-padding\"><h1>Post Office Ltd.</h1><h3>www.postoffice.co.uk</h3></div>          <hr /><div class=no-padding><table><tr><td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>{{ appData.device.branchName }}<br>{{ appData.device.branchAddress }}<br>{{ appData.device.branchPostcode }}</td><td>TP: {{ appData.device.nodeID }}<br>FAD: {{ appData.device.branchID }}</td></tr></table><hr /><p>Session Id: TBC</p><p>Txn Id: TBC</p><p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p><p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p><p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p><p>Ref: {{ outputData.barcodeInfo.Rref }}</p><p>Amount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }} Cash</p><hr /><p>Sort Code: {{ outputData.sortCode }}</p><p>Account Number: {{ outputData.accountNumber }}</p></div><hr /><div class=\"text-center\"><p>Please retain for future reference.</p><hr /><p>{{ outputData.receiptNotice }}</p></div><hr /></div><div class=\"text-center\"><p>This is not a VAT receipt.</p></div><hr /> </body></html>"
                                        },
                                        "stepEvent": "onMatch",
                                        "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                                      }
                                    ],
                                    "nodes": [
                                      {
                                        "type": "complete",
                                        "basket": {
                                          "id": "{{ outputData.product.longName }}"
                                        },
                                        "transaction": {
                                          "itemID": "35383",
                                          "entryType": "banking",
                                          "quantity": "1",
                                          "receiptLine": "1",
                                          "valueInPence": "0",
                                          "value": "0",
                                          "voidable": "true",
                                          "quantityFixed": "true",
                                          "tokens.X_DATA_PN": "35383",
                                          "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                                          "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                                          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                                          "tokens.APTransactionReference": "0001",
                                          "tokens.SortCode": "{{ outputData.sortCode }}",
                                          "tokens.versionNumber": "1",
                                          "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                                          "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                          "tokens.paymentCode": "1",
                                          "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                                          "tokens.Txn_Time": "{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}"
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "condition",
                                "given": "cancel",
                                "expected": "{{ outputData.action }}",
                                "comparison": "eq",
                                "nodes": [
                                  {
                                    "type": "abort"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "1",
                        "comparison": "eq",
                        "expected": "1",
                        "outputData": {
                          "loqateError.title": "Transaction Declined",
                          "loqateError.description": "The Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is not valid for Personal Banking.\n\nClick Ok to end the transaction."
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "LoqateAbortError"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Danske_ChangeGiving": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "bankShortName": "Danske Bank"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510156110",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "prompt",
            "title": "Action Required",
            "visual": {
              "actionAlignment": "right"
            },
            "description": "Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
            "actions": [
              {
                "title": "Ok",
                "value": "ok"
              }
            ],
            "nodes": [
              {
                "type": "prompt",
                "title": "Information",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Accept only notes for this transaction.",
                "actions": [
                  {
                    "title": "Cancel",
                    "value": "cancel",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Continue",
                    "value": "continue",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "continue",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "info",
                        "title": "Bank name",
                        "description": "Danske Bank"
                      },
                      {
                        "type": "info",
                        "title": "PAN",
                        "description": "{{ outputData.barcodeInfo.Rref }}"
                      },
                      {
                        "type": "info",
                        "title": "Client name",
                        "description": "{{ outputData.barcodeInfo.ClientAccName }}"
                      },
                      {
                        "type": "info",
                        "title": "Description",
                        "description": "{{ outputData.barcodeInfo.longName }}"
                      },
                      {
                        "type": "input",
                        "title": "Sort code",
                        "inputMask": "alphanumeric",
                        "description": "Enter",
                        "outputData": {
                          "sortCode": "{{ inputData.inputValue }}"
                        },
                        "inputValidation": [
                          {
                            "field": "inputValue",
                            "required": {
                              "message": "Sort code is required."
                            }
                          },
                          {
                            "field": "inputValue",
                            "format": {
                              "match": "^[0-9]{6}$",
                              "message": "Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                            }
                          }
                        ],
                        "nodes": [
                          {
                            "type": "input",
                            "title": "Account number",
                            "inputMask": "alphanumeric",
                            "description": "Enter",
                            "outputData": {
                              "accountNumber": "{{ inputData.inputValue }}"
                            },
                            "inputValidation": [
                              {
                                "field": "inputValue",
                                "required": {
                                  "message": "Account number is required"
                                }
                              },
                              {
                                "field": "inputValue",
                                "format": {
                                  "match": "^[0-9]{8}$",
                                  "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                }
                              }
                            ],
                            "nodes": [
                              {
                                "type": "prompt",
                                "title": "Confirm Bank selection",
                                "visual": {
                                  "actionAlignment": "left"
                                },
                                "description": "Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                "actions": [
                                  {
                                    "title": "Cancel",
                                    "value": "cancel",
                                    "visual": {
                                      "view": "secondary"
                                    }
                                  },
                                  {
                                    "title": "Continue",
                                    "value": "continue",
                                    "visual": {
                                      "view": "primary"
                                    }
                                  }
                                ],
                                "outputData": {
                                  "action": "{{ inputData.action }}"
                                },
                                "nodes": [
                                  {
                                    "type": "condition",
                                    "given": "continue",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Enter total change required",
                                        "inputMask": "currency",
                                        "outputData": {
                                          "amount": "{{ inputData.inputValue }}"
                                        },
                                        "defaultValues": {
                                          "inputValue": "0.00"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "numericality": {
                                              "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                              "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "condition",
                                            "given": "1",
                                            "expected": "1",
                                            "comparison": "eq",
                                            "outputData": {
                                              "additionalItems": "{{ inputData.enablers.createdAdditionalItems }}"
                                            },
                                            "enablers": [
                                              {
                                                "id": "printCustomerReceipt",
                                                "name": "printer",
                                                "action": "print",
                                                "params": {
                                                  "value": "<html><head><style>* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }</style></head><body> <div class=\"text-center no-padding\"> <h1>Post Office Ltd.</h1> <h3>www.postoffice.co.uk</h3> </div> <hr /> <div class=\"no-padding\"> <table> <tr> <td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} <br>{{ appData.device.branchName }} <br>{{ appData.device.branchAddress }} <br>{{ appData.device.branchPostcode }} </td> <td>TP: {{ appData.device.nodeID }} <br>FAD: {{ appData.device.branchID }} </td> </tr> </table> <hr /> <p>Session Id: TBC</p> <p>Txn Id: TBC</p> <p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p> <p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p> <p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p> <p>Ref: {{ outputData.barcodeInfo.Rref }}</p> <p>Amount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash</p> <p>Product No: {{ outputData.barcodeInfo.ProdNo }}</p> </div><hr /> </div> <div class=\"text-center\"> <p>This is not a VAT receipt.</p> </div> <hr /> </body></html>"
                                                },
                                                "stepEvent": "onMatch",
                                                "loadingMessage": "Printing change giving receipt."
                                              },
                                              {
                                                "id": "createdAdditionalItems",
                                                "name": "payloadTransform",
                                                "action": "objectsToArray",
                                                "params": {
                                                  "1": {
                                                    "itemID": "45311",
                                                    "quantity": "1",
                                                    "receiptLine": "1",
                                                    "value": "{{ outputData.amount }}"
                                                  }
                                                },
                                                "stepEvent": "onMatch"
                                              }
                                            ],
                                            "nodes": [
                                              {
                                                "type": "complete",
                                                "basket": {
                                                  "id": "{{ outputData.barcodeInfo.longName }}"
                                                },
                                                "transaction": {
                                                  "itemID": "{{ outputData.barcodeInfo.ProdNo }}",
                                                  "entryType": "banking",
                                                  "quantity": "1",
                                                  "receiptLine": "1",
                                                  "valueInPence": "0",
                                                  "value": "0",
                                                  "voidable": "true",
                                                  "quantityFixed": "true",
                                                  "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                                                  "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                                                  "tokens.APTransactionReference": "0001",
                                                  "tokens.versionNumber": "1",
                                                  "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                                                  "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                                  "tokens.paymentCode": "1",
                                                  "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                                                  "tokens.SortCode": "{{ outputData.sortCode }}",
                                                  "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                                                  "tokens.CHNG": "{{ outputData.amount }}",
                                                  "tokens.PCA": "TBC",
                                                  "tokens.FADCODE": "{{ appData.device.branchID }}",
                                                  "tokens.BRANCHNAME": "{{ appData.device.branchName }}",
                                                  "tokens.DATE": "{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                  "tokens.TIME": "{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                  "additionalItems": "{{ outputData.additionalItems }}"
                                                }
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "condition",
                                    "title": "Return",
                                    "given": "cancel",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "abort"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "cancel",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "HSBC_ChangeGiving": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "bankShortName": "HSBC"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510156101",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "prompt",
            "title": "Action Required",
            "visual": {
              "actionAlignment": "right"
            },
            "description": "Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
            "actions": [
              {
                "title": "Ok",
                "value": "ok"
              }
            ],
            "nodes": [
              {
                "type": "prompt",
                "title": "Information",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Accept only notes for this transaction.",
                "actions": [
                  {
                    "title": "Cancel",
                    "value": "cancel",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Continue",
                    "value": "continue",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "continue",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "info",
                        "title": "Bank name",
                        "description": "HSBC"
                      },
                      {
                        "type": "info",
                        "title": "PAN",
                        "description": "{{ outputData.barcodeInfo.Rref }}"
                      },
                      {
                        "type": "info",
                        "title": "Client name",
                        "description": "{{ outputData.barcodeInfo.ClientAccName }}"
                      },
                      {
                        "type": "info",
                        "title": "Description",
                        "description": "{{ outputData.barcodeInfo.longName }}"
                      },
                      {
                        "type": "input",
                        "title": "Sort code",
                        "inputMask": "alphanumeric",
                        "description": "Enter",
                        "outputData": {
                          "sortCode": "{{ inputData.inputValue }}"
                        },
                        "inputValidation": [
                          {
                            "field": "inputValue",
                            "required": {
                              "message": "Sort code is required."
                            }
                          },
                          {
                            "field": "inputValue",
                            "format": {
                              "match": "^[0-9]{6}$",
                              "message": "Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                            }
                          }
                        ],
                        "nodes": [
                          {
                            "type": "input",
                            "title": "Account number",
                            "inputMask": "alphanumeric",
                            "description": "Enter",
                            "outputData": {
                              "accountNumber": "{{ inputData.inputValue }}"
                            },
                            "inputValidation": [
                              {
                                "field": "inputValue",
                                "required": {
                                  "message": "Account number is required"
                                }
                              },
                              {
                                "field": "inputValue",
                                "format": {
                                  "match": "^[0-9]{8}$",
                                  "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                }
                              }
                            ],
                            "nodes": [
                              {
                                "type": "prompt",
                                "title": "Confirm Bank selection",
                                "visual": {
                                  "actionAlignment": "left"
                                },
                                "description": "Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                "actions": [
                                  {
                                    "title": "Cancel",
                                    "value": "cancel",
                                    "visual": {
                                      "view": "secondary"
                                    }
                                  },
                                  {
                                    "title": "Continue",
                                    "value": "continue",
                                    "visual": {
                                      "view": "primary"
                                    }
                                  }
                                ],
                                "outputData": {
                                  "action": "{{ inputData.action }}"
                                },
                                "nodes": [
                                  {
                                    "type": "condition",
                                    "given": "continue",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Enter total change required",
                                        "inputMask": "currency",
                                        "outputData": {
                                          "amount": "{{ inputData.inputValue }}"
                                        },
                                        "defaultValues": {
                                          "inputValue": "0.00"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "numericality": {
                                              "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                              "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "condition",
                                            "given": "1",
                                            "expected": "1",
                                            "comparison": "eq",
                                            "outputData": {
                                              "additionalItems": "{{ inputData.enablers.createdAdditionalItems }}"
                                            },
                                            "enablers": [
                                              {
                                                "id": "printCustomerReceipt",
                                                "name": "printer",
                                                "action": "print",
                                                "params": {
                                                  "value": "<html><head><style>* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }</style></head><body> <div class=\"text-center no-padding\"> <h1>Post Office Ltd.</h1> <h3>www.postoffice.co.uk</h3> </div> <hr /> <div class=\"no-padding\"> <table> <tr> <td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} <br>{{ appData.device.branchName }} <br>{{ appData.device.branchAddress }} <br>{{ appData.device.branchPostcode }} </td> <td>TP: {{ appData.device.nodeID }} <br>FAD: {{ appData.device.branchID }} </td> </tr> </table> <hr /> <p>Session Id: TBC</p> <p>Txn Id: TBC</p> <p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p> <p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p> <p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p> <p>Ref: {{ outputData.barcodeInfo.Rref }}</p> <p>Amount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash</p> <p>Product No: {{ outputData.barcodeInfo.ProdNo }}</p> </div><hr /> </div> <div class=\"text-center\"> <p>This is not a VAT receipt.</p> </div> <hr /> </body></html>"
                                                },
                                                "stepEvent": "onMatch",
                                                "loadingMessage": "Printing change giving receipt."
                                              },
                                              {
                                                "id": "createdAdditionalItems",
                                                "name": "payloadTransform",
                                                "action": "objectsToArray",
                                                "params": {
                                                  "1": {
                                                    "itemID": "43482",
                                                    "quantity": "1",
                                                    "receiptLine": "1",
                                                    "value": "{{ outputData.amount }}"
                                                  }
                                                },
                                                "stepEvent": "onMatch"
                                              }
                                            ],
                                            "nodes": [
                                              {
                                                "type": "complete",
                                                "basket": {
                                                  "id": "{{ outputData.barcodeInfo.longName }}"
                                                },
                                                "transaction": {
                                                  "itemID": "{{ outputData.barcodeInfo.ProdNo }}",
                                                  "entryType": "banking",
                                                  "quantity": "1",
                                                  "receiptLine": "1",
                                                  "valueInPence": "0",
                                                  "value": "0",
                                                  "voidable": "true",
                                                  "quantityFixed": "true",
                                                  "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                                                  "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                                                  "tokens.APTransactionReference": "0001",
                                                  "tokens.versionNumber": "1",
                                                  "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                                                  "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                                  "tokens.paymentCode": "1",
                                                  "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                                                  "tokens.SortCode": "{{ outputData.sortCode }}",
                                                  "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                                                  "tokens.CHNG": "{{ outputData.amount }}",
                                                  "tokens.PCA": "TBC",
                                                  "tokens.FADCODE": "{{ appData.device.branchID }}",
                                                  "tokens.BRANCHNAME": "{{ appData.device.branchName }}",
                                                  "tokens.DATE": "{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                  "tokens.TIME": "{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                  "additionalItems": "{{ outputData.additionalItems }}"
                                                }
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "condition",
                                    "title": "Return",
                                    "given": "cancel",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "abort"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "cancel",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Lloyds_ChangeGiving": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "bankShortName": "Lloyds Bank"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "982693510156112",
              "shouldGetItems": 1
            },
            "loadingMessage": "Retrieving bank details..."
          }
        ],
        "nodes": [
          {
            "type": "prompt",
            "title": "Action Required",
            "visual": {
              "actionAlignment": "right"
            },
            "description": "Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
            "actions": [
              {
                "title": "Ok",
                "value": "ok"
              }
            ],
            "nodes": [
              {
                "type": "prompt",
                "title": "Information",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Accept only notes for this transaction.",
                "actions": [
                  {
                    "title": "Cancel",
                    "value": "cancel",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Continue",
                    "value": "continue",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "continue",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "info",
                        "title": "Bank name",
                        "description": "Lloyds Bank"
                      },
                      {
                        "type": "info",
                        "title": "PAN",
                        "description": "{{ outputData.barcodeInfo.Rref }}"
                      },
                      {
                        "type": "info",
                        "title": "Client name",
                        "description": "{{ outputData.barcodeInfo.ClientAccName }}"
                      },
                      {
                        "type": "info",
                        "title": "Description",
                        "description": "{{ outputData.barcodeInfo.longName }}"
                      },
                      {
                        "type": "input",
                        "title": "Enter sort code",
                        "inputMask": "alphanumeric",
                        "description": "Enter",
                        "outputData": {
                          "sortCode": "{{ inputData.inputValue }}"
                        },
                        "inputValidation": [
                          {
                            "field": "inputValue",
                            "required": {
                              "message": "Sort code is required."
                            }
                          },
                          {
                            "field": "inputValue",
                            "format": {
                              "match": "^[0-9]{6}$",
                              "message": "Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                            }
                          }
                        ],
                        "nodes": [
                          {
                            "type": "input",
                            "title": "Account number",
                            "inputMask": "alphanumeric",
                            "description": "Enter",
                            "outputData": {
                              "accountNumber": "{{ inputData.inputValue }}"
                            },
                            "inputValidation": [
                              {
                                "field": "inputValue",
                                "required": {
                                  "message": "Account number is required"
                                }
                              },
                              {
                                "field": "inputValue",
                                "format": {
                                  "match": "^[0-9]{8}$",
                                  "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                }
                              }
                            ],
                            "nodes": [
                              {
                                "type": "prompt",
                                "title": "Confirm Bank selection",
                                "visual": {
                                  "actionAlignment": "left"
                                },
                                "description": "Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                "actions": [
                                  {
                                    "title": "Cancel",
                                    "value": "cancel",
                                    "visual": {
                                      "view": "secondary"
                                    }
                                  },
                                  {
                                    "title": "Continue",
                                    "value": "continue",
                                    "visual": {
                                      "view": "primary"
                                    }
                                  }
                                ],
                                "outputData": {
                                  "action": "{{ inputData.action }}"
                                },
                                "nodes": [
                                  {
                                    "type": "condition",
                                    "given": "continue",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "input",
                                        "title": "Enter total change required",
                                        "inputMask": "currency",
                                        "outputData": {
                                          "amount": "{{ inputData.inputValue }}"
                                        },
                                        "defaultValues": {
                                          "inputValue": "0.00"
                                        },
                                        "inputValidation": [
                                          {
                                            "field": "inputValue",
                                            "numericality": {
                                              "lte": "{{ outputData.barcodeInfo.maximumValue }}",
                                              "gte": "{{ outputData.barcodeInfo.minimumValue }}",
                                              "message": "The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                            }
                                          }
                                        ],
                                        "nodes": [
                                          {
                                            "type": "condition",
                                            "given": "1",
                                            "expected": "1",
                                            "comparison": "eq",
                                            "outputData": {
                                              "additionalItems": "{{ inputData.enablers.createdAdditionalItems }}"
                                            },
                                            "enablers": [
                                              {
                                                "id": "printCustomerReceipt",
                                                "name": "printer",
                                                "action": "print",
                                                "params": {
                                                  "value": "<html><head><style>* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }</style></head><body> <div class=\"text-center no-padding\"> <h1>Post Office Ltd.</h1> <h3>www.postoffice.co.uk</h3> </div> <hr /> <div class=\"no-padding\"> <table> <tr> <td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} <br>{{ appData.device.branchName }} <br>{{ appData.device.branchAddress }} <br>{{ appData.device.branchPostcode }} </td> <td>TP: {{ appData.device.nodeID }} <br>FAD: {{ appData.device.branchID }} </td> </tr> </table> <hr /> <p>Session Id: TBC</p> <p>Txn Id: TBC</p> <p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p> <p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p> <p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p> <p>Ref: {{ outputData.barcodeInfo.Rref }}</p> <p>Amount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash</p>  <p>Product No: {{ outputData.barcodeInfo.ProdNo }}</p> </div><hr /> </div> <div class=\"text-center\"> <p>This is not a VAT receipt.</p> </div> <hr /> </body></html>"
                                                },
                                                "stepEvent": "onMatch",
                                                "loadingMessage": "Printing change giving receipt."
                                              },
                                              {
                                                "id": "createdAdditionalItems",
                                                "name": "payloadTransform",
                                                "action": "objectsToArray",
                                                "params": {
                                                  "1": {
                                                    "itemID": "45619",
                                                    "quantity": "1",
                                                    "receiptLine": "1",
                                                    "value": "{{ outputData.amount }}"
                                                  }
                                                },
                                                "stepEvent": "onMatch"
                                              }
                                            ],
                                            "nodes": [
                                              {
                                                "type": "complete",
                                                "basket": {
                                                  "id": "{{ outputData.barcodeInfo.longName }}"
                                                },
                                                "transaction": {
                                                  "itemID": "{{ outputData.barcodeInfo.ProdNo }}",
                                                  "entryType": "banking",
                                                  "quantity": "1",
                                                  "receiptLine": "1",
                                                  "valueInPence": "0",
                                                  "value": "0",
                                                  "voidable": "true",
                                                  "quantityFixed": "true",
                                                  "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                                                  "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                                                  "tokens.APTransactionReference": "0001",
                                                  "tokens.versionNumber": "1",
                                                  "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                                                  "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                                                  "tokens.paymentCode": "1",
                                                  "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                                                  "tokens.SortCode": "{{ outputData.sortCode }}",
                                                  "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                                                  "tokens.CHNG": "{{ outputData.amount }}",
                                                  "tokens.PCA": "TBC",
                                                  "tokens.FADCODE": "{{ appData.device.branchID }}",
                                                  "tokens.BRANCHNAME": "{{ appData.device.branchName }}",
                                                  "tokens.DATE": "{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                  "tokens.TIME": "{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                  "additionalItems": "{{ outputData.additionalItems }}"
                                                }
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "condition",
                                    "title": "Return",
                                    "given": "cancel",
                                    "expected": "{{ outputData.action }}",
                                    "comparison": "eq",
                                    "nodes": [
                                      {
                                        "type": "abort"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "cancel",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "TransactionDeclinedPrompt": [
      {
        "type": "prompt",
        "title": "Transaction Declined",
        "visual": {
          "actionAlignment": "center"
        },
        "description": "MSG99620: The transaction has been cancelled",
        "actions": [
          {
            "title": "Continue",
            "value": "continue",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort"
          }
        ]
      }
    ],
    "ReturnsAcceptance": [
      {
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.TD }}",
            "comparison": "matchregexp",
            "expected": "(^DA|FM|FN|FY|HU|HX|HZ|JK|JM|JN|JP|JQ|MU|NT|QK|QL|QM|QN|QQ|QX|QY|QZ|ST|VX|VZ|XC|XE|XF|YE|ZD|ZF|ZL|ZR|ZS|ZT|ZY|ZZ).{9}(GB)$",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceProductLookup1d"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.TD }}",
            "comparison": "matchregexp",
            "expected": "(^DA|FM|FN|FY|HU|HX|HZ|JK|JM|JN|JP|JQ|MU|NT|QK|QL|QM|QN|QQ|QX|QY|QZ|ST|VX|VZ|XC|XE|XF|YE|ZD|ZF|ZL|ZR|ZS|ZT|ZY|ZZ).{9}(GB)",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceProductLookup2d"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceErrorMessage"
              }
            ]
          }
        ]
      }
    ],
    "returnsAcceptanceProductLookup1d": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "getProduct",
            "name": "RMProductLookup",
            "action": "getProduct",
            "params": {
              "parsedBarcode": "{{ outputData }}"
            },
            "loadingMessage": "Fetching product information",
            "stepEvent": "onMatch"
          }
        ],
        "outputData": {
          "returnsMaxWeight": "{{ inputData.enablers.getProduct.Area.MaxWeight }}",
          "product": "{{ inputData.enablers.getProduct }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "returnsAcceptanceWeight1d"
          }
        ]
      }
    ],
    "returnsAcceptanceProductLookup2d": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "id": "getProduct",
            "name": "RMProductLookup",
            "action": "getProduct",
            "params": {
              "parsedBarcode": "{{ outputData }}"
            },
            "loadingMessage": "Fetching product information",
            "stepEvent": "onMatch"
          }
        ],
        "outputData": {
          "returnsMaxWeight": "{{ inputData.enablers.getProduct.Area.MaxWeight }}",
          "product": "{{ inputData.enablers.getProduct }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "returnsAcceptanceWeight2d"
          }
        ]
      }
    ],
    "returnsAcceptanceWeight1d": [
      {
        "type": "input",
        "title": "Weight",
        "inputMask": "numeric",
        "unit": {
          "position": "right",
          "value": "g"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.returnsMaxWeight }}",
              "message": "Weight is more than the maximum of {{ outputData.returnsMaxWeight }}g, for this service."
            }
          }
        ],
        "outputData": {
          "weight": "{{ inputData.inputValue }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "returnsAcceptanceService1d"
          }
        ]
      }
    ],
    "returnsAcceptanceWeight2d": [
      {
        "type": "input",
        "title": "Weight",
        "inputMask": "numeric",
        "unit": {
          "position": "right",
          "value": "g"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "numericality": {
              "lte": "{{ outputData.returnsMaxWeight }}",
              "message": "Weight is more than the maximum of {{ outputData.returnsMaxWeight }}g, for this service."
            }
          }
        ],
        "outputData": {
          "weight": "{{ inputData.inputValue }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "returnsAcceptanceAskAddress2d"
          }
        ]
      }
    ],
    "returnsAcceptanceService1d": [
      {
        "type": "options",
        "title": "What is the service?",
        "data": [
          {
            "title": "Tracked 24 Return",
            "value": "TSN"
          },
          {
            "title": "Tracked 48 Return",
            "value": "TSS"
          }
        ],
        "outputData": {
          "serviceValue": "{{ inputData.selected.value }}",
          "serviceName": "{{ inputData.selected.title }}",
          "barcodeInfo.Format": "09",
          "barcodeInfo.Country": "GBR"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "returnsAcceptanceAskAddress1d"
          }
        ]
      }
    ],
    "returnsAcceptanceAskAddress1d": [
      {
        "type": "info",
        "title": "Tracking reference number",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.UPUTrackingNumber }}"
      },
      {
        "type": "inputGroup",
        "title": "",
        "groupNodes": [
          {
            "type": "input",
            "title": "Destination",
            "description": "Address",
            "outputData": {
              "BuildingName": "{{ inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Address is required"
                }
              }
            ]
          },
          {
            "type": "input",
            "title": "",
            "description": "Postcode",
            "outputData": {
              "DestinationPostCode": "{{ inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Postcode is required"
                }
              }
            ]
          }
        ],
        "outputData": {
          "BuildingName": "{{ inputData.inputValue.BuildingName }}",
          "DestinationPostCode": "{{ inputData.inputValue.DestinationPostCode }}"
        },
        "nodes": [
          {
            "type": "choice",
            "title": "Next",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceSegregationPrompt"
              }
            ]
          }
        ]
      }
    ],
    "returnsAcceptanceAskAddress2d": [
      {
        "type": "condition",
        "given": "{{ outputData.DestinationPostCode }}",
        "expected": "^\\s*$",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.BuildingName }}",
            "expected": "^\\s*$",
            "comparison": "matchregexp",
            "nodes": [
              {
                "type": "info",
                "title": "Tracking reference number",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.UPUTrackingNumber }}"
              },
              {
                "type": "inputGroup",
                "title": "",
                "groupNodes": [
                  {
                    "type": "input",
                    "title": "Destination",
                    "description": "Address",
                    "outputData": {
                      "BuildingName": "{{ inputValue }}"
                    },
                    "inputValidation": [
                      {
                        "field": "inputValue",
                        "required": {
                          "message": "Address is required"
                        }
                      }
                    ]
                  },
                  {
                    "type": "input",
                    "title": "",
                    "description": "Postcode",
                    "outputData": {
                      "DestinationPostCode": "{{ inputValue }}"
                    },
                    "inputValidation": [
                      {
                      "field": "inputValue",
                      "format": {
                        "match": "^(([A-Z][A-Z]{0,1}[0-9][0-9A-Z]{0,1})|GIR)\\s{0,2}[0-9][ABD-HJLNP-UW-Z]{2}$",
                        "message": "The postcode format is incorrect"
                      }
                    }
                    ]
                  }
                ],
                "outputData": {
                  "BuildingName": "{{ inputData.inputValue.BuildingName }}",
                  "DestinationPostCode": "{{ inputData.inputValue.DestinationPostCode }}"
                },
                "nodes": [
                  {
                    "type": "choice",
                    "title": "Next",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "returnsAcceptanceSegregationPrompt"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "Tracking reference number",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.UPUTrackingNumber }}"
              },
              {
                "type": "info",
                "title": "Destination",
                "description": "{{ outputData.BuildingName }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "input",
                "title": "",
                "description": "Postcode",
                "outputData": {
                  "DestinationPostCode": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Postcode is required"
                    }
                  }
                ]
              },
              {
                "type": "choice",
                "title": "OK",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "returnsAcceptanceSegregationPrompt"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.BuildingName }}",
        "expected": "^\\s*$",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Tracking reference number",
            "description": "{{ outputData.UPUTrackingNumber }}"
          },
          {
            "type": "input",
            "title": "Destination",
            "description": "Address",
            "outputData": {
              "BuildingName": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Address is required"
                }
              }
            ]
          },
          {
            "type": "info",
            "title": "",
            "visual": {
              "view": "disabled-input"
            },
            "description": "{{ outputData.DestinationPostCode }}"
          },
          {
            "type": "choice",
            "title": "OK",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceSegregationPrompt"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "nodes": [
          {
            "type": "info",
            "title": "Tracking reference number",
            "visual": {
              "view": "disabled-input"
            },
            "description": "{{ outputData.UPUTrackingNumber }}"
          },
          {
            "type": "info",
            "title": "Destination",
            "description": "{{ outputData.BuildingName }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "info",
            "title": "",
            "description": "{{ outputData.DestinationPostCode }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "choice",
            "title": "OK",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceSegregationPrompt"
              }
            ]
          }
        ]
      }
    ],
    "returnsAcceptanceErrorMessage": [
      {
        "type": "prompt",
        "title": "Barcode not recognised",
        "description": "Please scan or manually enter different barcode or cancel.",
        "visual": {
          "actionAlignment": "center"
        },
        "actions": [
          {
            "title": "Ok",
            "value": "ok",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.undo": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.undo }}",
            "expected": "ok",
            "nodes": [
              {
                "type": "abort",
                "returnTo": "returnsAcceptanceInputBarcode"
              }
            ]
          }
        ]
      }
    ],
    "returnsAcceptanceSegregationPrompt": [
      {
        "type": "condition",
        "given": "{{ outputData.clientSrvCode }}",
        "expected": "TSN",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 24 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 2
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "returnsAcceptanceAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.clientSrvCode }}",
        "expected": "TSS",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 48 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 2
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "returnsAcceptanceAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.serviceValue }}",
        "expected": "TSN",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 24 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 2
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "returnsAcceptanceAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.serviceValue }}",
        "expected": "TSS",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 48 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 2
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "returnsAcceptanceAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "returnsAcceptanceAddToBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.UniqueIdentifier }}",
          "Service": "{{ outputData.product.Service.DisplayName }}"
        },
        "transaction": {
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0",
          "tokens.TandTCarrier": "{{ outputData.product.TrackAndTrace.TandTCarrier }}",
          "tokens.TandTSvcID": "{{ outputData.product.TrackAndTrace.TandTSvcID }}",
          "tokens.TandTType": "{{ outputData.product.TrackAndTrace.TandTType }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.entryID": "1",
          "tokens.weight": "{{ outputData.weight }}",
          "tokens.barcode": "{{ outputData.TD }}",
          "tokens.destinationAddress": "{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
          "tokens.firstAddressLine": "{{ outputData.BuildingName }}",
          "tokens.country": "{{ outputData.DestinationCountry }}",
          "tokens.tokenIdentifier": "n/a",
          "tokens.versionNumber": "n/a",
          "tokens.customerRefNumber": "n/a",
          "tokens.clientAccountNo": "n/a",
          "tokens.clientSrvCode": "n/a",
          "tokens.receiptReference": "n/a",
          "tokens.APTransactionReference": "n/a",
          "tokens.paymentCode": "n/a"
        }
      }
    ],
    "OLPAccept": [
      {
        "type": "prompt",
        "title": "Is the Post-by date today or later?\nPlease check the following",
        "visual": {
          "actionAlignment": "left",
          "transition": true
        },
        "description": "The date in the bottom right of the label must be today or later.\n\nThe item must be no bigger than the format stated in the top right of the label",
        "actions": [
          {
            "title": "Cancel",
            "value": "cancel",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Continue",
            "value": "continue",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.continue": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.continue }}",
            "expected": "cancel",
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.continue }}",
            "expected": "continue",
            "nodes": [
              {
                "type": "subJourney",
                "name": "OLPAcceptLastDespatchCheck"
              }
            ]
          }
        ]
      }
    ],
    "OLPAcceptLastDespatchCheck": [
      {
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "outputData": {
          "afterLastCollection": "{{ inputData.enablers.lastDespatch.afterLastDispatch }}"
        },
        "enablers": [
          {
            "name": "despatch",
            "id": "lastDespatch",
            "action": "afterLastDespatch",
            "stepEvent": "onMatch",
            "params": {
              "branchID": "{{ appData.device.branchID }}",
              "counterID": "{{ appData.device.nodeID }}",
              "clerkID": "2",
              "carrierID": "RM"
            },
            "loadingMessage": "Waiting for despatch info..."
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.afterLastCollection }}",
            "expected": "true",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "Royal Mail final collection has passed",
                "visual": {
                  "view": "notification-info"
                },
                "description": "Advise the customer that the mail item will not be despatched until the following working day."
              },
              {
                "type": "subJourney",
                "name": "OLPWeight"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.afterLastCollection }}",
            "expected": "false",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "OLPWeight"
              }
            ]
          }
        ]
      }
    ],
    "OLPWeight": [
      {
        "type": "input",
        "title": "Weight",
        "inputMask": "numeric",
        "unit": {
          "position": "right",
          "value": "g"
        },
        "enablers": [
          {
            "id": "getProduct",
            "name": "RMProductLookup",
            "action": "getProduct",
            "params": {
              "parsedBarcode": "{{ outputData }}"
            },
            "loadingMessage": "Fetching product information",
            "stepEvent": "onComplete"
          }
        ],
        "outputData": {
          "weight": "{{ inputData.inputValue }}",
          "returnsMaxWeight": "{{ inputData.enablers.getProduct.Area.MaxWeight }}",
          "product": "{{ inputData.enablers.getProduct }}"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.weight }}",
            "comparison": "lt",
            "expected": "{{ outputData.product.TariffBand.WeightFrom }}",
            "nodes": [
              {
                "type": "prompt",
                "title": "Item has been overpaid",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Item weight is less than the weight on the label so the customer may have overpaid. Confirm if the customer wants to proceed or cancel this transaction.",
                "actions": [
                  {
                    "title": "Cancel",
                    "value": "cancel",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Proceed",
                    "value": "proceed",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.proceed": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.proceed }}",
                    "expected": "cancel",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.proceed }}",
                    "expected": "proceed",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "OLPAskAddress"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.weight }}",
            "comparison": "gt",
            "expected": "{{ outputData.product.TariffBand.WeightTo }}",
            "nodes": [
              {
                "type": "prompt",
                "title": "Item has been underpaid",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Item weight is greater than the weight on the label, customer has not paid enough postage and so the item cannot be accepted\n\nCustomer should contact Royal Mail Click & Drop to cancel the label and generate a new label for the correct weight or proceed and pay full postage.",
                "actions": [
                  {
                    "title": "Proceed and pay postage",
                    "value": "proceed",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "End transaction",
                    "value": "end",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.proceed": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.proceed }}",
                    "expected": "proceed",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.proceed }}",
                    "expected": "end",
                    "nodes": [
                      {
                        "type": "abort",
                        "nodes": null
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "comparison": "eq",
            "expected": "1",
            "nodes": [
              {
                "type": "subJourney",
                "name": "OLPAskAddress"
              }
            ]
          }
        ]
      }
    ],
    "OLPAskAddress": [
      {
        "type": "condition",
        "given": "{{ outputData.DestinationPostCode }}",
        "expected": "^\\s*$",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.BuildingName }}",
            "expected": "^\\s*$",
            "comparison": "matchregexp",
            "nodes": [
              {
                "type": "info",
                "title": "Service information",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.product.Service.DisplayName }}"
              },
              {
                "type": "info",
                "title": "Tracking reference number",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.UPUTrackingNumber }}"
              },
              {
                "type": "inputGroup",
                "title": "",
                "groupNodes": [
                  {
                    "type": "input",
                    "title": "Destination",
                    "description": "Address",
                    "outputData": {
                      "BuildingName": "{{ inputValue }}"
                    },
                    "inputValidation": [
                      {
                        "field": "inputValue",
                        "required": {
                          "message": "Address is required"
                        }
                      }
                    ]
                  },
                  {
                    "type": "input",
                    "title": "",
                    "description": "Postcode",
                    "outputData": {
                      "DestinationPostCode": "{{ inputValue }}"
                    },
                    "inputValidation": [
                      {
                        "field": "inputValue",
                        "required": {
                          "message": "Postcode is required"
                        }
                      }
                    ]
                  }
                ],
                "outputData": {
                  "BuildingName": "{{ inputData.inputValue.BuildingName }}",
                  "DestinationPostCode": "{{ inputData.inputValue.DestinationPostCode }}"
                },
                "nodes": [
                  {
                    "type": "choice",
                    "title": "OK",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                        "comparison": "eq",
                        "expected": "S",
                        "outputData": {
                          "promptMessage": "Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "OLPSegregationPrompt"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                        "comparison": "eq",
                        "expected": "1",
                        "outputData": {
                          "promptTitle": "Segregate Online Postage Item",
                          "promptMessage": "Place item in the 1st Class Parcel bag"
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "OLPSegregationPrompt"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                        "comparison": "eq",
                        "expected": "2",
                        "outputData": {
                          "promptTitle": "Segregate Online Postage Item",
                          "promptMessage": "Place item in the 2nd Class Parcel bag"
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "OLPSegregationPrompt"
                          }
                        ]
                      },
                      {
                        "type": "condition",
                        "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                        "comparison": "eq",
                        "expected": "L",
                        "outputData": {
                          "promptTitle": "Segregate Online Postage Item",
                          "promptMessage": "Place item in the Letters bag"
                        },
                        "nodes": [
                          {
                            "type": "subJourney",
                            "name": "OLPSegregationPrompt"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "Service information",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.product.Service.DisplayName }}"
              },
              {
                "type": "info",
                "title": "Tracking reference number",
                "visual": {
                  "view": "disabled-input"
                },
                "description": "{{ outputData.UPUTrackingNumber }}"
              },
              {
                "type": "info",
                "title": "Destination",
                "description": "{{ outputData.BuildingName }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "input",
                "title": "",
                "description": "Postcode",
                "outputData": {
                  "DestinationPostCode": "{{ inputData.inputValue }}"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "required": {
                      "message": "Postcode is required"
                    }
                  }
                ]
              },
              {
                "type": "choice",
                "title": "OK",
                "nodes": [
                  {
                    "type": "condition",
                    "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                    "comparison": "eq",
                    "expected": "S",
                    "outputData": {
                      "promptMessage": "Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "OLPSegregationPrompt"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                    "comparison": "eq",
                    "expected": "1",
                    "outputData": {
                      "promptTitle": "Segregate Online Postage Item",
                      "promptMessage": "Place item in the 1st Class Parcel bag"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "OLPSegregationPrompt"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                    "comparison": "eq",
                    "expected": "2",
                    "outputData": {
                      "promptTitle": "Segregate Online Postage Item",
                      "promptMessage": "Place item in the 2nd Class Parcel bag"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "OLPSegregationPrompt"
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                    "comparison": "eq",
                    "expected": "L",
                    "outputData": {
                      "promptTitle": "Segregate Online Postage Item",
                      "promptMessage": "Place item in the Letters bag"
                    },
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "OLPSegregationPrompt"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.BuildingName }}",
        "expected": "^\\s*$",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Service information",
            "visual": {
              "view": "disabled-input"
            },
            "description": "{{ outputData.product.Service.DisplayName }}"
          },
          {
            "type": "info",
            "title": "Tracking reference number",
            "visual": {
              "view": "disabled-input"
            },
            "description": "{{ outputData.UPUTrackingNumber }}"
          },
          {
            "type": "input",
            "title": "Destination",
            "description": "Address",
            "outputData": {
              "BuildingName": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Address is required"
                }
              }
            ]
          },
          {
            "type": "info",
            "title": "",
            "visual": {
              "view": "disabled-input"
            },
            "description": "{{ outputData.DestinationPostCode }}"
          },
          {
            "type": "choice",
            "title": "OK",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "S",
                "outputData": {
                  "promptMessage": "Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "1",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the 1st Class Parcel bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "2",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the 2nd Class Parcel bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "L",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the Letters bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "nodes": [
          {
            "type": "info",
            "title": "Service information",
            "description": "{{ outputData.product.Service.DisplayName }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "info",
            "title": "Tracking reference number",
            "description": "{{ outputData.UPUTrackingNumber }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "info",
            "title": "Destination",
            "description": "{{ outputData.BuildingName }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "info",
            "title": "",
            "description": "{{ outputData.DestinationPostCode }}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "choice",
            "title": "OK",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "S",
                "outputData": {
                  "promptMessage": "Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "1",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the 1st Class Parcel bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "2",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the 2nd Class Parcel bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "{{ outputData.product.PostageMethod.SegregationCode }}",
                "comparison": "eq",
                "expected": "L",
                "outputData": {
                  "promptTitle": "Segregate Online Postage Item",
                  "promptMessage": "Place item in the Letters bag"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPSegregationPrompt"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "OLPAddToBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.UPUTrackingNumber }}",
          "Service": "{{ outputData.product.Service.DisplayName }}"
        },
        "transaction": {
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0",
          "tokens.TandTCarrier": "{{ outputData.product.TrackAndTrace.TandTCarrier }}",
          "tokens.TandTSvcID": "{{ outputData.product.TrackAndTrace.TandTSvcID }}",
          "tokens.TandTType": "{{ outputData.product.TrackAndTrace.TandTType }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.entryID": "1",
          "tokens.weight": "{{ outputData.weight }}",
          "tokens.barcode": "{{ outputData.TD }}",
          "tokens.destinationAddress": "{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
          "tokens.firstAddressLine": "{{ outputData.BuildingName }}",
          "tokens.country": "{{ outputData.DestinationCountry }}",
          "tokens.Dest": "{{ outputData.product.Area.SourceAreaId }}",
          "tokens.afterLastDespatch": "{{ outputData.afterLastCollection }}",
          "tokens.carrier": "{{ outputData.product.Service.CarrierId }}",
          "tokens.destination": "{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
          "tokens.destinationAreaId": "{{ outputData.product.Area.DestinationAreaId }}",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.serviceId": "{{ outputData.product.Service.ServiceId }}",
          "tokens.prePaidLine": "1",
          "tokens.tokenIdentifier": "n/a",
          "tokens.versionNumber": "n/a",
          "tokens.customerRefNumber": "n/a",
          "tokens.clientAccountNo": "n/a",
          "tokens.clientSrvCode": "n/a",
          "tokens.receiptReference": "n/a",
          "tokens.APTransactionReference": "n/a",
          "tokens.paymentCode": "n/a"
        }
      }
    ],
    "OLPSegregationPrompt": [
      {
        "type": "prompt",
        "title": "Segregate Online Postage Item",
        "visual": {
          "actionAlignment": "left",
          "transition": true
        },
        "description": "{{ outputData.promptMessage }}",
        "actions": [
          {
            "title": "Back",
            "value": "cancel",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add to basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.addToBasket": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.addToBasket }}",
            "expected": "cancel",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 2
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.addToBasket }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "OLPAddToBasket"
              }
            ]
          }
        ]
      }
    ],
    "PFWContract": [
      {
        "type": "condition",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "outputData": {
          "afterLastCollection": "{{ inputData.enablers.lastDespatch.afterLastDispatch }}",
          "fromOption": "false"
        },
        "enablers": [
          {
            "name": "despatch",
            "action": "afterLastDespatch",
            "loadingMessage": "Waiting for despatch info...",
            "id": "lastDespatch",
            "stepEvent": "onMatch",
            "params": {
              "branchID": "{{ appData.device.branchID }}",
              "clerkID": "1",
              "carrierID": "PF",
              "counterID": "{{ appData.device.nodeID }}"
            }
          }
        ],
        "expected": "^(PB|BS|TW|TS|CE|FW|FS|NW|NS|VS|VW|XW|XS).{12}$|^(PB|BS|TW|TS|FW|FS|NW|NS|VS|VW|XW|XS|CP|CE|EE|EK|CK|CU|EU|EB|ED).{11}$",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "visual": {
              "transition": true
            },
            "expected": "true",
            "nodes": [
              {
                "type": "choice",
                "title": "Next",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "pfwOptionListForTrue"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "expected": "false",
            "visual": {
              "transition": false
            },
            "nodes": [
              {
                "type": "choice",
                "title": "Next",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "pfwOptionsList"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "pfcaServiceSelected": [
      {
        "type": "condition",
        "expected": "1",
        "outputData": {
          "product": "{{ inputData.enablers.RMProductLookup }}"
        },
        "given": "1",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "pfcaCheckLastDespatch"
          }
        ],
        "enablers": [
          {
            "name": "RMProductLookup",
            "action": "getProduct",
            "loadingMessage": "Please wait, getting product details...",
            "id": "RMProductLookup",
            "stepEvent": "onMatch",
            "params": {
              "serviceId": "{{ outputData.serviceId }}",
              "barcodeType": "{{ outputData.barcodeInfo.Type }}"
            }
          }
        ]
      }
    ],
    "pfcaCheckLastDespatch": [
      {
        "type": "condition",
        "expected": "true",
        "given": "{{ outputData.product.Service.RepDespatch }}",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "expected": "true",
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "After Last Despatch",
                "description": "Inform the customer that this item will not be collected today because the latest acceptance time has passed for this carrier."
              },
              {
                "type": "choice",
                "title": "Cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "returnTo": "acceptFromCustomer"
                  }
                ]
              },
              {
                "visual": {
                  "transition": false
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "segregationPFW"
                  }
                ],
                "type": "choice",
                "title": "Proceed"
              }
            ]
          },
          {
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "segregationPFW"
              }
            ],
            "type": "condition",
            "expected": "false"
          }
        ]
      },
      {
        "type": "condition",
        "expected": "false",
        "given": "{{ outputData.product.Service.RepDespatch }}",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "segregationPFW"
          }
        ]
      }
    ],
    "pfcaSegregateAddToBasket": [
      {
        "type": "complete",
        "basket": {
          "Reference No": "{{ outputData.TD }}",
          "Service": "{{ outputData.product.Service.ReportName }}",
          "afterLastCollection": "{{ outputData.afterLastCollection }}",
          "repDespatch": "{{ outputData.product.Service.RepDespatch }}",
          "id": "{{ outputData.TD }}"
        },
        "returnTo": "acceptFromCustomer",
        "transaction": {
          "tokens.prePaidLine": "1",
          "tokens.TandTCarrier": "{{ outputData.product.TrackAndTrace.TandTCarrier }}",
          "tokens.conditionAccepted": " ",
          "tokens.barcode": "{{ outputData.TD }}",
          "tokens.Barcode": "{{ outputData.TD }}",
          "tokens.destinationAddress": " ",
          "tokens.firstAddressLine": " ",
          "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
          "tokens.afterLastDespatch": "{{ outputData.afterLastCollection }}",
          "tokens.serviceId": "{{ outputData.product.Service.ServiceId }}",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "tokens.versionNumber": "1",
          "tokens.copprn": " ",
          "tokens.destinationAreaId": " ",
          "tokens.addressValidated": "0",
          "value": "0",
          "tokens.destination": " ",
          "tokens.prn": " ",
          "tokens.UPUTrackingNumber": "{{ outputData.TD }}",
          "entryType": "mails",
          "tokens.consequentialLossBand": " ",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "quantity": "1",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
          "tokens.copIssued": "0",
          "tokens.compensationValue": " ",
          "tokens.TandTSvcID": "{{ outputData.product.TrackAndTrace.TandTSvcID }}",
          "tokens.Dest": " ",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.APTransactionReference": "0001",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "tokens.carrier": "{{ outputData.product.Service.CarrierId }}",
          "tokens.TandTType": "{{ outputData.product.TrackAndTrace.TandTType }}",
          "tokens.pipFormat": " {{ outputData.product.PIPFormat }}",
          "tokens.town": " ",
          "tokens.isFranked": "0",
          "tokens.weight": " ",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.ServiceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.paymentCode": "1",
          "tokens.receiptReference": "unknown",
          "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
          "tokens.prepaidAmount": "0",
          "receiptLine": "1",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.country": "GB"
        }
      }
    ],
    "segregationPFW": [
      {
        "type": "prompt",
        "title": "Segregate Parcelforce {{outputData.nameService}}",
        "visual": {
          "actionAlignment": "right"
        },
        "description": "Keep Parcelforce items separately from other mail items",
        "actions": [
          {
            "title": "Back",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Scan another Item",
            "value": "Scan",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add To Basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.segregation": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 6
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "Scan",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaSegregateAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaSegregateAddToBasketWithOutReturn"
              }
            ]
          }
        ]
      }
    ],
    "pfwOptionsList": [
      {
        "type": "condition",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "enablers": [],
        "expected": "^(PB|BS).{11}$|^(PB|BS).{12}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "data": [
              {
                "title": "expressAM",
                "value": "5101"
              },
              {
                "title": "express9",
                "value": "5001"
              },
              {
                "title": "express10",
                "value": "4901"
              },
              {
                "title": "express24",
                "value": "4601"
              },
              {
                "title": "express48",
                "value": "4701"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "type": "condition",
        "enablers": [],
        "expected": "^(CU).{11}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "data": [
              {
                "title": "Returns (EU)",
                "value": "90"
              },
              {
                "title": "Returns (Non EU)",
                "value": "91"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "type": "condition",
        "enablers": [],
        "expected": "^(CP).{11}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "title": "What is the service?",
            "type": "options",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "data": [
              {
                "title": "Global Express/Priority Contract",
                "value": "79"
              },
              {
                "title": "Global Value",
                "value": "81"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "enablers": [],
        "expected": "^(EE).{11}$",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "data": [
              {
                "title": "Datapost PayPal",
                "value": "6300"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "enablers": [],
        "expected": "^(CK|EK).{11}$",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "data": [
              {
                "title": "Euro Priority/Economy Business",
                "value": "77"
              },
              {
                "title": "Euro Priority/Economy Home",
                "value": "77"
              },
              {
                "title": "Global Direct",
                "value": "81"
              },
              {
                "title": "Global Express/Priority Contract",
                "value": "79"
              },
              {
                "title": "Global Value",
                "value": "81"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "expected": "1",
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.RMProductLookup }}",
          "fromOption": "true"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "action": "getProduct",
            "loadingMessage": "Please wait, getting product details...",
            "id": "RMProductLookup",
            "stepEvent": "onMatch",
            "params": {
              "parsedBarcode": "{{ outputData.barcodeInfo }}"
            }
          }
        ],
        "nodes": [
          {
            "expected": "",
            "type": "condition",
            "given": "{{outputData.nameService}}",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaCheckLastDespatchTrue"
              }
            ]
          },
          {
            "expected": "1",
            "type": "condition",
            "given": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaCheckLastDespatch"
              }
            ]
          }
        ]
      }
    ],
    "pfcaSegregateAddToBasketWithOutReturn": [
      {
        "type": "complete",
        "basket": {
          "Reference No": "{{ outputData.TD }}",
          "Service": "{{ outputData.product.Service.ReportName }}",
          "afterLastCollection": "{{ outputData.afterLastCollection }}",
          "repDespatch": "{{ outputData.product.Service.RepDespatch }}",
          "id": "{{ outputData.TD }}"
        },
        "transaction": {
          "tokens.prePaidLine": "1",
          "tokens.TandTCarrier": "{{ outputData.product.TrackAndTrace.TandTCarrier }}",
          "tokens.conditionAccepted": " ",
          "tokens.barcode": "{{ outputData.TD }}",
          "tokens.Barcode": "{{ outputData.TD }}",
          "tokens.destinationAddress": " ",
          "tokens.firstAddressLine": " ",
          "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
          "tokens.afterLastDespatch": "{{ outputData.afterLastCollection }}",
          "tokens.serviceId": "{{ outputData.product.Service.ServiceId }}",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "tokens.versionNumber": "1",
          "tokens.copprn": " ",
          "tokens.destinationAreaId": " ",
          "tokens.addressValidated": "0",
          "value": "0",
          "tokens.destination": " ",
          "tokens.prn": " ",
          "tokens.UPUTrackingNumber": "{{ outputData.TD }}",
          "entryType": "mails",
          "tokens.consequentialLossBand": " ",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "quantity": "1",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
          "tokens.copIssued": "0",
          "tokens.compensationValue": " ",
          "tokens.TandTSvcID": "{{ outputData.product.TrackAndTrace.TandTSvcID }}",
          "tokens.Dest": " ",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.APTransactionReference": "0001",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "tokens.carrier": "{{ outputData.product.Service.CarrierId }}",
          "tokens.TandTType": "{{ outputData.product.TrackAndTrace.TandTType }}",
          "tokens.pipFormat": " {{ outputData.product.PIPFormat }}",
          "tokens.town": " ",
          "tokens.isFranked": "0",
          "tokens.weight": " ",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.ServiceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.paymentCode": "1",
          "tokens.receiptReference": "unknown",
          "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
          "tokens.prepaidAmount": "0",
          "receiptLine": "1",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.country": "GB"
        }
      }
    ],
    "segregationPFW11": [
      {
        "type": "info",
        "title": "Barcode",
        "description": "{{outputData.TD}}",
        "visual": {
          "view": "disabled-input"
        }
      },
      {
        "type": "prompt",
        "title": "Segregate Parcelforce {{ outputData.product.Service.ReportName }}",
        "visual": {
          "actionAlignment": "left"
        },
        "description": "Keep item secure and separate for despatch to Parcelforce",
        "actions": [
          {
            "title": "Back",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Scan another Item",
            "value": "Scan",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add To Basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.segregation": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "Scan",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaSegregateAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.segregation }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaSegregateAddToBasketWithOutReturn"
              }
            ]
          }
        ]
      }
    ],
    "pfwOptionListForTrue": [
      {
        "type": "condition",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "enablers": [],
        "expected": "^(PB|BS).{11}$|^(PB|BS).{12}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "visual": {
              "transition": true
            },
            "data": [
              {
                "title": "expressAM",
                "value": "5101"
              },
              {
                "title": "express9",
                "value": "5001"
              },
              {
                "title": "express10",
                "value": "4901"
              },
              {
                "title": "express24",
                "value": "4601"
              },
              {
                "title": "express48",
                "value": "4701"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "type": "condition",
        "enablers": [],
        "expected": "^(CU).{11}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "visual": {
              "transition": true
            },
            "data": [
              {
                "title": "Returns (EU)",
                "value": "90"
              },
              {
                "title": "Returns (Non EU)",
                "value": "91"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "type": "condition",
        "enablers": [],
        "expected": "^(CP).{11}$",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "title": "What is the service?",
            "type": "options",
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "data": [
              {
                "title": "Global Express/Priority Contract",
                "value": "79"
              },
              {
                "title": "Global Value",
                "value": "81"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "enablers": [],
        "expected": "^(EE).{11}$",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "visual": {
              "transition": true
            },
            "data": [
              {
                "title": "Datapost PayPal",
                "value": "6300"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "enablers": [],
        "expected": "^(CK|EK).{11}$",
        "given": "{{ outputData.TD }}",
        "comparison": "matchregexp",
        "nodes": [
          {
            "type": "info",
            "title": "Barcode",
            "description": "{{outputData.TD}}",
            "visual": {
              "view": "disabled-input"
            }
          },
          {
            "type": "options",
            "title": "What is the service?",
            "visual": {
              "transition": true
            },
            "data": [
              {
                "title": "Euro Priority/Economy Business",
                "value": "77"
              },
              {
                "title": "Euro Priority/Economy Home",
                "value": "77"
              },
              {
                "title": "Global Direct",
                "value": "81"
              },
              {
                "title": "Global Express/Priority Contract",
                "value": "79"
              },
              {
                "title": "Global Value",
                "value": "81"
              },
              {
                "title": "PayPal",
                "value": "6100"
              }
            ],
            "outputData": {
              "serviceId": "{{ inputData.selected.value }}",
              "nameService": "{{ inputData.selected.title }}"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfcaServiceSelected"
              }
            ]
          }
        ]
      },
      {
        "expected": "1",
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.RMProductLookup }}",
          "fromOption": "true"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "action": "getProduct",
            "loadingMessage": "Please wait, getting product details...",
            "id": "RMProductLookup",
            "stepEvent": "onMatch",
            "params": {
              "parsedBarcode": "{{ outputData.barcodeInfo }}"
            }
          }
        ],
        "nodes": [
          {
            "type": "subJourney",
            "name": "pfcaCheckLastDespatchTrue"
          }
        ]
      }
    ],
    "pfcaCheckLastDespatchTrue": [
      {
        "type": "condition",
        "expected": "true",
        "given": "{{ outputData.product.Service.RepDespatch }}",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "expected": "true",
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "Barcode",
                "description": "{{outputData.TD}}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "info",
                "title": "After Last Despatch",
                "description": "Inform the customer that this item will not be collected today because the latest acceptance time has passed for this carrier."
              },
              {
                "type": "choice",
                "title": "Cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "returnTo": "acceptFromCustomer"
                  }
                ]
              },
              {
                "visual": {
                  "transition": false
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "segregationPFW"
                  }
                ],
                "type": "choice",
                "title": "Proceed"
              }
            ]
          },
          {
            "given": "{{ outputData.afterLastCollection }}",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "segregationPFW11"
              }
            ],
            "type": "condition",
            "expected": "false"
          }
        ]
      },
      {
        "type": "condition",
        "expected": "false",
        "given": "{{ outputData.product.Service.RepDespatch }}",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "segregationPFW11"
          }
        ]
      }
    ],
    "acceptFromCustomer": [
      {
        "type": "barcode",
        "title": "Input barcode",
        "description": "Enter barcode value",
        "outputData": {
          "TD": "{{ inputData.barcode }}",
          "UPUTrackingNumber": "{{ inputData.enablers.tokeniser.UPUTrackingNumber }}",
          "BuildingName": "{{ inputData.enablers.tokeniser.BuildingName }}",
          "DestinationCountry": "{{ inputData.enablers.tokeniser.DestinationCountry }}",
          "DestinationPostCode": "{{ inputData.enablers.tokeniser.DestinationPostCode }}",
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "parsedBarcode": "{{ inputData.enablers.tokeniser }}",
          "BarcodeType": "{{ inputData.enablers.tokeniser.Type }}",
          "Type": "{{ inputData.enablers.tokeniser.Type }}",
          "ProdNo": "{{ inputData.enablers.tokeniser.ProdNo }}",
          "ServiceGroup": "{{ inputData.enablers.tokeniser.ServiceGroup }}",
          "TokenId": "{{ inputData.enablers.tokeniser.TokenId }}",
          "TokenName": "{{ inputData.enablers.tokeniser.TokenName }}",
          "TxnType": "{{ inputData.enablers.tokeniser.TxnType }}",
          "ClientAcc": "{{ inputData.enablers.tokeniser.ClientAcc }}",
          "ClientAccName": "{{ inputData.enablers.tokeniser.ClientAccName }}",
          "ClientId": "{{ inputData.enablers.tokeniser.ClientId }}",
          "Script": "{{ inputData.enablers.tokeniser.Script }}",
          "customerRefNumber": "{{ inputData.enablers.tokeniser.customerRefNumber }}",
          "Rref": "{{ inputData.enablers.tokeniser.Rref }}",
          "clientSrvCode": "{{ inputData.enablers.tokeniser.clientSrvCode }}",
          "CustomerRef": "{{ inputData.enablers.tokeniser.CustomerRef }}",
          "UPUCountryID": "{{ inputData.enablers.tokeniser.UPUCountryID }}",
          "InformationTypeID": "{{ inputData.enablers.tokeniser.InformationTypeID }}",
          "VersionID": "{{ inputData.enablers.tokeniser.VersionID }}",
          "Format": "{{ inputData.enablers.tokeniser.Format }}",
          "Class": "{{ inputData.enablers.tokeniser.Class }}",
          "MailType": "{{ inputData.enablers.tokeniser.MailType }}",
          "UniqueIdentifier": "{{ inputData.enablers.tokeniser.UniqueIdentifier }}",
          "ItemWeight": "{{ inputData.enablers.tokeniser.ItemWeight }}",
          "WeightType": "{{ inputData.enablers.tokeniser.WeightType }}",
          "PricePaid": "{{ inputData.enablers.tokeniser.PricePaid }}",
          "DateOfProduction": "{{ inputData.enablers.tokeniser.DateOfProduction }}",
          "Product": "{{ inputData.enablers.tokeniser.Product }}",
          "MailPieceType": "{{ inputData.enablers.tokeniser.MailPieceType }}",
          "ReturnToSenderPostCode": "{{ inputData.enablers.tokeniser.ReturnToSenderPostCode }}",
          "RequiredAtDelivery": "{{ inputData.enablers.tokeniser.RequiredAtDelivery }}",
          "PaddingSpaces": "{{ inputData.enablers.tokeniser.PaddingSpaces }}",
          "name": "{{ inputData.enablers.tokeniser.name }}",
          "itemID": "{{ inputData.enablers.tokeniser.itemID }}",
          "itemName": "{{ inputData.enablers.tokeniser.itemName }}",
          "longName": "{{ inputData.enablers.tokeniser.longName }}",
          "mediumName": "{{ inputData.enablers.tokeniser.mediumName }}",
          "shortName": "{{ inputData.enablers.tokeniser.shortName }}",
          "minimumValue": "{{ inputData.enablers.tokeniser.minimumValue }}",
          "maximumValue": "{{ inputData.enablers.tokeniser.maximumValue }}",
          "basketID": "{{ inputData.enablers.tokeniser.TD }}",
          "serviceValue": "{{ inputData.enablers.tokeniser.clientSrvCode }}",
          "returnTo": "returnsAcceptanceInputBarcode"
        },
        "visual": {
          "transition": true
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onChange",
            "params": {
              "barcode": "{{ inputData.barcode }}"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.barcodeInfo.Script }}",
            "expected": "ReturnsAcceptance",
            "comparison": "eq",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.barcodeInfo.Type }}",
                "expected": "jgb6,jgb61d",
                "comparison": "in",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "ReturnsAcceptance"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.barcodeInfo.Script }}",
            "expected": "PFWContract",
            "comparison": "eq",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.TD }}",
                "expected": "{{ appData.basket.items[*].id }}",
                "comparison": "in",
                "nodes": [
                  {
                    "type": "info",
                    "title": "This item is already in the basket"
                  },
                  {
                    "type": "choice",
                    "title": "Scan another item",
                    "visual": {
                      "transition": true
                    },
                    "nodes": [
                      {
                        "type": "abort",
                        "returnTo": "acceptFromCustomer"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "condition",
                "given": "1",
                "expected": "1",
                "comparison": "eq",
                "visual": {
                  "transition": false
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "PFWContract"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.barcodeInfo.Script }}",
            "expected": "OLPAccept",
            "comparison": "eq",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.barcodeInfo.Type }}",
                "expected": [
                  "jgb8"
                ],
                "comparison": "in",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "OLPAccept"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.barcodeInfo.Script }}",
            "expected": "Labels2Go",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "Labels2Go"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "returnsAcceptanceErrorMessage"
              }
            ]
          }
        ]
      }
    ],
    "collections": [
      {
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "outputData": {
          "despatchInfo": "{{ inputData.enablers.despatch }}"
        },
        "enablers": [
          {
            "name": "despatch",
            "id": "despatch",
            "action": "getBookInInfo",
            "stepEvent": "onMatch",
            "params": {
              "branchID": "{{ appData.device.branchID }}",
              "counterID": "{{ appData.device.nodeID }}",
              "clerkID": "2"
            }
          }
        ],
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.despatchInfo.parcelCount }}",
            "expected": "0",
            "comparison": "gt",
            "nodes": [
              {
                "type": "info",
                "title": "Customer collection"
              },
              {
                "type": "choice",
                "title": "Issue to customer",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "scanIssuer"
                  }
                ]
              },
              {
                "type": "info",
                "title": "Carrier tasks"
              },
              {
                "type": "choice",
                "title": "Accept from Carrier",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "scanBarcode"
                  }
                ]
              },
              {
                "type": "choice",
                "title": "Return to Carrier",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "abort"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.despatchInfo.parcelCount }}",
            "expected": "1",
            "comparison": "lt",
            "nodes": [
              {
                "type": "info",
                "title": "Customer collection"
              },
              {
                "type": "choice",
                "title": "Issue to customer",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "scanIssuer"
                  }
                ]
              },
              {
                "type": "info",
                "title": "Carrier tasks"
              },
              {
                "type": "choice",
                "title": "Accept from Carrier",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "scanBarcode"
                  }
                ]
              },
              {
                "type": "choice",
                "title": "Return to Carrier"
              }
            ]
          }
        ]
      }
    ],
    "scanIssuer": [
      {
        "type": "barcode",
        "title": "Input barcode",
        "description": "Enter barcode value",
        "outputData": {
          "rawBarcode": "{{ inputData.barcode }}",
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "PrintRef": "false",
          "service": "Customer Issue",
          "referenceValue": "{{ inputData.enablers.tokeniser.barcode }}",
          "returnReason": "false",
          "journeyType": "Issue to Customer",
          "incidentCodes": "",
          "selectedIdCheck": "",
          "rejectionStatus": "READY_FOR_CARRIER_COLLECTION",
          "despatchFlag": "",
          "itemOnHand": "",
          "TandT": "",
          "TandTType": "A",
          "TandTCarrier": "",
          "LaunchItemID": "",
          "ServiceId": "LCOut1",
          "serviceName": "",
          "Carrier": "",
          "CarrierID": "RM",
          "ClerkID": "1",
          "returnTo": "ScanIssuer",
          "captureID": "NPA"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "mail",
            "stepEvent": "onChange",
            "params": {
              "barcode": "{{ inputData.barcode }}"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "visual": {
          "transition": true
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.barcodeInfo.type}}",
            "expected": "",
            "comparison": "eq",
            "outputData": {
              "returnTo": "scanIssuer"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "invalidLocalCollect"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "enablers": [
              {
                "name": "despatch",
                "id": "despatch",
                "action": "getBookInInfo",
                "stepEvent": "onMatch",
                "params": {
                  "branchID": "{{ appData.device.branchID }}",
                  "counterID": "{{ appData.device.nodeID }}",
                  "carrierID": "{{ outputData.barcodeInfo.Carrier }}",
                  "clerkID": "{{ outputData.ClerkID }}",
                  "trackingIds": "{{ outputData.barcodeInfo.barcode }}"
                },
                "loadingMessage": "Please wait, getting BookIn info..."
              }
            ],
            "outputData": {
              "despatchInfo": "{{ inputData.enablers.despatch }}"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "carrierType"
              }
            ]
          }
        ]
      }
    ],
    "carrierType": [
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "RMLocalCollect",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.despatchInfo.parcelCount }}",
            "expected": "0",
            "comparison": "eq",
            "outputData": {
              "service": "Accept from Carrier & Customer Issue",
              "requiredBookin": "1",
              "carrierType": "Royal Mail",
              "carrierServiceType": "RM",
              "rejectReasonMessage": "Keep secure for Royal Mail. Segregate in the appropriate mail bag."
            },
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "info",
                "title": "Barcode",
                "description": "{{ outputData.barcodeInfo.barcode }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "info",
                "title": "Carrier",
                "description": "Royal Mail",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "subJourney",
                "name": "bookIn"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "outputData": {
              "service": "Customer Issue",
              "requiredBookin": "0",
              "carrierType": "Royal Mail",
              "carrierServiceType": "RM",
              "rejectReasonMessage": "Keep secure for Royal Mail. Segregate in the appropriate mail bag."
            },
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "info",
                "title": "Barcode",
                "description": "{{ outputData.barcodeInfo.barcode }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "info",
                "title": "Carrier",
                "description": "Royal Mail",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "choice",
                "title": "Next",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "productLookUp"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "PFLocalCollect",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.despatchInfo.parcelCount }}",
            "expected": "0",
            "comparison": "eq",
            "outputData": {
              "service": "Accept from Carrier & Customer Issue",
              "requiredBookin": "1",
              "carrierType": "ParcelForce",
              "carrierServiceType": "PF",
              "rejectReasonMessage": "Keep secure for Parcelforce"
            },
            "nodes": [
              {
                "type": "info",
                "title": "Barcode",
                "description": "{{ outputData.barcodeInfo.barcode }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "info",
                "title": "Carrier",
                "description": "ParcelFroce",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "subJourney",
                "name": "bookIn"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "outputData": {
              "service": "Customer Issue",
              "requiredBookin": "0",
              "carrierType": "ParcelForce",
              "carrierServiceType": "PF",
              "rejectReasonMessage": "Keep secure for Parcelforce"
            },
            "nodes": [
              {
                "type": "info",
                "title": "Barcode",
                "description": "{{ outputData.barcodeInfo.barcode }}",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "info",
                "title": "Carrier",
                "description": "ParcelFroce",
                "visual": {
                  "view": "disabled-input"
                }
              },
              {
                "type": "choice",
                "title": "Next",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "productLookUp"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "bookIn": [
      {
        "type": "prompt",
        "title": "This item is not booked in yet. Do you want to book in and continue issuing item to the customer?",
        "visual": {
          "actionAlignment": "center"
        },
        "description": "Carrier: {{outputData.carrierType}}\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
        "actions": [
          {
            "title": "Cancel",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Issue to Customer",
            "value": "BookIn",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.BK": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.BK }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "abort"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "productLookUp"
              }
            ]
          }
        ]
      }
    ],
    "issueToCustomer": [
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "RMLocalCollect",
        "comparison": "eq",
        "outputData": {
          "TandTCarrier": "POLR",
          "serviceName": "No Fee",
          "Carrier": "Royal Mail"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.product.IDcheckType }}",
            "expected": "Standard",
            "comparison": "eq",
            "outputData": {
              "incidentCodes": "I520"
            },
            "nodes": [
              {
                "type": "info",
                "title": "Does the customer have ID for the addressee? Item cannot be collected without addressee ID"
              },
              {
                "type": "choice",
                "title": "Back",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "scanIssuer"
                  }
                ]
              },
              {
                "type": "choice",
                "title": "Add To Basket",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "pfLocalCollectIssueToCustomerAddBasket"
                  }
                ]
              },
              {
                "type": "choice",
                "title": "Customer is refusing the item",
                "visual": {
                  "transition": true
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "recordReturnReason"
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "verifyAgeAndIdProof"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "PFLocalCollect",
        "comparison": "eq",
        "outputData": {
          "Carrier": "Parcelforce"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "pfLocalCollectIssueToCustomerConfirm"
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "invalidLocalCollect"
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "notsupported",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "invalidCarrier"
          }
        ]
      }
    ],
    "verifyAgeAndIdProof": [
      {
        "type": "condition",
        "given": "{{ outputData.product.IDcheckType }}",
        "expected": "Proof of age",
        "comparison": "eq",
        "outputData": {
          "incidentCodes": "I576",
          "productService": "{{ inputData.enablers.RMProductLookupService }}"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "id": "RMProductLookupService",
            "action": "getProductServices",
            "stepEvent": "onMatch",
            "params": {
              "carrierServiceType": "{{ outputData.carrierServiceType}}",
              "service": "LCOutAgeFee"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "nodes": [
          {
            "type": "subJourney",
            "name": "proofOfAge"
          },
          {
            "type": "choice",
            "title": "Customer is refusing the item",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "recordReturnReason"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.product.IDcheckType }}",
        "expected": "Proof of name",
        "comparison": "eq",
        "outputData": {
          "incidentCodes": "I575",
          "productService": "{{ inputData.enablers.RMProductLookupService }}"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "id": "RMProductLookupService",
            "action": "getProductServices",
            "stepEvent": "onMatch",
            "params": {
              "carrierServiceType": "{{ outputData.carrierServiceType}}",
              "service": "LCOutNamedFee"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "nodes": [
          {
            "type": "subJourney",
            "name": "proofOfName"
          },
          {
            "type": "choice",
            "title": "Customer is refusing the item",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "recordReturnReason"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "issueToCustomerAddToBasket"
          },
          {
            "type": "choice",
            "title": "Customer is refusing the item",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "recordReturnReason"
              }
            ]
          }
        ]
      }
    ],
    "proofOfAge": [
      {
        "type": "options",
        "title": "Item requires age verification and issue only to a person of 18 years of age or older",
        "data": "{{ outputData.productService }}",
        "outputData": {
          "selectedIdCheck": "{{ inputData.selected.value }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "captureID"
          }
        ]
      }
    ],
    "captureID": [
      {
        "type": "condition",
        "given": "{{ outputData.product.IDcheckType }}",
        "expected": "Proof of name",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "PSP",
            "comparison": "eq",
            "outputData": {
              "captureID": "PSP"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "DRL",
            "comparison": "eq",
            "outputData": {
              "captureID": "DRL"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "FNI",
            "comparison": "eq",
            "outputData": {
              "captureID": "FNI"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "MPI",
            "comparison": "eq",
            "outputData": {
              "captureID": "MPI"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "PWC",
            "comparison": "eq",
            "outputData": {
              "captureID": "PWC"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "RMP",
            "comparison": "eq",
            "outputData": {
              "captureID": "RMP"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "NHS",
            "comparison": "eq",
            "outputData": {
              "captureID": "NHS"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "SCB",
            "comparison": "eq",
            "outputData": {
              "captureID": "SCB"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.product.IDcheckType }}",
        "expected": "Proof of age",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "OVER25",
            "comparison": "eq",
            "outputData": {
              "captureID": "OVER25"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "PSP",
            "comparison": "eq",
            "outputData": {
              "captureID": "PSP"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.selectedIdCheck }}",
            "expected": "DRL",
            "comparison": "eq",
            "outputData": {
              "captureID": "DRL"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasket"
              }
            ]
          }
        ]
      }
    ],
    "issueToCustomerAddToBasket": [
      {
        "type": "prompt",
        "title": "Collection item details",
        "visual": {
          "actionAlignment": "center"
        },
        "description": "Ask the customer to sign the Alternative Collection Service card",
        "actions": [
          {
            "title": "Back",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add To Basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.action": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasketWithoutRetrun"
              }
            ]
          }
        ]
      }
    ],
    "issueToCustomerAddToBasketWithBack": [
      {
        "type": "prompt",
        "title": "Collection item details",
        "visual": {
          "actionAlignment": "center"
        },
        "description": "Ask the customer to sign the Alternative Collection Service card",
        "actions": [
          {
            "title": "Back",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add To Basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.action": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomerAddToBasketWithoutRetrun"
              }
            ]
          }
        ]
      }
    ],
    "issueToCustomerAddToBasketWithoutRetrun": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Service": "{{ outputData.service }}",
          "Reference No": "{{ outputData.referenceValue }}",
          "ID Check": "{{outputData.product.IDcheckType}}",
          "Carrier": "{{ outputData.Carrier }}",
          "journeyType": "{{ outputData.journeyType }}"
        },
        "transaction": {
          "tokens.capturedID": "{{ outputData.captureID }}",
          "tokens.Function": "",
          "tokens.NumberOfItems": "1",
          "tokens.itemOnHand": "false",
          "tokens.Tandt": "true",
          "tokens.parcelStatus": "CUSTOMER_COLLECTED",
          "tokens.incidentCodes": "{{outputData.incidentCodes}}",
          "tokens.addressValidated": "0",
          "tokens.afterLastDespatch": "1",
          "tokens.APTransactionReference": "0001",
          "tokens.barcode": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.clientAccountNo": "3292",
          "tokens.clientSrvCode": "",
          "tokens.compensationValue": "",
          "tokens.conditionAccepted": "",
          "tokens.consequentialLossBand": "",
          "tokens.copIssued": "0",
          "tokens.copprn": "",
          "tokens.country": "GB",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.Dest": "999",
          "tokens.destination": "UK (EU)",
          "tokens.destinationAddress": "",
          "tokens.destinationAreaId": "999",
          "tokens.firstAddressLine": "",
          "tokens.international": "",
          "tokens.isFranked": "0",
          "tokens.paymentCode": "1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.prepaidAmount": "0",
          "tokens.prePaidLine": "1",
          "tokens.prn": "",
          "tokens.receiptReference": "unknown",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceId": "{{ outputData.product.Service.ServiceId }}",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.TandTCarrier": "{{ outputData.TandTCarrier }}",
          "tokens.TandTSvcID": "",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.accLineType": "PS1",
          "tokens.town": "",
          "tokens.UPUTrackingNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.versionNumber": "1",
          "tokens.weight": "",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "value": "0"
        }
      }
    ],
    "proofOfName": [
      {
        "type": "options",
        "title": "Item must be collected by addressee in person and item requires addressee name and photo ID",
        "data": "{{ outputData.productService }}",
        "outputData": {
          "selectedIdCheck": "{{ inputData.selected.value }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "captureID"
          }
        ]
      }
    ],
    "pfLocalCollectIssueToCustomerConfirm": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.RMProductLookup }}"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "id": "RMProductLookup",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "parsedBarcode": "{{ outputData.barcodeInfo }}",
              "journeyType": "{{ outputData.journeyType }}",
              "isFeePayable": "{{ outputData.isFeePayable }}"
            },
            "loadingMessage": "Please wait, getting product details...",
            "retriable": true,
            "errorMessage": "An error has occurred. Try again later"
          }
        ],
        "nodes": [
          {
            "type": "info",
            "title": "Does the customer have ID for the addressee? Item cannot be collected without addressee ID"
          },
          {
            "type": "choice",
            "title": "Back",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "scanIssuer"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Add To Basket",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "pfLocalCollectIssueToCustomerAddBasket"
              }
            ]
          },
          {
            "type": "choice",
            "title": "Customer is refusing the item",
            "visual": {
              "transition": true
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "recordReturnReason"
              }
            ]
          }
        ]
      }
    ],
    "pfLocalCollectIssueToCustomerAddBasket": [
      {
        "type": "complete",
        "returnTo": "scanIssuer",
        "basket": {
          "Service": "{{ outputData.service }}",
          "Reference No": "{{ outputData.referenceValue }}",
          "Carrier": "{{ outputData.Carrier }}",
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "journeyType": "{{ outputData.journeyType }}"
        },
        "transaction": {
          "tokens.Function": "",
          "tokens.NumberOfItems": "1",
          "tokens.itemOnHand": "false",
          "tokens.Tandt": "true",
          "tokens.capturedID": "{{ outputData.captureID }}",
          "tokens.parcelStatus": "CUSTOMER_COLLECTED",
          "tokens.incidentCodes": "I520",
          "tokens.addressValidated": "0",
          "tokens.afterLastDespatch": "1",
          "tokens.APTransactionReference": "0001",
          "tokens.barcode": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.clientAccountNo": "3292",
          "tokens.clientSrvCode": "",
          "tokens.country": "GB",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.Dest": "999",
          "tokens.destination": "UK (EU)",
          "tokens.destinationAddress": "",
          "tokens.destinationAreaId": "999",
          "tokens.firstAddressLine": "",
          "tokens.paymentCode": "1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.receiptReference": "unknown",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceId": "{{ outputData.product.Service.ServiceId }}",
          "tokens.serviceName": "{{ outputData.product.Service.ReportName }}",
          "tokens.TandTCarrier": "{{ outputData.product.TrackAndTrace.TandTCarrier }}",
          "tokens.TandTSvcID": "",
          "tokens.TandTType": "{{ outputData.product.TrackAndTrace.TandTType }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.UPUTrackingNumber": " {{ outputData.barcodeInfo.barcode }}",
          "tokens.versionNumber": "1",
          "tokens.weight": "",
          "tokens.prepaidAmount": "0",
          "tokens.accLineType": "PS1",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0"
        }
      }
    ],
    "recordReturnReason": [
      {
        "type": "info",
        "title": "Barcode",
        "description": "{{ outputData.barcodeInfo.barcode }}",
        "visual": {
          "view": "disabled-input"
        }
      },
      {
        "type": "info",
        "title": "Carrier",
        "description": "{{outputData.carrierType}}",
        "visual": {
          "view": "disabled-input"
        }
      },
      {
        "type": "options",
        "title": "Select the reason why customer is refusing the item",
        "enablers": [
          {
            "name": "RMProductLookup",
            "id": "RMProductLookupService",
            "action": "getProductServices",
            "stepEvent": "onInit",
            "params": {
              "carrierServiceType": "{{ outputData.carrierServiceType}}",
              "service": "LCRTS"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "data": "{{ inputData.enablers.RMProductLookupService }}",
        "outputData": {
          "selectedIdCheck": "{{ inputData.selected.value }}",
          "selectedTitle": "{{ inputData.selected.title }}"
        },
        "nodes": [
          {
            "type": "subJourney",
            "name": "rejectReason"
          }
        ]
      }
    ],
    "rejectReason": [
      {
        "type": "condition",
        "given": "{{ outputData.selectedIdCheck }}",
        "expected": "I531,I540",
        "comparison": "in",
        "outputData": {
          "returnReason": "Customer refused to collect",
          "incidentCodes": "I531,I540"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "NonPriority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "false",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "Priority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "true",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.selectedIdCheck}}",
        "expected": "I532,I540",
        "comparison": "in",
        "outputData": {
          "returnReason": "Customer requests immediate return",
          "incidentCodes": "I532,I540"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "NonPriority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "false",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "Priority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "true",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.selectedIdCheck}}",
        "expected": "I533,I540",
        "comparison": "in",
        "outputData": {
          "returnReason": "Customer not known at address",
          "incidentCodes": "I533,I540"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "NonPriority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "false",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "Priority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "true",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.selectedIdCheck}}",
        "expected": "I534,I540",
        "comparison": "in",
        "outputData": {
          "returnReason": "Customer not known at address",
          "incidentCodes": "I534,I540"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "NonPriority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "false",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{outputData.product.ParcelType}}",
            "expected": "Priority",
            "comparison": "eq",
            "outputData": {
              "despatchFlag": "true",
              "itemOnHand": "true",
              "TandT": "true"
            },
            "nodes": [
              {
                "type": "subJourney",
                "name": "customerRejectPrompt"
              }
            ]
          }
        ]
      }
    ],
    "addBasketIssueToCustomerRejected": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Service": "{{ outputData.service }}",
          "Reference No": "{{ outputData.referneceValue }}",
          "ID Check": "{{outputData.product.IDcheckType}}",
          "Return Reason": "{{outputData.returnReason}}",
          "journeyType": "{{ outputData.journeyType }}"
        },
        "transaction": {
          "tokens.capturedID": "{{ outputData.captureID }}",
          "tokens.Function": "",
          "tokens.NumberOfItems": "1",
          "tokens.itemOnHand": "{{outputData.itemOnHand}}",
          "tokens.Tandt": "{{outputData.TandT}}",
          "tokens.Despatch": "{{outputData.despatchFlag}}",
          "tokens.parcelStatus": "{{outputData.rejectionStatus}}",
          "tokens.incidentCodes": "{{outputData.incidentCodes}}",
          "tokens.addressValidated": "0",
          "tokens.afterLastDespatch": "1",
          "tokens.APTransactionReference": "0001",
          "tokens.barcode": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.clientAccountNo": "3292",
          "tokens.clientSrvCode": "",
          "tokens.compensationValue": "",
          "tokens.conditionAccepted": "",
          "tokens.consequentialLossBand": "",
          "tokens.copIssued": "0",
          "tokens.copprn": "",
          "tokens.country": "GB",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.Dest": "999",
          "tokens.destination": "UK (EU)",
          "tokens.destinationAddress": "",
          "tokens.destinationAreaId": "999",
          "tokens.firstAddressLine": "",
          "tokens.international": "",
          "tokens.isFranked": "0",
          "tokens.paymentCode": "1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.prepaidAmount": "0",
          "tokens.prePaidLine": "1",
          "tokens.prn": "",
          "tokens.receiptReference": "unknown",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceId": "{{ outputData.product.Service.ReturnServiceID }}",
          "tokens.serviceName": "{{ outputData.product.Service.ReturnServiceName }}",
          "tokens.TandTCarrier": "{{ outputData.TandTCarrier }}",
          "tokens.TandTSvcID": "",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.accLineType": "PS1",
          "tokens.town": "",
          "tokens.UPUTrackingNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.versionNumber": "1",
          "tokens.weight": "",
          "basketItems": "{{ outputData.product.ReturnItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "value": "0"
        }
      }
    ],
    "customerRejectPrompt": [
      {
        "type": "prompt",
        "title": "Collection item refused by customer",
        "visual": {
          "actionAlignment": "center"
        },
        "description": "Return Reason: {{ outputData.returnReason }}\n\n {{ outputData.rejectReasonMessage}}",
        "actions": [
          {
            "title": "Back",
            "value": "backToPFW",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Add To Basket",
            "value": "addToBasket",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.action": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "backToPFW",
            "nodes": [
              {
                "type": "undo",
                "numberOfSteps": 3
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.action }}",
            "expected": "addToBasket",
            "nodes": [
              {
                "type": "subJourney",
                "name": "addBasketIssueToCustomerRejected"
              }
            ]
          }
        ]
      }
    ],
    "scanBarcode": [
      {
        "type": "barcode",
        "title": "Input barcode",
        "description": "Enter barcode value",
        "outputData": {
          "rawBarcode": "{{ inputData.barcode }}",
          "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
          "address.line1": "{{ inputData.enablers.tokeniser.BuildingName }}",
          "address.postcode": "{{ inputData.enablers.tokeniser.DestinationPostCode }}",
          "address.countryAlpha2": "{{ inputData.enablers.tokeniser.DestinationCountry }}",
          "PrintRef": "false",
          "journeyType": "Accept from Carrier",
          "itemOnHand": "true",
          "TandT": "true",
          "parcelStatus": "BRANCH_CHECKED_IN",
          "incidentCodes": " ",
          "TandTCarrier": "",
          "TandTType": "A",
          "ServiceId": "LCIn",
          "serviceName": "Local Collect Item In",
          "LaunchItemID": "",
          "ClerkID": "1"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "mail",
            "stepEvent": "onChange",
            "params": {
              "barcode": "{{ inputData.barcode }}"
            },
            "loadingMessage": "Please wait..."
          }
        ],
        "visual": {
          "transition": false
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{outputData.barcodeInfo.type}}",
            "expected": "",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "invalidLocalCollect"
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "enablers": [
              {
                "name": "despatch",
                "id": "despatch",
                "action": "getBookInInfo",
                "stepEvent": "onMatch",
                "params": {
                  "branchID": "{{ appData.device.branchID }}",
                  "counterID": "{{ appData.device.nodeID }}",
                  "carrierID": "{{ outputData.barcodeInfo.Carrier }}",
                  "clerkID": "{{ outputData.ClerkID }}",
                  "trackingIds": "{{ outputData.barcodeInfo.barcode }}"
                },
                "loadingMessage": "Please wait, getting BookIn info..."
              }
            ],
            "outputData": {
              "despatchInfo": "{{ inputData.enablers.despatch }}"
            },
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.despatchInfo.parcelCount }}",
                "expected": "0",
                "comparison": "gt",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "duplicateAcceptFromCarrier"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "1",
                "expected": "1",
                "comparison": "eq",
                "nodes": [
                  {
                    "type": "choice",
                    "title": "Next",
                    "nodes": [
                      {
                        "type": "subJourney",
                        "name": "productLookUp"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "invalidLocalCollect": [
      {
        "type": "prompt",
        "title": "Barcode not recognised",
        "description": "Please scan or manually enter different barcode or cancel.",
        "visual": {
          "actionAlignment": "center"
        },
        "actions": [
          {
            "title": "OK",
            "value": "ok",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort",
            "returnTo": "scanBarcode"
          }
        ]
      }
    ],
    "duplicateAcceptFromCarrier": [
      {
        "type": "prompt",
        "title": "Parcel already processed",
        "description": "This parcel has already been scannned and processed, please scan another barcode.",
        "visual": {
          "actionAlignment": "center"
        },
        "actions": [
          {
            "title": "OK",
            "value": "ok",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort",
            "returnTo": "scanBarcode"
          }
        ]
      }
    ],
    "productLookUp": [
      {
        "type": "condition",
        "given": "{{ outputData.barcodeInfo.type }}",
        "expected": "PFLocalCollect",
        "comparison": "eq",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.journeyType }}",
            "expected": "Issue to Customer",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomer"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.journeyType }}",
            "expected": "Accept from Carrier",
            "comparison": "eq",
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "expected": "1",
                "comparison": "eq",
                "outputData": {
                  "product": "{{ inputData.enablers.RMProductLookup }}"
                },
                "enablers": [
                  {
                    "name": "RMProductLookup",
                    "id": "RMProductLookup",
                    "action": "getProduct",
                    "stepEvent": "onMatch",
                    "params": {
                      "parsedBardcode": "{{ outputData.barcodeInfo }}",
                      "journeyType": "{{ outputData.journeyType }}"
                    },
                    "loadingMessage": "Please wait, getting product details...",
                    "retriable": true
                  }
                ],
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "acceptFromCarrierRMLocalCollect"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "product": "{{ inputData.enablers.RMProductLookup }}"
        },
        "enablers": [
          {
            "name": "RMProductLookup",
            "id": "RMProductLookup",
            "action": "getProduct",
            "stepEvent": "onMatch",
            "params": {
              "parsedBarcode": "{{ outputData.barcodeInfo }}",
              "journeyType": "{{ outputData.journeyType }}"
            },
            "loadingMessage": "Please wait, getting product details...",
            "retriable": true
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.journeyType }}",
            "expected": "Issue to Customer",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "issueToCustomer"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.journeyType }}",
            "expected": "Accept from Carrier",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "acceptFromCarrierRMLocalCollect"
              }
            ]
          }
        ]
      }
    ],
    "invalidCarrier": [
      {
        "type": "prompt",
        "title": "This item is not valid for collection from a Post Office. Please return item to carrier.",
        "description": "",
        "visual": {
          "actionAlignment": "center"
        },
        "actions": [
          {
            "title": "OK",
            "value": "ok",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort"
          }
        ]
      }
    ],
    "acceptFromCarrierRMLocalCollect": [
      {
        "type": "condition",
        "given": "{{ outputData.barcodeInfo.type }}",
        "expected": "RMLocalCollect",
        "comparison": "eq",
        "outputData": {
          "incidentCodes": "I510",
          "TandTCarrier": "POLR",
          "Carrier": "Royal Mail"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Accept Item",
            "visual": {
              "actionAlignment": "center"
            },
            "description": "Carrier: {{outputData.Carrier}}\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
            "actions": [
              {
                "title": "Back",
                "value": "backToPFW",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Scan another Item",
                "value": "Scan",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add To Basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.RMLocalCollect": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.RMLocalCollect }}",
                "expected": "backToPFW",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.RMLocalCollect }}",
                "expected": "Scan",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "RMaddToBasketWithReturn"
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.RMLocalCollect }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "RMaddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "PFLocalCollect",
        "comparison": "eq",
        "nodes": [
          {
            "type": "prompt",
            "title": "Accept Item",
            "visual": {
              "actionAlignment": "center"
            },
            "description": "Carrier: Parcelforce\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
            "actions": [
              {
                "title": "Back",
                "value": "backToPFW",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Scan another Item",
                "value": "Scan",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add To Basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.PFLocalCollect": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.PFLocalCollect }}",
                "expected": "backToPFW",
                "nodes": [
                  {
                    "type": "undo",
                    "numberOfSteps": 3
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.PFLocalCollect }}",
                "expected": "Scan",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "acceptFromCarrierPFLocalCollectWithReturn"
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.PFLocalCollect }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "acceptFromCarrierPFLocalCollect"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "invalidLocalCollect"
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{outputData.barcodeInfo.type}}",
        "expected": "notsupported",
        "comparison": "eq",
        "nodes": [
          {
            "type": "subJourney",
            "name": "invalidCarrier"
          }
        ]
      }
    ],
    "acceptFromCarrierPFLocalCollect": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Carrier": "Parcelforce",
          "journeyType": "{{ outputData.journeyType }}",
          "Tracking Reference": "{{ outputData.barcodeInfo.barcode }}"
        },
        "transaction": {
          "tokens.Function": " ",
          "tokens.NumberOfItems": "1",
          "tokens.TandTCarrier": "POLP",
          "tokens.parcelStatus": "acceptFromCarrierPFLocalCollectWithReturnTo{{ outputData.parcelStatus }}",
          "tokens.barcode": "{{ outputData.rawBarcode }}",
          "tokens.TandT": "true",
          "tokens.clientSrvCode": " ",
          "tokens.serviceId": "{{ outputData.ServiceId }}",
          "tokens.versionNumber": "1",
          "tokens.destination": "UK (EU)",
          "tokens.UPUTrackingNumber": " {{ outputData.barcodeInfo.barcode }}",
          "entryType": "mails",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.itemOnHand": "true",
          "tokens.Dest": "999",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.APTransactionReference": "0001",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.TandTSvcID": " ",
          "tokens.accLineType": "PS1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.paymentCode": "1",
          "tokens.receiptReference": "unknown",
          "tokens.clientAccountNo": "3292",
          "tokens.prepaidAmount": "0",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.destinationAddress": " ",
          "tokens.afterLastDespatch": "0",
          "tokens.weight": " ",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "tokens.destinationAreaId": "999",
          "value": "0",
          "tokens.country": " {{ outputData.address.countryAlpha2 }}",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "quantity": "1",
          "tokens.incidentCodes": "I520",
          "tokens.serviceName": "{{ outputData.serviceName }}",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "receiptLine": "1"
        }
      }
    ],
    "acceptFromCarrierPFLocalCollectWithReturn": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Carrier": "Parcelforce",
          "journeyType": "{{ outputData.journeyType }}",
          "Tracking Reference": "{{ outputData.barcodeInfo.barcode }}"
        },
        "transaction": {
          "tokens.Function": " ",
          "tokens.NumberOfItems": "1",
          "tokens.TandTCarrier": "POLP",
          "tokens.parcelStatus": "acceptFromCarrierPFLocalCollectWithReturnTo{{ outputData.parcelStatus }}",
          "tokens.barcode": "{{ outputData.rawBarcode }}",
          "tokens.TandT": "true",
          "tokens.clientSrvCode": " ",
          "tokens.serviceId": "{{ outputData.ServiceId }}",
          "tokens.versionNumber": "1",
          "tokens.destination": "UK (EU)",
          "tokens.UPUTrackingNumber": " {{ outputData.barcodeInfo.barcode }}",
          "entryType": "mails",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.itemOnHand": "true",
          "tokens.Dest": "999",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.APTransactionReference": "0001",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.TandTSvcID": " ",
          "tokens.accLineType": "PS1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.paymentCode": "1",
          "tokens.receiptReference": "unknown",
          "tokens.clientAccountNo": "3292",
          "tokens.prepaidAmount": "0",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.destinationAddress": " ",
          "tokens.afterLastDespatch": "0",
          "tokens.weight": " ",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "tokens.destinationAreaId": "999",
          "value": "0",
          "tokens.country": " {{ outputData.address.countryAlpha2 }}",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "quantity": "1",
          "tokens.incidentCodes": "I520",
          "tokens.serviceName": "{{ outputData.serviceName }}",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "receiptLine": "1"
        },
        "returnTo": "scanBarcode"
      }
    ],
    "RMaddToBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Carrier": "{{ outputData.Carrier}}",
          "Tracking Reference": "{{ outputData.barcodeInfo.barcode }}",
          "journeyType": "{{ outputData.journeyType }}"
        },
        "transaction": {
          "tokens.Function": " ",
          "tokens.NumberOfItems": "1",
          "tokens.itemOnHand": "{{ outputData.itemOnHand }}",
          "tokens.TandT": "{{ outputData.TandT }}",
          "tokens.parcelStatus": "{{ outputData.parcelStatus}}",
          "tokens.incidentCodes": "{{ outputData.incidentCodes }}",
          "tokens.addressValidated": "0",
          "tokens.afterLastDespatch": "1",
          "tokens.APTransactionReference": "0001",
          "tokens.barcode": "{{ outputData.rawBarcode }}",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.clientAccountNo": "3292",
          "tokens.clientSrvCode": " ",
          "tokens.compensationValue": " ",
          "tokens.conditionAccepted": " ",
          "tokens.consequentialLossBand": " ",
          "tokens.copIssued": "0",
          "tokens.copprn": " ",
          "tokens.country": "GB",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.Dest": "999",
          "tokens.destination": "UK (EU)",
          "tokens.destinationAddress": " ",
          "tokens.destinationAreaId": "999",
          "tokens.firstAddressLine": " ",
          "tokens.international": " ",
          "tokens.isFranked": "0",
          "tokens.paymentCode": "1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.prepaidAmount": "0",
          "tokens.prePaidLine": "1",
          "tokens.prn": " ",
          "tokens.receiptReference": "unknown",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceId": "{{ outputData.ServiceId }}",
          "tokens.serviceName": "{{ outputData.serviceName }}",
          "tokens.TandTCarrier": "{{ outputData.TandTCarrier }}",
          "tokens.TandTSvcID": " ",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.accLineType": "PS1",
          "tokens.town": " ",
          "tokens.UPUTrackingNumber": " {{ outputData.barcodeInfo.barcode }}",
          "tokens.versionNumber": "1",
          "tokens.weight": "  ",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "value": "0"
        }
      }
    ],
    "RMaddToBasketWithReturn": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.barcodeInfo.barcode }}",
          "Carrier": "{{ outputData.Carrier}}",
          "Tracking Reference": "{{ outputData.barcodeInfo.barcode }}",
          "journeyType": "{{ outputData.journeyType }}"
        },
        "transaction": {
          "tokens.Function": " ",
          "tokens.NumberOfItems": "1",
          "tokens.itemOnHand": "{{ outputData.itemOnHand }}",
          "tokens.TandT": "{{ outputData.TandT }}",
          "tokens.parcelStatus": "{{ outputData.parcelStatus}}",
          "tokens.incidentCodes": "{{ outputData.incidentCodes }}",
          "tokens.addressValidated": "0",
          "tokens.afterLastDespatch": "1",
          "tokens.APTransactionReference": "0001",
          "tokens.barcode": "{{ outputData.rawBarcode }}",
          "tokens.carrier": "{{ outputData.barcodeInfo.Carrier }}",
          "tokens.clientAccountNo": "3292",
          "tokens.clientSrvCode": " ",
          "tokens.compensationValue": " ",
          "tokens.conditionAccepted": " ",
          "tokens.consequentialLossBand": " ",
          "tokens.copIssued": "0",
          "tokens.copprn": " ",
          "tokens.country": "GB",
          "tokens.customerRefNumber": "{{ outputData.barcodeInfo.barcode }}",
          "tokens.Dest": "999",
          "tokens.destination": "UK (EU)",
          "tokens.destinationAddress": " ",
          "tokens.destinationAreaId": "999",
          "tokens.firstAddressLine": " ",
          "tokens.international": " ",
          "tokens.isFranked": "0",
          "tokens.paymentCode": "1",
          "tokens.pipFormat": "{{ outputData.product.PIPFormat }}",
          "tokens.prepaidAmount": "0",
          "tokens.prePaidLine": "1",
          "tokens.prn": " ",
          "tokens.receiptReference": "unknown",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.serviceId": "{{ outputData.ServiceId }}",
          "tokens.serviceName": "{{ outputData.serviceName }}",
          "tokens.TandTCarrier": "{{ outputData.TandTCarrier }}",
          "tokens.TandTSvcID": " ",
          "tokens.TandTType": "{{ outputData.TandTType }}",
          "tokens.tokenIdentifier": "6729",
          "tokens.accLineType": "PS1",
          "tokens.town": " ",
          "tokens.UPUTrackingNumber": " {{ outputData.barcodeInfo.barcode }}",
          "tokens.versionNumber": "1",
          "tokens.weight": "  ",
          "basketItems": "{{ outputData.product.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.product.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "NEED_TO_IMPLEMENT",
          "value": "0"
        },
        "returnTo": "scanBarcode"
      }
    ],
    "ppiBagsJourney": [
      {
        "type": "barcode",
        "title": "Customer account or sales order number",
        "outputData": {
          "accountOrOrderNumber": "{{ inputData.barcode }}"
        },
        "enablers": [
          {
            "name": "tokeniser",
            "id": "tokeniser",
            "action": "tokenise",
            "stepEvent": "onChange",
            "params": {
              "barcode": "{{ inputData.barcode }}"
            },
            "loadingMessage": "Please wait..."
          },
          {
            "id": "displayLabel",
            "name": "displayOnScreen",
            "action": "display",
            "params": {
              "data": "{{ inputData.enablers.tokeniser }}"
            },
            "stepEvent": "onChange"
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "1",
            "comparison": "eq",
            "expected": "1",
            "nodes": [
              {
                "type": "input",
                "title": "Number of sealed PPI bags",
                "outputData": {
                  "numberOfPPIBags": "{{ inputData.inputValue }}"
                },
                "defaultValues": {
                  "inputValue": "1"
                },
                "inputValidation": [
                  {
                    "field": "inputValue",
                    "numericality": {
                      "lte": "10",
                      "gte": "1",
                      "message": "Total of sealed bags must be less than or equal to 10"
                    }
                  }
                ],
                "visual": {
                  "transition": false
                },
                "nodes": [
                  {
                    "type": "choice",
                    "title": "Next",
                    "nodes": [
                      {
                        "type": "prompt",
                        "title": "Complete the transaction",
                        "visual": {
                          "actionAlignment": "left",
                          "view": "medium"
                        },
                        "description": "Date stamp the Sales Order and write the number of bags accepted next to the date stamp.\n\nPlace the bag(s) to one side securely to await Royal Mail collection with the Sales order ready to hand to the collection driver",
                        "actions": [
                          {
                            "title": "Back",
                            "value": "cancel",
                            "visual": {
                              "view": "secondary",
                              "size": "small"
                            }
                          },
                          {
                            "title": "Next",
                            "value": "addToBasket",
                            "visual": {
                              "view": "primary",
                              "size": "small"
                            }
                          }
                        ],
                        "outputData": {
                          "actions.addToBasket": "{{ inputData.action }}"
                        },
                        "nodes": [
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.addToBasket }}",
                            "expected": "cancel",
                            "nodes": [
                              {
                                "type": "undo",
                                "numberOfSteps": 3
                              }
                            ]
                          },
                          {
                            "type": "condition",
                            "comparison": "eq",
                            "given": "{{ outputData.actions.addToBasket }}",
                            "expected": "addToBasket",
                            "nodes": [
                              {
                                "type": "complete",
                                "basket": {
                                  "id": "PPI Bag : {{ outputData.accountOrOrderNumber }}",
                                  "number": "{{ outputData.numberOfPPIBags }}"
                                },
                                "transaction": {
                                  "tokens.PPI_Barcode_Value": "{{ outputData.accountOrOrderNumber }}",
                                  "tokens.barcode": "{{ outputData.accountOrOrderNumber }}",
                                  "tokens.Bag_Count": "{{ outputData.numberOfPPIBags }}",
                                  "itemID": "45286",
                                  "entryType": "mails",
                                  "receiptLine": "1",
                                  "value": "0",
                                  "quantity": "{{ outputData.numberOfPPIBags }}",
                                  "basketItems.ItemID": "45285",
                                  "basketItems.Value": "0",
                                  "basketItems.Quantity": "{{ outputData.numberOfPPIBags }}"
                                }
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "ChequeEnvelopeDeposits": [
      {
        "type": "info",
        "title": "PAN",
        "description": "9826935100676"
      },
      {
        "type": "info",
        "title": "Client name",
        "description": "Offline Banking"
      },
      {
        "type": "info",
        "title": "Description",
        "description": "Banking - Cheque Deposit"
      },
      {
        "type": "input",
        "title": "Sort Code",
        "inputMask": "alphanumeric",
        "description": "Enter",
        "outputData": {
          "sortCode": "{{ inputData.inputValue }}"
        },
        "inputValidation": [
          {
            "field": "inputValue",
            "required": {
              "message": "Sort code is required."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^[0-9]{6}$",
              "message": "Branch sort code must be 6 digits in length."
            }
          },
          {
            "field": "inputValue",
            "format": {
              "match": "^(?!(401255)$)",
              "message": "This transaction is not supported at the Post Office. Please refer customer to their bank."
            }
          }
        ],
        "nodes": [
          {
            "type": "input",
            "title": "Account number",
            "inputMask": "alphanumeric",
            "description": "Enter",
            "visual": {
              "transition": true
            },
            "outputData": {
              "accountNumber": "{{ inputData.inputValue }}"
            },
            "inputValidation": [
              {
                "field": "inputValue",
                "required": {
                  "message": "Account number is required."
                }
              },
              {
                "field": "inputValue",
                "format": {
                  "match": "^[0-9]{8}$",
                  "message": "Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                }
              }
            ],
            "nodes": [
              {
                "type": "prompt",
                "title": "Confirm bank selection",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                "actions": [
                  {
                    "title": "Cancel",
                    "value": "cancel",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "Continue",
                    "value": "continue",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "action": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "given": "continue",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "condition",
                        "given": "1",
                        "expected": "1",
                        "comparison": "eq",
                        "enablers": [
                          {
                            "id": "printCustomerReceipt",
                            "name": "printer",
                            "action": "print",
                            "params": {
                              "value": "<html> <head> <style> * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; } </style> </head> <body> <div class=\"text-center no-padding\"> <h1>Post Office Ltd.</h1> <h3>www.postoffice.co.uk</h3> </div> <hr /> <div class=no-padding> <table> <tr> <td>{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}<br>{{ appData.device.branchName }}<br>{{ appData.device.branchAddress }}<br>{{ appData.device.branchPostcode }}</td> <td>TP: {{ appData.device.nodeID }}<br>FAD: {{ appData.device.branchID }}</td> </tr> </table> <hr /> <p>Session Id: TBC</p> <p>Txn Id: TBC</p> <p>Client: {{ outputData.barcodeInfo.ClientAccName }}</p> <p>Scheme: {{ outputData.barcodeInfo.TokenName }}&nbsp;&nbsp;&nbsp;&nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}</p> <p>Token Type: BC&nbsp;&nbsp;&nbsp;&nbsp;Entry: TBC</p> <p>Ref: {{ outputData.barcodeInfo.Rref }}</p> <p>Amount: 0.00 Cash</p> <p>Product No: {{ outputData.productNo }}</p> <hr /> <p>Sort Code: {{ outputData.sortCode }}</p> <p>Account Number: {{ outputData.accountNumber }}</p> </div> <hr /> <div class=\"text-center\"> <p>Please retain for future reference.</p> <hr /> <p>{{ outputData.receiptNotice }}</p> </div> <hr /> </div> <div class=\"text-center\"> <p>This is not a VAT receipt.</p> </div> <hr /> </body> </html>"
                            },
                            "stepEvent": "onMatch",
                            "loadingMessage": "Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'."
                          }
                        ],
                        "nodes": [
                          {
                            "type": "complete",
                            "basket": {
                              "id": "{{ outputData.product.longName }}"
                            },
                            "transaction": {
                              "itemID": "{{ outputData.productNo }}",
                              "entryType": "banking",
                              "quantity": "1",
                              "receiptLine": "1",
                              "valueInPence": "0",
                              "value": "0",
                              "voidable": "true",
                              "quantityFixed": "true",
                              "tokens.PN": "{{ outputData.productNo }}",
                              "tokens.tokenIdentifier": "{{ outputData.barcodeInfo.TokenId }}",
                              "tokens.clientAccountNo": "{{ outputData.barcodeInfo.ClientAcc }}",
                              "tokens.customerRefNumber": "{{ outputData.barcodeInfo.customerRefNumber }}",
                              "tokens.APTransactionReference": "0001",
                              "tokens.SortCode": "{{ outputData.sortCode }}",
                              "tokens.versionNumber": "1",
                              "tokens.clientSrvCode": "{{ outputData.barcodeInfo.clientSrvCode }}",
                              "tokens.receiptReference": "{{ appData.device.nodeID }}  H",
                              "tokens.paymentCode": "1",
                              "tokens.AccountNumber": "{{ outputData.accountNumber }}",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_VER": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_RESULT_RCODE": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_VER": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SVC": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_VID": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TTYP": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TREF": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_CTR": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TDATE": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_FAD": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_STAFF": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SCD": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_ACC": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_ACC": "TBC",
                              "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_SCD": "TBC",
                              "tokens.BNM": "TBC",
                              "tokens.BRN": "TBC",
                              "tokens.AD1": "TBC",
                              "tokens.TWN": "TBC",
                              "tokens.PCD": "TBC",
                              "tokens.DD": "TBC",
                              "tokens.DDI": "TBC",
                              "tokens.SmileCheck": "TBC",
                              "tokens.X_DATA_SetProduct_PN": "TBC",
                              "tokens.X_DATA_SetProduct_FP": "TBC",
                              "tokens.X_DATA_SetProduct_LN": "TBC",
                              "tokens.X_DATA_SetProduct_MnV": "TBC",
                              "tokens.X_DATA_SetProduct_MV": "TBC",
                              "tokens.X_DATA_SetProduct_MxV": "TBC",
                              "tokens.X_DATA_SetProduct_RN": "TBC",
                              "tokens.X_DATA_SetProduct_RP": "TBC",
                              "tokens.X_DATA_SetProduct_SN": "TBC",
                              "tokens.ValidationDeclined": "TBC",
                              "tokens.DeclineAbort": "TBC",
                              "tokens.Timeout": "TBC",
                              "tokens.ValidationFailed": "TBC",
                              "tokens.ValidationFailedAbort": "TBC",
                              "tokens.ManualLookup": "TBC",
                              "tokens.ConfirmBank": "TBC",
                              "tokens.Receipt_Text2": "TBC",
                              "tokens.X_DATA_PN": "{{ outputData.productNo }}"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "given": "cancel",
                    "expected": "{{ outputData.action }}",
                    "comparison": "eq",
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "Labels2Go": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "enablers": [
          {
            "name": "qrcodeParsor",
            "id": "qrcodeParsor",
            "action": "parseQrCode",
            "stepEvent": "onMatch",
            "params": {
              "barcode": "{{ outputData.TD }}"
            },
            "loadingMessage": "Parsing QR code"
          }
        ],
        "outputData": {
          "parsedQRcode": "{{ inputData.enablers.qrcodeParsor }}"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "enablers": [
              {
                "name": "tokeniser",
                "id": "tokeniser",
                "action": "tokenise",
                "stepEvent": "onMatch",
                "params": {
                  "barcode": "{{ outputData.parsedQRcode.barcode }}"
                },
                "loadingMessage": "Tokenising data"
              }
            ],
            "outputData": {
              "parsedBarcode": "{{ inputData.enablers.tokeniser }}"
            },
            "nodes": [
              {
                "type": "condition",
                "given": "1",
                "expected": "1",
                "comparison": "eq",
                "enablers": [
                  {
                    "id": "getProduct",
                    "name": "RMProductLookup",
                    "action": "getProduct",
                    "params": {
                      "parsedBarcode": "{{ outputData.parsedBarcode }}",
                      "parsedQRcode": "{{ outputData.parsedQRcode }}"
                    },
                    "loadingMessage": "Fetching product information",
                    "stepEvent": "onMatch"
                  }
                ],
                "outputData": {
                  "returnsMaxWeight": "{{ inputData.enablers.getProduct.Area.MaxWeight }}",
                  "productResponse": "{{ inputData.enablers.getProduct }}"
                },
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoMinimalAddressValidation"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "labels2GoMinimalAddressValidation": [
      {
        "type": "condition",
        "given": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}",
        "comparison": "matchregexp",
        "expected": "^.+",
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.parsedBarcode.DestinationPostCode }}",
            "comparison": "matchregexp",
            "expected": "^.+",
            "nodes": [
              {
                "type": "condition",
                "given": "{{ outputData.parsedBarcode.DestinationCountry }}",
                "comparison": "in",
                "expected": [
                  "GBR",
                  "JEY",
                  "GGY",
                  "GB",
                  "JE",
                  "GG"
                ],
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoLastDespatchCheck"
                  }
                ]
              },
              {
                "type": "condition",
                "given": "1",
                "comparison": "eq",
                "expected": "1",
                "nodes": [
                  {
                    "type": "prompt",
                    "title": "The QR code cannot be used to return the item as it does not have sufficient address details.",
                    "visual": {
                      "actionAlignment": "left"
                    },
                    "description": "Please advise the customer to contact the retailer.",
                    "actions": [
                      {
                        "title": "OK",
                        "value": "ok",
                        "visual": {
                          "view": "primary"
                        }
                      }
                    ],
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "comparison": "eq",
            "expected": "1",
            "nodes": [
              {
                "type": "prompt",
                "title": "The QR code cannot be used to return the item as it does not have sufficient address details.",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Please advise the customer to contact the retailer.",
                "actions": [
                  {
                    "title": "OK",
                    "value": "ok",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "nodes": [
                  {
                    "type": "abort"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "nodes": [
          {
            "type": "prompt",
            "title": "The QR code cannot be used to return the item as it does not have sufficient address details.",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "Please advise the customer to contact the retailer.",
            "actions": [
              {
                "title": "OK",
                "value": "ok",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "nodes": [
              {
                "type": "abort"
              }
            ]
          }
        ]
      }
    ],
    "labels2GoLastDespatchCheck": [
      {
        "type": "condition",
        "given": "1",
        "comparison": "eq",
        "expected": "1",
        "outputData": {
          "afterLastDespatch": "{{ inputData.enablers.lastDespatch.afterLastDispatch }}"
        },
        "enablers": [
          {
            "name": "despatch",
            "id": "lastDespatch",
            "action": "afterLastDespatch",
            "stepEvent": "onMatch",
            "params": {
              "branchID": "{{ appData.device.branchID }}",
              "counterID": "{{ appData.device.nodeID }}",
              "clerkID": "2",
              "carrierID": "RM"
            },
            "loadingMessage": "Waiting for despatch info..."
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.afterLastDespatch }}",
            "expected": "true",
            "comparison": "eq",
            "nodes": [
              {
                "type": "info",
                "title": "Royal Mail final collection has passed",
                "visual": {
                  "view": "notification-info"
                },
                "description": "Advise the customer that the mail item will not be despatched until the following working day."
              },
              {
                "type": "subJourney",
                "name": "labels2GoWeight"
              }
            ]
          },
          {
            "type": "condition",
            "given": "{{ outputData.afterLastDespatch }}",
            "expected": "false",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "labels2GoWeight"
              }
            ]
          }
        ]
      }
    ],
    "labels2GoWeight": [
      {
        "type": "info",
        "description": "Ask the customer to place the item going to this destination onto the scales",
        "visual": {
          "view": "notification-info"
        }
      },
      {
        "type": "input",
        "title": "Weight",
        "inputMask": "numeric",
        "unit": {
          "position": "right",
          "value": "g"
        },
        "defaultValues": {
          "inputValue": "0"
        },
        "outputData": {
          "weight": "{{ inputData.inputValue }}"
        },
        "nodes": [
          {
            "type": "condition",
            "given": "{{ outputData.weight }}",
            "expected": "{{ outputData.returnsMaxWeight }}",
            "comparison": "gt",
            "nodes": [
              {
                "type": "prompt",
                "title": "Item cannot be sent",
                "visual": {
                  "actionAlignment": "left"
                },
                "description": "Weight is more than the maximum of 20kg, for this service.\nPlease advise customer to contact retailer to arrange another form of return.",
                "actions": [
                  {
                    "title": "Back",
                    "value": "back",
                    "visual": {
                      "view": "secondary"
                    }
                  },
                  {
                    "title": "End Transaction",
                    "value": "end",
                    "visual": {
                      "view": "primary"
                    }
                  }
                ],
                "outputData": {
                  "actions.endTransaction": "{{ inputData.action }}"
                },
                "nodes": [
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.endTransaction }}",
                    "expected": "back",
                    "nodes": [
                      {
                        "type": "undo",
                        "numberOfSteps": 4
                      }
                    ]
                  },
                  {
                    "type": "condition",
                    "comparison": "eq",
                    "given": "{{ outputData.actions.endTransaction }}",
                    "expected": "end",
                    "nodes": [
                      {
                        "type": "abort"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "nodes": [
              {
                "type": "subJourney",
                "name": "labels2GoTrackingReference"
              },
              {
                "type": "subJourney",
                "name": "labels2GoAddress"
              }
            ]
          }
        ]
      }
    ],
    "labels2GoTrackingReference": [
      {
        "type": "info",
        "title": "Tracking reference number",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode['1DBarcode'] }}"
      }
    ],
    "labels2GoAddress": [
      {
        "type": "info",
        "title": "Destination",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.Customer }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine2 }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine3 }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine4 }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.Town }}"
      },
      {
        "type": "info",
        "visual": {
          "view": "disabled-input"
        },
        "description": "{{ outputData.parsedQRcode.SenderAddressDetail.PostCode }}"
      },
      {
        "type": "choice",
        "title": "Next",
        "nodes": [
          {
            "type": "subJourney",
            "name": "labels2GoPrintLabel"
          }
        ]
      }
    ],
    "labels2GoPrintLabel": [
      {
        "type": "condition",
        "given": "1",
        "expected": "1",
        "comparison": "eq",
        "outputData": {
          "connectedDevices": "{{ inputData.enablers.findPrinters.devices }}",
          "connectedDevicesCount": "{{ inputData.enablers.findPrinters.count }}"
        },
        "enablers": [
          {
            "name": "bluetooth",
            "action": "zebra",
            "id": "findPrinters",
            "stepEvent": "onMatch",
            "params": {
              "dummy": ""
            },
            "loadingMessage": "Finding printers",
            "errorMessage": "It was not possible to find any printers. You can try again or cancel. Cancel will end the transaction and you will start again.",
            "retriable": true
          }
        ],
        "nodes": [
          {
            "type": "condition",
            "given": "1",
            "expected": "1",
            "comparison": "eq",
            "outputData": {
              "labelRef": "{{ inputData.enablers.labelPrinter }}"
            },
            "enablers": [
              {
                "name": "labelPrinter",
                "action": "printLabel2Go",
                "id": "labelPrinter",
                "stepEvent": "onMatch",
                "params": {
                  "peripheralAddress": "{{ outputData.connectedDevices[0].value }}",
                  "l2gQRCode": "{{ outputData.TD }}"
                },
                "loadingMessage": "Printing label",
                "errorMessage": "It has not been possible to print the label. You can try again or cancel. Cancel will end the transaction and you will start again.",
                "retriable": true
              }
            ],
            "nodes": [
              {
                "type": "subJourney",
                "name": "labels2GoLabelPrintedSuccessfullyPrompt"
              }
            ]
          }
        ]
      }
    ],
    "labels2GoPrintUnsuccessfulPrompt": [
      {
        "type": "prompt",
        "title": "Label printing was unsuccessful",
        "description": "Advise customer that we cannot process their item. Try another terminal and printer.",
        "visual": {
          "actionAlignment": "left"
        },
        "actions": [
          {
            "title": "Cancel transaction",
            "value": "cancel",
            "visual": {
              "view": "secondary"
            }
          }
        ],
        "nodes": [
          {
            "type": "abort",
            "nodes": null
          }
        ]
      }
    ],
    "labels2GoLabelPrintedSuccessfullyPrompt": [
      {
        "type": "prompt",
        "title": "Label printed successfully?",
        "description": "",
        "visual": {
          "actionAlignment": "left"
        },
        "actions": [
          {
            "title": "Cancel transaction",
            "value": "cancel",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Print Again",
            "value": "printAgain",
            "visual": {
              "view": "secondary"
            }
          },
          {
            "title": "Successful",
            "value": "success",
            "visual": {
              "view": "primary"
            }
          }
        ],
        "outputData": {
          "actions.printAgain": "{{ inputData.action }}"
        },
        "nodes": [
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.printAgain }}",
            "expected": "cancel",
            "nodes": [
              {
                "type": "abort",
                "nodes": null
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.printAgain }}",
            "expected": "printAgain",
            "nodes": [
              {
                "type": "subJourney",
                "name": "labels2GoPrintLabel"
              }
            ]
          },
          {
            "type": "condition",
            "comparison": "eq",
            "given": "{{ outputData.actions.printAgain }}",
            "expected": "success",
            "nodes": [
              {
                "type": "subJourney",
                "name": "labels2GoSegregationPrompt"
              }
            ]
          }
        ]
      }
    ],
    "labels2GoSegregationPrompt": [
      {
        "type": "condition",
        "given": "{{ outputData.parsedBarcode.Product }}",
        "expected": "TSN",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 24 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.parsedBarcode.Product }}",
        "expected": "TSS",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 48 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.serviceValue }}",
        "expected": "TSN",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 24 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "condition",
        "given": "{{ outputData.serviceValue }}",
        "expected": "TSS",
        "comparison": "eq",
        "outputData": {
          "segregationPromptDescription": "Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
          "serviceName": "Tracked 48 Return"
        },
        "nodes": [
          {
            "type": "prompt",
            "title": "Complete {{ outputData.serviceName }}",
            "visual": {
              "actionAlignment": "left"
            },
            "description": "{{ outputData.segregationPromptDescription }}",
            "actions": [
              {
                "title": "Cancel",
                "value": "cancel",
                "visual": {
                  "view": "secondary"
                }
              },
              {
                "title": "Add to basket",
                "value": "addToBasket",
                "visual": {
                  "view": "primary"
                }
              }
            ],
            "outputData": {
              "actions.addToBasket": "{{ inputData.action }}"
            },
            "nodes": [
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "cancel",
                "nodes": [
                  {
                    "type": "abort",
                    "nodes": null
                  }
                ]
              },
              {
                "type": "condition",
                "comparison": "eq",
                "given": "{{ outputData.actions.addToBasket }}",
                "expected": "addToBasket",
                "nodes": [
                  {
                    "type": "subJourney",
                    "name": "labels2GoAddToBasket"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "labels2GoAddToBasket": [
      {
        "type": "complete",
        "basket": {
          "id": "{{ outputData.serviceName }}",
          "Service": "{{ outputData.productResponse.Service.DisplayName }}"
        },
        "transaction": {
          "basketItems": "{{ outputData.productResponse.BasketItems }}",
          "entryType": "mails",
          "itemID": "{{ outputData.productResponse.Service.LaunchItemID }}",
          "quantity": "1",
          "receiptLine": "1",
          "transactionStartTime": "{{ FORMAT_DATE(NOW(), \"X\") }}",
          "value": "0",
          "voidable": "true",
          "tokens.Dest": "{{ outputData.productResponse.Area.SourceAreaId }}",
          "tokens.barcode": "{{ outputData.TD }}",
          "tokens.afterLastDespatch": "{{ outputData.afterLastDespatch}}",
          "tokens.carrier": "{{ outputData.parsedBarcode.ClientAccName }}",
          "tokens.destination": "{{ outputData.productResponse.Country.ISOCountry }}",
          "tokens.country": "{{ outputData.productResponse.Country.CountryID }}",
          "tokens.destinationAddress": "{{ outputData.parsedQRcode.SenderAddressDetail.PostCode }}",
          "tokens.destinationAreaId": "{{ outputData.productResponse.Area.DestinationAreaId }}",
          "tokens.pipFormat": "{{ outputData.productResponse.PIPFormat }}",
          "tokens.prepaidAmount": "0.00",
          "tokens.serviceId": "{{ outputData.productResponse.Service.ServiceId }}",
          "tokens.serviceName": "{{ outputData.productResponse.Service.ReportName }}",
          "tokens.weight": "{{ outputData.weight }}",
          "tokens.firstAddressLine": "{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}",
          "tokens.town": "{{ outputData.parsedQRcode.SenderAddressDetail.Town }}",
          "tokens.TandTCarrier": "{{ outputData.productResponse.TrackAndTrace.TandTCarrier }}",
          "tokens.TandTType": "{{ outputData.productResponse.TrackAndTrace.TandTType }}",
          "tokens.TandTSvcID": "{{ outputData.productResponse.TrackAndTrace.TandTSvcID }}",
          "tokens.SenderName": "{{ appData.device.branchName }}",
          "tokens.SenderAddress": "{{ appData.device.branchAddress }}",
          "tokens.SenderPostcode": "{{ appData.device.branchPostcode }}",
          "tokens.Label": "TODO: AWAITING LABEL PRINTER",
          "tokens.tokenIdentifier": "n/a",
          "tokens.versionNumber": "n/a",
          "tokens.customerRefNumber": "n/a",
          "tokens.clientAccountNo": "n/a",
          "tokens.clientSrvCode": "n/a",
          "tokens.receiptReference": "n/a",
          "tokens.APTransactionReference": "n/a",
          "tokens.paymentCode": "n/a"
        }
      }
    ]
  },
  "nodes": [
    {
      "type": "choice",
      "title": "Mails",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "choice",
          "title": "Accept from Customer",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "acceptFromCustomer"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Get Estimated Delivery Date",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "estimatedDeliveryDate"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Letter or parcel",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "abort",
              "nodes": null
            }
          ]
        },
        {
          "type": "subJourney",
          "name": "readabilityTest"
        },
        {
          "type": "choice",
          "title": "Dangerous Goods",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "dangerousGoodsSubJourney"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Collections",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "collections"
            }
          ]
        },
        {
          "type": "choice",
          "title": "PPI Bags",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "ppiBagsJourney"
            }
          ]
        }
      ]
    },
    {
      "type": "choice",
      "title": "Banking",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "info",
          "title": "Everyday Banking",
          "params": [],
          "visual": {
            "view": "list"
          },
          "nodes": null
        },
        {
          "type": "choice",
          "title": "Manual Cash Deposit",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "prompt",
              "title": "Debit card reminder",
              "visual": {
                "actionAlignment": "left",
                "transition": false,
                "view": "medium"
              },
              "description": "Remind the customer if they have the option to use a debit card instead, the deposit will reach their account quicker.\n\nTo continue with the manual cash deposit, please confirm that the customer is present and they have provided a personalised deposit slip.",
              "actions": [
                {
                  "title": "No",
                  "value": "no",
                  "visual": {
                    "view": "secondary"
                  }
                },
                {
                  "title": "Yes",
                  "value": "yes",
                  "visual": {
                    "view": "primary"
                  }
                }
              ],
              "outputData": {
                "actions.inputGroup": "{{ inputData.action }}"
              },
              "nodes": [
                {
                  "type": "condition",
                  "comparison": "eq",
                  "given": "{{ outputData.actions.inputGroup }}",
                  "expected": "yes",
                  "nodes": [
                    {
                      "type": "info",
                      "title": "Select Bank"
                    },
                    {
                      "type": "choice",
                      "title": "NatWest",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "NatwestManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Lloyds",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "LloydsManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Halifax",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "HalifaxManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "TSB",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "TSBManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Yorkshire",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "YorkshireManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Bank of Scotland",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "BankOfScotlandManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Clydesdale",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "ClydesdaleManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Ulster Bank",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "UlsterManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Bank of Ireland",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "BankOfIrelandManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "First Trust/AIB (NI)",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "FirstTrustAIBManualCashDeposit"
                        }
                      ]
                    },
                    {
                      "type": "choice",
                      "title": "Allied Irish Bank (GB)",
                      "visual": {
                        "transition": true
                      },
                      "nodes": [
                        {
                          "type": "subJourney",
                          "name": "AlliedIrishBankManualCashDeposit"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "condition",
                  "comparison": "eq",
                  "given": "{{ outputData.actions.inputGroup }}",
                  "expected": "no",
                  "nodes": [
                    {
                      "type": "abort",
                      "nodes": null
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "choice",
          "title": "Change Giving Lite",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "choice",
              "title": "Danske",
              "visual": {
                "transition": true,
                "imageData": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAEcAXgMBEQACEQEDEQH/xAAeAAEAAgICAwEAAAAAAAAAAAAABgcICQUKAQIEA//EADsQAAAGAgEBAwkGAwkAAAAAAAIDBAUGBwEIAAkREhMUGiE2UVhhl9cVFnV2tdEKFyMnOTp3eYGht8H/xAAcAQEAAgMBAQEAAAAAAAAAAAAAAwUCBAYHAQj/xABDEQACAgEDAgEHCQQGCwAAAAABAgMEBQAREgYTIRQVFyIxVdQHIzIzQXKUlbJRVGGBFjY3c7G0JCU0NUJDdXbB8PH/2gAMAwEAAhEDEQA/AOp/z9sa/C+nGmnGmnGmnGmnGmnGmnGmnGmnGmnGmnGmnGmtoGufSY2L2U18ZNnWCxdYqyqSRTV/r1mer3vNiqY5wlccBk5xa0gZEgCiUqMpwHq0xCdeaqPSJVSjycJSc0QeXyXV2NxmQfGS18nZtxwR2XSjRe2FikOyse23IDfYElQASBv4jXZ4nofKZjGRZaG3iqtSaWWGM3rhrMXhYo4AMTKfEHbZySPHYa+O/wDpJ7f0DUT5f5iKpbspCJqkyGaWjrdcUHuqMwlUrOKIIDLCos4jfWZN4p6cChzPZstCISlNhavT5UFYF9x/V2HyFyPHhrdK9MGaCrkqc9KScKNz2TKojc7AkIH5sASFO2osp0Tm8VUkyDLUvUYSomtY23FcihLEjeUIRIijYbuyBAXUctztrWXzp9cjpxppxppxprm4zH3CWSOPxZpwRl1kr21R9swpNyQmy4PK9O3IsKDsBHkkjKlSX4puADyWX3h90XZ2ZjllWGKWZ9+EUbyvsNzxjUu2w+07A7D7TqatA9qxBWj4iSxNFBHyOy85nWNORAJC8mG52Ow+w6uHaHW6yNQ75sTXK3QsILGrBwa2yThjDqN7YsKnePNEmSYb3QaRCJWX9mPaLxR5SE9xR4xWMCwXgYtPF5KtmKFbJU+55NaVni7qhJNkkeI8lDNseSN4bnw2P8NbmXxdnC5GzjLZiNiq6pIYWLxksiuOLMqEjZh7VHjvqg+WGq3TjTTjTTjTW+a4P8OjqR/qO2l/t/ZlYHo/99Pp9no5wVT+0fLf9t1f5/6VX8f5ez/069Jvf2Y4T/rt3+XjZ/8AunQeUuiiU9SCNuJ60yq3npdbTKrJazzDsxVSBtSxkliXvqYect+VzeU5vxDQrPBlYmSuL4UjGBOqccDdeCMR9NSjYWk6pxQrOAO6AzSGRUO3Pi3GMuB6rFU5bkLqL5Pmslup4o/Wrt0xk2mRz8wZFRRCZAzBAdyy8j7FLDcAk6t3RrXatmDp+wS9pvrp07WaX2rb85a4xfnUq2Jmkdhtlw2ICUMrnG6dp+BuTOpTKIlIUg0TzJ3FxwpULAOwTkapEaynINLPZG1J1BYoQZHqKSGrTgeXH9M4+GSatNMA6yXLk6uD3kPJIlXYLw2IIkDW3TmKoxdN18jaxWCWa1bnCZDqS/NHDZgiJUJTq10LKFO4Z3B5MrMeSmLhNNsdJtWorvz0biYdXFLp4PuQZQq+9oRRc0l871vmTq43UyxSWuFWvEsclcjLg0uZnISIpCUvJTlIkxIiABXmr162LEZvKy4DrIzWbpnwwvrQnvwQwZKFVovNEtpIVERmhkXly4kkk7njxVcM1g8RF1B0WtepRWDMNTOQhx088+NnLXlgdqrTHurFInIN4qR7Bsys7WNSTdpVfXVjsfpWv/Tm1didLOFz7TVCzWpB110N9/RxRVDNab8xy5DOne0npuwoPWwgoOI6mjiGPoCFpSNKj+y2/Dcq1bz5yh0lW6qj6jykt1amMuPUnWk1CVbclWN4WgSrG2wE+5kMrO2xJPJgwsKMOAyHV9zpN+msbDVE+Rqrchkui4orJM8cqs9h0EnJNyeG22ygcVA1h10xqk09eKG2cUy7GlEn3XjFsxqO1NF+oLZsmrKhzqhJTCxJ3iOBaZJFGiUz9W6FOJRzavdFKlnRIGpaUBElWKAO9z1PdzEd/FiLz1FhJacktuTp+tFav+WE/NRyc4pXjrhSmzKgWRmZTuQClF0njsLNjcq8yYefLpdSCnHn7c1OkKgUmR4pImjD2CQd15llRPV4gsWlO9dANVfg6fNqINStaqgdZjdyyOSm/dJryxaurlvrGmdsBjJGmKMnSiXLoPLoe1kG/apx7nguQrD30RJqktqCgYocHkHsr1HVbL5K4kNDuRY/N0PJMpTD15OcskojiWeGZyOACfNqI/Zy5SbeaxkNOx0lZjxGOpvLlYYZr+GvG5jLnbswGJEDSyyRzIm7O0mzSbt4tw9TYr1p9aag1ulG7O+8jq5h25szYO3WSk4UDAzXundJTW2pq6TqJZdTW2uKVxcLrlWQJDa2jT8hDB29vXNji9KnQ53QsD5z3ROTuZKLCYCOy+Iq46pJenJ2S7nA9uyRDSZlKrRi3PlMkbeUMysqBODSJc9cYqnjZc51BJWXMWshb8ihC8np4TjBDvPdCMGa7J4eTxSAV0DBpO7yVG1/9NPTuinDp4WXufNI1prMbkcNpyNeq+Bv7cr3UWuMOjjJXDNPX5wTJmSQRcucWLJDXwaRtYnV0wUkaWc53bcEYa3hK79B1Nmby9RVcJDLmYKa4o5GwcBTS3kppHsvXjUl45exXjCcmkVDu7BG35IUpel8Djx0xPnrMOHs25sj5FWGcutTx9eKNd3O6yJ3LEjb8Ec/QXcDbkTQ3VdpnUiJVBqnaNLO+mzJsNL1NoxrZasNIb7MuilUeWFwZ1NbzePt7nJpM+wYb0yKl6N4azFQWpQ5E4LQ+KcgVK1lh0ndy81zLVbq5mTHQipLjbWboeRXW7quLMEjLFEk4jdVKPtzCndvBgFq+sqWGhpYi3RGIhyNhrkeQrYS95dR4xMnYmVjK7QuysVZQvF25EEFPW0hc7fXn+nGmtr2vXVgltG6sxnUKU6k6c7K1NELGklqR8jY6u5nOnBumEmTmo1bimKbrEjzIQalQKVjeiUEM5awtGuVkGqTgnC5yWS6ShyGVkzEWXzOMty1o6khxtmKBWhiPIKSYHkILBWYFypZQQBtrtMZ1pYx2IgwsmHwuTqV5prEfnKtNYYSzOzM2y2I4wQGKqQgIXwJOva4Orvck7o6fa6UzQGpGmVW24UnRXAh1Mp06uZDarKmwbguNzSVO8mlLwsj4sHqCT0CA5uGqb1K1mVKDmRyc25apdH0q96vkbuQy+atU9zTbL3PKY6rn/mwxLHEgkGwIZuWzBXAEiqw+X+tr1qhPjaWOxGErWxxuDE1DXktRjxEUsjySv29y26qV3VihPAsDGql6mz5Dtaa61PubVrWTaqpqZf5xJKbBdLHYqWU1ytsN0OfpW3tMjrexYMesYHZ+UKHdY2uJChQoUmlgMccpkDWQgludLxz5OzlqWVymJt3Y4IrvkMlftWVrKEhZ47FecLIkYCB1IAG/q7s/KOl1fPXxdbEXcTicxUpSTSUhkYp3esZtyyo0FiHdORJKsCSNlDKAu36W11VLitm49KLkNqKgoAq0NHESqVgdcReYMFeDZ4NOG2bxmPyBnXTt4dDWxAa0oWUYmh7aXBW2FmHK1xzuec5jU+lKdOnm6YuZCwM93jdsWZYZLIeeBoJZI3WBEDMHZxzjZVYgBQgC6xvdX3Lt/CXvIcfV8wmLyKtVjmjrlYbAsRpIpmZioYBTwZCw3JJYltVxVHUNtyoOoK49RuPRGuHC4HK0rhtg6HPKCTHVqB+ulrm7VI28pvRShDKMNDaRPHQxkLHKhrSTkqDK9avABSBTs2+nadzp5em5JrK01q06gmRohZ7dJ4HjYs0TRc2MChz2uJBbiqnYiCn1TdpdSS9TR16rXJZ7U7QOsvkwa2siOAFlWXiokJTeUncDcnx1Iteuo9LqRpKztbJhr9rtsZRdq2wTdj3Bboj88Gcy2KS1JWTD3FZNX1hQSQtXea0KRJ4Clc4gKLKOwnyThe5BWRZHpqC9eq5KLIZLHXqlM0Y56Mtcc65Zn4Sx2K1iNtnYtuqoTuN/orx+47qmzQx9nFSY/GZGjauLdevfhsOqzABSyNWs1ZN+IAXk7BDs3E+IPrfnUnsu7Ifr7VMfp6haDo/WqeLbMrunKVjMtbIsrnLk5p3NwkkvdZjN5nMJC6KRFHpMnikSQIEi9aAJfijIOIUOmatKbI2pLmQv3cnXFWzcvTQvMK6oUWOJYYIIUUAg/VEllB9m4OV7qy5cjxMCUcbQqYe0LtenQgmirvZ7iSM8ndnnmIYoBt3t9mbdieJW1UvWS2YDs1s5sO7wynJXGtxGFPHNhNZpWwSt711nraghzZDWg1TFlEzxKELyyJWspwaJCgmJD2iWKnBOWv+ylpzdnVPRmM814zHJNcilw7tJjsnFJFHka7vM0z8ZRD2mSQuVeNoSjKFJHNQ+tlet8oMrk8m0FKWLMIEyOLmjkkxtlVjEac4mlMgaMgPG6yh1JK8ijOrU/r31EJVRNY2Xr680HQF8az2VZqa3f5D3ayTl/jkDnqJEaypJFXcoj88jM9YncEZyljKle4SZ6OXNCEoCvxT1bse47mQ6chv2a2QW/kKGTrVTT8voyQRSzwMeZjsRSV5YHTu8pQqRR8XY8SAEC6uO6pnx9S3jjjcZexlq2t1cfkIp569aYHiWrsliKZSYvmwXlf2KzBjyD8Lttv3M9q65pelU1M0Rr7SVBKZmurmsqLjElaWwh0nq5M4SN3f3uay+bSV8clSpOI0JhjqmTBMVrDRpTDTSxk54jp+HE2bt03b+Qu5AQLZs35YncpXUrEiJDDBGiqDt9AnYAb+B3hzXUc+ZrUKRoY7HU8cZ2r18dDJFGHsMGlZjNNPId+K+HPjuCQBuAMDOX+ud13Dmr+ETtB0a21zDu9AiQuKBGvCSKkZCMRQVictRgvI8WMHA8gwZ3ciwEOBZx24xjGeeON8r1VWZTg7G6kj/bo/sO37tr25fkZmZVbz/EOQB283v9o3/e9ff5oJaXvxQD5HyL6j8+emCp7jsfjo/h9ffQxP7/i/Ln+L080EtL34oB8j5F9R/b+/w49MFT3HY/HR/D6ehif3/F+XP8Xp5oJaXvxQD5HyL6j+39/hx6YKnuOx+Oj+H09DE/v+L8uf4vTzQS0vfigHyPkX1H9v7/Dj0wVPcdj8dH8Pp6GJ/f8AF+XP8Xp5oJaXvxQD5HyL6j8emCp7jsfjo/h9PQxP7/i/Ln+L1580EtL34oB8j5F7f8x/Z/z6Pjx6YKnuOx+Oj+H09DE/v+L8uf4vXjzQS0vfigHyPkX1H49MFT3HY/HR/D6ehif3/F+XP8Xp5oJaXvxQD5HyL6j8emCp7jsfjo/h9PQxP7/i/Ln+L080EtL34oB8j5F9R/b+/wAOPTBU9x2Px0fw+noYn9/xflz/ABenmglpe/FAPkfIvqP7f3+HHpgqe47H46P4fT0MT+/4vy5/i9RWYfwl1mxFsIcjd1oItCevLQ4KLpWQEiDkxOpPwZkQrEMxnGMJshyHsxntHjPb6M4zJH8rlWRiowk4IG/jej/aB9lb+OsH+RqdAD5/iO52/wB3uPsJ/ez+zXekiPqpGPy8y/pqbnhUn1kn32/Ude8x/Vx/cX9I1IeYaz1i/uftTDtJdZbT2in8eksriFUII+4PMfh4WsUkcSpFMI9DUoGwL04NTZkZC6RpVSjypenD5IQoyXkZ3hlDtMLips3k6mLgkjhlts6pJNy7amOKSYluCs3isZA2U+JGqnOZaLBYq3lZopJ4qaxs8URUSOJJ44AFLkKNmlDHcjwB28dta63TrFTuOwhRaEk6VnUbbq1bo798neXI6/q54TN8OLb8PCqS+SIbRyoObUjR33RQfnwSSEJZilScQQWYYDo4+j6s04qxdV9OtZeTsxwtLbj5TcuCx8nrABmfZQPEliAoYkA83J1jfhhNqfpDPx1VTuyTr5HN24ePNpe3FYZyqpux8AAB4ke3W1PX69q52cpWtb+qR1Peq5taKt8tiy5YkG3uAUS7AwHt7q3mCGNA8NC8lW0PCHJhuEbohVpwnHBKwaPlMhQs4y7Zx9tAlmpK0Mqg8l5L7GRh9JHUh0bYckYHYb7a67H362UpVshTfuVrcSywuRxJU7ghl/4WVgVYeOzKRudtXDzT1uacaaxv282YienOt1r7MzphkUnidRsCWQPbDEwtopE5JVb21MYCWoLwvbG3J4VDsScLCtemL8Es3sHkfcAKyw+MlzOSqYyCSOKW3I0aSS8u2pWN5N34KzbbIR4KTuRqrzWViwmLuZWaKSaKnGsjxRFRI4eVIgFLkKCC4J3PsB+3VzwaVo55CYfOG5MpRt8zi0flaFIt8LyxKjkTSkd0qZX4BhpHlJBCwBR/gmmleKEfhmDB2CzpTxNBNNAxBaGWSJiu/EtG5QkbgHYkbjcA7e0a34JRPDDMoKrNFHKAfaBIgcA/xAOx/jqU8i1Lpxpqoro9VkH4+l/TnXmzV+sb7h/UuoZ/oD7w/wADqeRH1UjH5eZf01NyGT6yT77fqOs4/q4/uL+kakPMNZ606df7+6E3N/LVYf8AetXc7HoD+t+F/vbP+Rtf+NcZ8oX9Ts3/AHVX/P1dY0vesPWan2oJkZYN+tZkcdlmv6ZpRsSfWU+JvmYu9QAlKOP4sM6US4MfcTmRSY2ZlxETXqW5SP7VSJCjyixl2MWU6MgyyyydP5IvFfLl2ygmQSJOSJDW7MHdUOA3ZaZVYeozEE76ljGdZTYiSKHPYsd2iEVfNMkD8GiAZBY8qsdtmj3Qy+Tuyk8lVW2ZcVE+yleA6EugjTQ7ttBrSbb9wQLW6vYLrq9sEkvWwp012BP2SWQZrtJ4eaxbIwjtOTxl5kq6wUImobYa4pmkqLqG1WtaOW/myx/TvPvkExmSWnUsZKzPkUeKhXgkrQPDO9VI7bSmrHKkYrnkHCFjMHAfVG+RjHQWATGtk8abdypjYYcdxtXppI7EwsV47DT1BEbbwSnyoE8Cw3geMsoVK97Ma2dTPp4wAUZ3+ouuNiHbYKK2JBNvNzoztdErTRxKqRSNqVRtoaLEsI+GvURejUTksdDxs41g1zcmbRGpi3tKcuJjMl0z1DYEnT96zj0x0tefEYaXEy1WmtiJxI7164nSWPkoUc+PElwCVIlp+ccZ1J0/Bv1HXr5F8hDYizOWrZKGwsNJpohGkU0zRSROvIuQpblsWbw2v2oqJet4Oo91aK+tvZ7cqMV7Qdn64pqygVObOWZVcTYQz6o3Rc+iKaY25lAADCyOpFaNClGlailityWmoFCxXlQDRuX0wfTnSVipi8LLYyFTIm1Pdxla1LJ2LaLH68i777SEMx3chVXkFHEz0aEmd6j6vr2srmoIKF/HGtDSyU9aJBLWZpF4DkoVu2BxUKo5MwAkKuuK8lsi05f0MOsTWlpWdOLfFq5tvfuslfTuzXw2U2G51lXFh0uui5MzlaoopdJntKdJHQBjuuxk/KXKVCSElGhSJibSGtUh666Os1KsFPzpiKGTs16qCKutqzWurKYIR6sUbCJCEXw5cmO7Ek1lue3J0B1dXt2prpxuWu42vPYbnYatVyFRYRPKfrpBu28hCkggcRxBOTnStuaw9vtpn0Wy1lWDQs41Dq2t4rR/T5bJfI4kzOVdOkBi/ZtHZSllXNTJsPmYmK0pccQlFvMLrlGqaVB6NSueo+9K6zqmnWw+Jj82Vq2Qgy9qzLe6heCKaRLKTy/6rrK4d8d2QCXY9uaywcKQI5FWx6WuWMzmpvOtm1j7OHq1Y6HTqzywwtWaCE+dJ2iKJkTKx9VWMkcAZCy+vGT2W+eZ69Q0401UV0eqyD8fS/pzrzZq/WN9w/qXUM/0B94f4HU8iPqpGPy8y/pqbkMn1kn32/UdZx/Vx/cX9I1IeYaz1Qe0GttZbe0RYGudyJnlZWtmJGZFKE0edzWJ4NIYpKyyxBhE7ElHGIxBd2FvEaIBQsmpwmkZ7MG5FjfxeSs4i/XyNMoLNVnaIyJ3EBeN4m5ISOXqu23j7dj9mtDJ42pl6NjHXkaSpZCLMiSNEzCOVJlAdCHX1413KkHbcbjfWtw/oV6ir2j7tPdtbwSGImIy2tZDnrca4lUXcWUBQUwmNa0lu5BI2kxIHCQaMkRAQpv6RQisYDkPSDrnLK/djpYKKYEss0eGprKjnx7iuUJD7+PI7+Pt31Qy9FYeaE15Jsy8LKFMT5zKPGUG3qGN7LIVIABBUjb+WssbL6bGn9na1VjqcurRTEagpB6j0ppdNXUslMKllVzGLZcxss0iE2aHUElJlhKh6eFy57dXB1VPTo6LnZ7y4uZ4leKqr1LmKuTtZdLQluXkkiutYhinitQy8e5DNA6GIxEIihEVAiKEj4oOOt+101hrWNq4l6napUXjlppWllryVZYuXCWKaN1kEg5uS7MzMzF2JfZhW9edKHXKCXPUGwrzYO0lx3HRjtJHKuJpfOyFjWyoY08qji6MPDInaJO4Hx5I0KULgcoNC2NDe4K15SI9xcVpbeiJI2LHVeRnpXMdHWxVKleSJbMFDG16gcwyrKjl41EpcMoA5OyheQVVLEmKDpfGw3qmSklyNy9S7nk097I2rJiEsbRSKsbydrZkZgfm9ydmJ3CkZS1JqnUlJ3RsjfcGSPxFg7VvcBkFtqHJ7OcWpW5VtH3CMxkbC2GFALZCi2tzVBWlEmGhVn5LOFkGQdmau5lrd6ljaE5jNfEx2I6gVArhbMiyy9xt/XJdRxJA2HhqyqYqlRt5C9WjZLOUkiluuZJHEjwIY4iqMxSMKrEbRhQ2+7bkDakzemprCdQ21OuA2yafy03IuOdXrdSbEuVYeV0+sRyirrJD467eTZMYGs1VDWTyNtIKOLSFFqABMFlQIWN4dTZQX8Vkg0HlOGpwUKR7I4LXrpKkYkTf5x9pn5MTuSR4eG2tN+nMVJj8jjGhk8kytuW7dQTyhpbE80c8rK/ItGryRr6sZVVG4QLv4SCzen1rpZ811vtFY2y2IW3qklamioLYr6UqorPkUWa28DZ9yZS7JyD001hLimAPDnGJOgcmtSFc8pwEkopDIErpHW6hyVWDJVFaGanlS726liJZoDKzFu/CpIME6k7rLEysCqEktHGUzsdP4yzZx114XS5i0EdS1DLJDOsQUL2ZXjK9+Lbf5qYOnrPsoEjhs3eUerrTjTVRXR6rIPx9L+nOvNmr9Y33D+pdQz/QH3h/gdWJHUihBH2JCrL8JUjZmtIpK74DPDUJ0RBJxffLEMsfcMAIPfLGMAuztAIQc4zmByC7keILMQf4EkjUiAhEB8CFUEfxAAOuZ5jrLTjTTjTTjTTjTTjTTjTTjTTjTTjTVc2cwu0hYUiJnSeWKSndOqMK8dMn7pAETgUIzvqjiC89hh5Qe7geR573bgOQhFnE9d1RyWOwKkb7E+O6n7Af2HUUqllAUbnkD7QPDY/t1//Z"
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "Danske_ChangeGiving"
                }
              ]
            },
            {
              "type": "choice",
              "title": "HSBC",
              "visual": {
                "transition": true,
                "imageData": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAEcAXgMBEQACEQEDEQH/xAAcAAEAAgMAAwAAAAAAAAAAAAAACAoGBwkBBAv/xAAvEAABBAIDAAEDAQYHAAAAAAAFAwQGBwIIAAEJExIUFQoRFhhYmNYXODl4h7e4/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAcIBQYJCgT/xAA/EQABBAIBBAACAgwPAQAAAAADAQIEBQAGBwgREhMJFBYhFRcYJTE4VliVl7XUJCYoMjM1NjdRdneFh7bWt//aAAwDAQACEQMRAD8Av8cYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYzVdoXrSNINxTy6LjquoWh7N6mDdWhYURgDczmN7ZdEcBS8rLiUiObDsiP6e4s8lu2vb9l0v0n90h8mNsbmop2Dfb2tbVsMrkC+xnRYLCqzx80G6SUSPVnmzyRqqrfNvft5J33XTONuReRzzYvHmg7rvkqtYEljG0zVb3aDwByfckck0NHAnEiskLHkel52jaX0G9au9T/HTf8f8Aof8Azsaj/wBSNN/3nzE/TjS/yv1f9P1P73khfctdTn5ufO/6oeQP/PY/j/0P/nY1H/qRpv8AvPj6caX+V+r/AKfqf3vH3LXU5+bnzv8Aqh5A/wDPZl0J2/1Lss6hF642i11sCTOfg+2jsJuytJWdcfdP2Qpt8AgFJn5BX7goSHDUPjb5fM/fsmaf1OHSCan1wdo1qzOkWt2KisJKtVyR4NtAlnVqK1quQIJBCK1HOa1VRvbu5qfhVO+u7RwTzfo9U+93ThvlXUKMZGhJc7Rx5t2v1QzOGUzRPsbaoiRGEcIBitG4yOUYSvRPEb1SRXM7kVY4xjjGOMY4xjjGOMZB3fffimPP2mXFnWe5/Nyo30QF1RU4t+g0ldoSpmgiooxY5qIu/wAJFQn3jF1N5w7YuxsVHPGaSTM3KTcTick0/dd1qNHqXWNk72yC+Y62tG9rZNjJa1FVg+6O9UcXkx0uW5jhxhuaiNLILGjHsf0xdMPIfVLyEHS9KB8hT1/y03dt2mximo9MpDlIxsqWjHh+fuLD0SQa7roJAZl1LAdzjQKevurqprceR9tyT073s3AM7ktRFqA7T1OOxUlX71u6RgsYgyVvVm9BQmCivvVXkVERZ4p0Wj5IeS6lTaVY5zxzInc9dvpO6gHjC1kcjbltRdraKyj2OsmjPgPa5IUaGlpXvDEhj81fHZHf2KErCJKbJT5xTumK469eOurQKfow6ZuBYPT/ACJ+l2+m851d3H22OUD9mu9kdoW5x7HYNjm/Ltj3Eq4jo6BY18qI6jLSP+jY6sWuDFVM5seqPlXYfnvYH7wx/svO9Y5uXWQrqyF0MFiEcfrYrO065snJkggzYS5k1SXzEGEm7MPOxLRcwHbjyTKSRmNR7yTxrP0ad7we2brswqtgWCoikA9UV6QLBWNRjJTGo5RFRrBTRMcYTRkZIjx7h9EvW5qnVXq32KtUgazzLrcAZNt1AZXDi20YajA7bdQbIKSRKoZJyDbPr3lkWGsTjjr7AsqJIqLm4gBrnrnbm1dtxelKTirmVTeUOO/oTx+tASBEIZpdFJRKCvxqIBIyFSVwXJlHGOXWPeaDJmi8KPWDB1o9DQ2my2kaop4zpMyS76k+togCaqeyTJJ2VAxwoqOIR3+LWMR5HsY60vLXLeh8IaJdci8jXYaTW6USeT18SzrOeVr/AJKlpYXmwllcWJGOHDhCVO6NLIkEjwo8qUC2nth54Vh5xeMGzAuCuezd1Gv4fCtk3TgjmOkRs+O2Qp54zYxpZNTt7GojHX3XakcFNXOLjpxh0ZJuHRhbNxhaDZNHgcfcT37a8jn3T3UJ5t0zuGUSSLYKkgkivavsix4xER0YbHo5r09z3OMquzhPwp1U7b1hfEG4iJt0MMXjKMLlmq1fjOT6rGji0thw/wAgRJpL6MYbod7c3cJ6hupUqO+O+OR1bFCKuYgX5r42ezbLYxrHdW9p5C1HX+zboCa4sgosi0Y3W2bp9JtgZpfP40GlpopYdYI5994ITzHH62/WEo+tsbynFXK4tnGGg2Aow7EJnjGku8Riuhsb3VzUTswdi1qK4wGo1h0RTx2onsCHQOv74fc/guZY8t8Q18uz4bnylPc0ovdMsOMpcoqI0JnuUkiZpxzEaKstTOJIqSPHVXJSOWFZWVgm1rQglIVfY9z2iewitZ1JBJdZlhydRgVKpxyDwQAQlErOqCwTEobI4CQQt+/zYhxpAo7xb9oMGTp0okgpOmcp8j9Zu+updOaiA98bIt1rGtTpJC6usMLbakQsAm1ew66FIylWZnqIhYmSn6GEoUmMbxTZOYoiRF/k8ezbMb02edtmM0Dth7N+ZWkFpL0nsxtdFIJaw4UNNyKDg4daVqG4QMMpinAdzY6dQwWeIVp+XYnQZUUhP1424IhTYc2zRWEFGL1djPT2V9q/LzUMzWwO/tuIbEndxVPGb0q56BiVoWbHp3UUzemR8Un0bldVQWbRciAkDgAVyFLpGPldtG6ZBJHtg8ZOXLGb3hnoxotYOrki3ViO1FNFdWYfionMbmyl7IbF4aVwyCpYRaYIlvsTUWnTpxJouyHV+fFDpsTISmLjhwB0+kgRu/YzUGoPsZ5ob4SCWxPVzbGET6VQcO1kUhjMhAWDUUhwjzt2iP6kAcLc8Pr0lJwTR+7HMipiMNTA0K7Lg2xdyxWOh8HzGU4/aWrtzoLuXKpNt+c7nWE57erUlY0cGPhFVF6sEPs8xURrsA6fl/3Gyg/5dJvLq9fGC8jEyIutKzsgnHU3H2VN6I8u1u2w9skyNpN862Z5rTzwDeKsJWieqjiwQOeX5JYftRsuC8pZAzlWUY8xJg7CZ6xPh17r09bL0+UtNwLWJrJtaSMzknUraZGn7tC3WdGa2bf7VaBiwPpKPZFgkLQbTGgQKmZVQWUddVa27XZeo67NP9Md/nJvH/bKZ/7Tq7m29O/9q7n/AC8X9pV2V7+Mp+L5xt/rJX/9J3XLY28di6wVnrDaRrcLACRokmDWj8lihpvgQeTl6/wzXDxGJCsXLN8Qmz96yweRlQS8HkQJAdjK8C4BuAcnxdmtyn65Xa7ZG2pAEpSBUEiMZqPfNe9FcKLFEjmPJMe9iPjqJ7CAeP5pCgaBxx8NOmzUuZ9x5n0qu4BdZxOTIdkO1p7yuK6LH1qPFc0VhfXs1QyI0XXI0aQ6PcsnR5US0iy1o3QLQtoGrm8df0/lr6EkoLZdea/xEvWl/rySQSGahbPkgiXWVMq4TPvcoM9AzEeCi7M9FomEejRBoGGAB8o/Jc3hQsPd9SAfIzcVcH2ekkhWEGjilr7tZBzzA2MgUqwlwEO/5J4ZQwxmHjRgvGIwQgF8vIVxCsf7xyD3/wDim6P1Pw9m0/a+U72BuHFgqiqqtdsdMqJ9Dp+v7c+rjpsse01+VZ3Uisu7yyjzJ1dZWFrPS0p2x4UGWBauVUV0zvdj/Sr2m/4Q/wDRtQ82zmf+7XZP9n/b9VlefhnfjucKf8kf/JN9z57UEjU0mU0isVrkOfPz0+fFi4cGirZ47khGRuniSYhsEQH9dvcyWT3tHtpk2/Yqmr1irjlh9H140drYthNsIcWqFINZGkCbCHE8kkrJRyOE4LmKjmPY5Ef7Uc1BI1SK5rWq5PVDu97qGs6hsl7v86mrtKrqecbZ5eweh1K2meBwZobEMlhAyo8oRFiLBcIzp7jthjAcp2Bffm2Qi+y0M8Et043t1MAk4vkZ5ybdozA0GS+RZHDugLEyECJGcTduGculwcX21HyaWjW7FgbLIuF0fzGeKsnO9FNYBeRqGsBskoEy6HGa2dIjs8WOJ3Xxa53fxKZg/BhzsaMZiteRg2tcnfxk86WvFd3yzu9pwpQ2ut8ZTLo5dWqLiQh5QIitYhiAGrELArpMtDyaurknmy62vLHhyZhzCcra1HoPVW/wn9L7UM2sLb+kJlq641N86n4ihQWpb+IWONiRd/r71XMddXmpfkhakSkKUdx7M/IOqwZ4TLEM+wTEx38vjkPz2RNkldxp3V9E7z+u9y6ieieuFDW2Ri1Yt9+fN/1HpeKL0TtylFqmmgSOsKvmsiPirYlkCmlXHnTtnX1Xg5HhKDtlAh52QtITPoJFQTGQ7qbbZaxfRXyn2gDSrT/xr7mvjPLsR7K5KyBoazQ1q22v2RizdpXtfGbZ1gFhI/dLUZjbFVt+ps7+yismZfHnP088pK/YyOzic18a0fmTuzQxy+NbqD/VFwS5PRfbiMgmk61m2sryaPpmEsW4YXFawjCcah9SFQTeDsyVTCXE7juL+2qkWis0kCljRwEHYy1PtVuF4C7KXnForaMOov0TvEPUeUhFPte9cim/JyG1G3lijPBqYl1CQq1WkXDNpUe+6xjhQu1WGuJQPLLDWaMuFOy7Gdj9ptWaZ3HpqSUbeca6PxE91g9HEWeaDOUwmUs0HKIWcwY2s2edgZaC+8c4s3nbZ2PIj3hOOSMYcihw8BKYLY9cqdrqZFNcx0PFP2ex7Va2REkta5AzIZla70Sg+bvB/i5j2OIA4zRjGCSVuFuaeQeAOQafknjW5Wqv6tXR5MY7SHpthppBAksdb2SuYYCWdFZoAKyI3uBJiygQ7aqmV13W1lnDq9aU03n4e7mbOyjbmQpp01jrHJndOWmEG5Yo3yljalYdjIpBQK73PPq2eu8kGkorlwUUWiCueckIm1qyUG2GSrpqNQvDu17FK2g6fYj6PSHVNkEf1XX3yr1HEhgV6/fT8DZEBxFWN9ch5lr/ABnP7P8AURyInxJOnzhqh4KqnLyN9uSmFyBpVjLRXcaL9CdzSbsGxWY46IuifzzVG1ihNS6Twpotc3cPfq4OJXoV6GXF6EW+rOZ2spGq7jar5jU1SD36rqPwIC5Uw+tddXtNtgemZtNBstK5a4aIOCbhFBiwaiY6MCgxkPb1vVtvNqsyaqx4EdXsrKsb1cCCByp3VV7NQ8syNasmU5rXEcjWMaKOMIR9H+lPpS4/6VNCZrWsDZcbXbsjSd53uXFYG12izCx3iMbPMzqzXq5xTDo6IRyihCIWTKNOtpljZTIcVvZM7p+dxazqxlReEz6FF25yLygE57akhJJt9WPSieXeOaLhs4QUWZkB7xJwOKDnLsaSaux7ty2V1SvsJtVNjWNdJLDnQytNGkhd4kERvdO6fhRzXNVWEG9HDKNzxka8b3NWwO36hrG/azd6budJA2PV9igFrbqlsw+6HOiG7KrHoitIIwiNHIiS45BS4UsIJkM4JQAmZa2sX0qZeo3lHf1FNo99vuvh/gCHd1JG2yq+dqqqbIU4zwmNXD+81XLtk5WzwUkUd+Rd7D11M1HKzgBmzMLWal779szja6ogxv44r9hBOqwJ/WPa+qkdNr0c7+hREUksb3fwFEc8r/lkadeGuv8ASUnQ71scZcr2Fz/JtZ9s+cHfLZ/d2l+XE2/OFrO3ECPu6xe9zYmvTI4FXaSOBDgxku3vrE6PeSXkbENE4q0te1mwiYbWSoR2mUMJ/CRC1EIJIdYu4VBnPfWSS5hwipk0l8zb/sUJ9drAgaiUd+9cSKRONOMoWkQ0mTEFM2OUJElzETyHCG9EV0GArkRWjReyHkdmklOTuqMEjBNpp1wdcuz9Umxv1zXXT9b4WoJ7ia/rhH+mdsssCvGLaNsYF7hkmParnVdQhDQ6MBFax0iwJKnG7MSmLRicxmRQqaxwDMIbLwZaMSyJSkQPkEZlEaPMFxZyPSICWbuxRoGZGOnQ4sJJNHLAiwcrs3jdZusonlK2c/8AMCklA0TM6mZUJMKVqSV0WNDRmOjqXklcQ47Uw+PwrIbnDQTKuSgZ1D2oaJZhhGUZGIBk2QHIUNyFINO2LXtJjMJuLTfUPYeUgpxsBqrrfec1i7BAVGZhcVHVjZspjots/cFGw0FIJrFzZYQwbk3ToigzHu27dJ+5cPE08XCyimTGebe051E2CPC5Vfeq+uF3SgIDbxgLJLeo+srKPCI21eviTWPCzEzjBogwBtiJMk/biWjhJgi9IPnSbfFd24UUYzaQmqqvAV1jT4Kt4CFqTGPP4jjVomHx4dXWMTKN3LUnGMYQzHIxnqPEWr142fhehnQ143duUXDZRNdXHNjMAo/VPV3WTCRJ62620Hr2nL8x6ssTo+nq8qfCUKCenfQpSRYwKOgMTeYzp+/6H5kunOTLp676bdpdOVvrYzfnGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjP/9k="
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "HSBC_ChangeGiving"
                }
              ]
            },
            {
              "type": "choice",
              "title": "Lloyds",
              "visual": {
                "transition": true,
                "imageData": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAABHCAYAAACOC/A9AAAAAXNSR0IArs4c6QAACg1JREFUeNrtmndQFUkex3X3dK/ubquuLtTV1d39ccGAIMpKMICiBEGSiBJNZ0B5jweCoCiKrsASVtwlGEqRULuIAicFomsCDLiigui6qICrJ8iKgBhIj/i7/vV7M/UioAcKvv5SXUx3z/TM+/Svf/3rnhk1iomJiYmJiYmJiYmJiYmJiYlp2Ag+APX09Iy4Zx7x4O/duwcxMXvgZmkpA/8u1dnZCUKhCAynGYDlPDPYsjmIgX8XOnXyFFy9WgwT/zWOJq1x42HlylXD3v2MaPC9vb3w44/lcDgxmYd+6OAhMNI3gJjde2BvQgIDPxTKysiE4uLrFDhn8Zjy8wtBX+8ziAgPZ+CHwtozMrJgis5kOeiYFjkshKjIKHBzcaPnMfCDqPDQcEhN/UYJOqZpU6ZCTk4ePY6KjB6W/n7Ego+L3wfTDY1g2lQ9aG1theSkJB684Wf6kJws6RTzufOYxQ+mzp/PBwd7B6h7+pTm7W3tePDOTs4QERFNff+ZM2cY+KFSc3MzGJBIhgMfFhYJXl5Cemw8Y+aw9PPvDbxYLIZbZWXQ0tLyf7dlZjoX9IhfR9AzjWZAcHAIKZsHJjNnsahGVqGf74LLRd9DfX0D3LhxE8JCw966reVLl4GZmQWFrjNRC7aH7AShtw9MGj8BtEm+IL+AgUehlRcX34C9+w6Ar68frF27HqK/jIGUpOQ3aqepqQnmEUt3WuwMOlqTeLci8tkAHh7LaF5vsi6NaDo6OugEXFNTM2zczjsHH7AxAHbuDKUTH1ol55cnjZ8Iad9+S8+pqKgARxKLL3J0AqdFi8GOTJzeAgHExcZC5BdfgKW5Bbi5eYDnOi9Y9e/VSuHkHJM5YGW1gB6bks7BLQSBwBuCgoIhMDAInj9/rnngVyxfASazTHhIjvb2dHOLy6P1+vkHkHAwFe7evU9TYeElSEn5BiIiv4TgbSGwZcs2CNoSDJ6e61XG8ZgMpunDpAkT+byeri5sDgikHW5iMhu6u7s1z+J1tXUojKJLl+nQT01Oga6uLhB6eYEXscyystvE95fCibzvYB1xRdMNjGCqji51JevXC2D1Gk9wJRavpztFLXhJGg9TyL1O5Z2UewZb6wUwl4wEjQJfV1cH2lJLnC0TdWCUY21tA0lJqXAkPRMWExejCqaNrT1YWMyHWeTavqFLRxRxV/5kBMXF7wVf4v/5SIiMMlwHaFRU8/WePTwYF2dXavWFBQXg4OAIUdExdHdxIFDfJOF8gm7mSlERfQaccE1nm4I56QCNiuNP5OTyUHx9fOHY0aPELxuA9XzrQQVut2ABiNvF9J4ibxGJ86fLLby0J2iBH7m/Rq1c/Tb4UTjo868VFw8qcH2yh1NJoiPFHc1pZLsYgaNwgp1hOB327ztIXZ1GgM/MzKSv7BDSRtIBjY2NYNiHi8FJUjb8VEzmc+dCVVUVjdc5sOom9+UeS+XKusnErhEWX/34MXi4LwULsnNYWlIi2W0kMXpf4NEnc8JFEcJtIanrDaE9ePAAppKFVWNDg+ZtGSDEySReb5D+eLTUHWRRpQ66r0g0qPe3sbKG6aSTNXp38kRuLmRn55CvBPR50PY2tnK+ejCFfh5DTDsbO80Gv9E/kL7MsDQzh7vl5RTMHBLmIfR1a9YOyd6KteV82BQYpNngBQIhXVBxyiVhJq5IPVzdhvS+DZro42Xltd4LrC0s+XxbWxvdZzE1NoEPWe8dvLubO4iI1cvq4cOH1NVUVVYy8EMlXLInxMUrlR8+lAhaJG4fiR+kjgjwRuRLgfS0NJV19ra2SosdBn6QZDbPHHZs266yDj9Ixdd35STaYeAHWd5k4wp3Ddvb21XWr1i+8oP098Pi8w7jWcZ0QVNbW6uy3mq+FSxxWkJfmDDwg6j4+ARwd3GFpMRElfWZmVngTuJ6kVDIwDMx8Aw8EwM/ssCnXTsPObeKVJ54rKQQjpD6vnS/rhp25qXCjhMpcPfpY768sfklbbvwfpnSNRcqbtG6+tcvoOS/9+kxpoySC7Q9dSqsKIMQcp/DV05BU+trtedlll7g28RUQJ6hR82O58k7xXD0hvInfy9bm+m16dfz5crbOztoeU1TPc2fLb9B87Lq6Ork760W/CiBGfwzRPVK8VN/W/hYaKGyrq1TDL/eYEOvl02/2rAA2jrE0Ctt+2Nv5et/4W1J63rJn09GglIbmPZdzOHPR8ijheZK53Sr2Vr4faCjyjYfNvwsdx5uP3N1ih35w5Of+LoCGeP5+eVzWpZddlkSFsf40jwn7OBPfKxpWcWzmsEH/4mPFQ+op7eHQog8fYSW/ZLcGCVIj6X50+XX+evO3S2hZZ5pe2ieA4/W/4JYWfatyzBGNJ+WpV2XWIxu2Fqav1P7ULK67e6Cogd31Fo8gsfO5fSMtI3X60d6yYe0hdk8XJu9W9WCl22rP/C/C1hI82XVVX27mrcBj0MTr0sgD66onXkp/IP1SC1qLAGp2GHYWbLg27tk3q+SutEyo+UvW5zpOS3i9gH5UkXw3O+0iAuUK8Pn+tPmxWC7b6v0mXqVwEefPUr/b8tN6hf837d70OPLVT/07+PfBrxhlFDtUEdrxDrTr/zlrMo/az9sOn6QHn+Vn8Wfrwo8yjw2QFJOfOr5e6W89f05aAlk3bzYL/jRAnOwig8Cy7hNtLN/42cDYuJ7Od2srqTt5d6+Ak+lMHefy1AC//h5Hfx2owM97iC/TR14IymTPDJnDGhyfRvweL7s8JLzmyCxct3wtXzZH2R8Lg5FWakDvyw5gpa/bm+l+ScvGkB71yq+nTEiSzLPdPTp48eKrKhV07mG/I6Llbf5czjr5ITz1RiZkSkLvqr+CT023u2rFvynfrb0/6PGp0MH3iUxlF7XQCIXRdUSQFjnlf41X/aKwOOAvWxrHhD4P25aJJmAVUQjaJlYZxApGLCrmSTtNNRr6fOgJe8+dwxiC/4D2qGS+muP7imBRxlECWj++5/KVYLv6unmg4a6V01DA7666Rm97h8qrvvrVhda19jySq4crUkRhjrwh698Jxm+0d40/6hB2YqwHv3zQMHb79/Gzy1LDn1Oj7n5hptA8f/fgl1VgkeXx400dT6+WdxG56bRKgxMJXi8KULkEuefETwHmEvjdiyndW5JYfy1Lom76I/ByRDLvI8pv13qD7xu2BrQCV3NwxhL/uMc0k0siXNReC7OE5zPlQ05FcF/RAzmYNFJkvJg4YEQej6WcyEkhr2KmhruKR2VLUrgUb4Ze/mOUhfV1Lyop/mPSPjb2iHuG7xiyrp5SQreTqkOgXNKuXqatwDOgo5LH+hNwXMJO48LNTlFkDCV89Xcj4o+e6zPyVW2TVwDYESDUcv+S7m0LLbguNJ1HGyHA9tVgkdhh/YFHlXyuII3yg6Zr97YlsH72jJgYmJiYmJiYmJiYmJiGpj+Bx8ec/BP0+EgAAAAAElFTkSuQmCC"
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "Lloyds_ChangeGiving"
                }
              ]
            }
          ]
        },
        {
          "type": "choice",
          "title": "Cheque Envelope Deposit",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "Item31351"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Danske Cheque Deposit",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "Item35383"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Chip & PIN",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "info",
              "title": "Chip & PIN",
              "params": [],
              "visual": {
                "view": "list"
              },
              "nodes": null
            },
            {
              "type": "choice",
              "title": "Cash Withdrawal",
              "visual": {
                "transition": true
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "OnlineCashWithdrawal"
                }
              ]
            },
            {
              "type": "choice",
              "title": "Balance Enquiry",
              "visual": {
                "transition": true
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "OnlineBalanceEnquiry"
                }
              ]
            },
            {
              "type": "choice",
              "title": "Change PIN",
              "visual": {
                "transition": true
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "OnlineChangePin"
                }
              ]
            },
            {
              "type": "choice",
              "title": "Cash Deposit",
              "visual": {
                "transition": true
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "OnlineCashDeposit"
                }
              ]
            },
            {
              "type": "choice",
              "title": "POca Withdrawal Correction",
              "visual": {
                "transition": true
              },
              "nodes": [
                {
                  "type": "abort",
                  "nodes": null
                }
              ]
            }
          ]
        },
        {
          "type": "choice",
          "title": "Manual Entry",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "abort",
              "nodes": null
            }
          ]
        },
        {
          "type": "choice",
          "title": "Indemnity Check",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "abort",
              "nodes": null
            }
          ]
        },
        {
          "type": "info",
          "title": "\nTimeSaver",
          "params": [],
          "visual": {
            "view": "list"
          },
          "nodes": null
        },
        {
          "type": "choice",
          "title": "TimeSaver Pouch Discrepancy",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "abort",
              "nodes": null
            }
          ]
        }
      ]
    },
    {
      "type": "choice",
      "title": "Stamps",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "abort",
          "nodes": null
        }
      ]
    },
    {
      "type": "choice",
      "title": "Travel",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "abort",
          "nodes": null
        }
      ]
    },
    {
      "type": "choice",
      "title": "Licenses",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "abort",
          "nodes": null
        }
      ]
    },
    {
      "type": "choice",
      "title": "Services",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "abort",
          "nodes": null
        }
      ]
    },
    {
      "type": "choice",
      "title": "Bill Payment",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "barcode",
          "title": "Input barcode",
          "description": "Enter barcode value",
          "outputData": {
            "barcodeInfo": "{{ inputData.enablers.tokeniser }}",
            "Rref": "{{inputData.enablers.tokeniser.Rref}}",
            "ClientAccName": "{{inputData.enablers.tokeniser.ClientAccName}}",
            "TokenName": "{{inputData.enablers.tokeniser.TokenName}}",
            "minimumValue": "{{inputData.enablers.tokeniser.minimumValue}}",
            "maximumValue": "{{inputData.enablers.tokeniser.maximumValue}}",
            "CuR": "{{inputData.enablers.tokeniser.CuR}}",
            "issuerSchemeId": "{{inputData.enablers.tokeniser.issuerSchemeId}}"
          },
          "enablers": [
            {
              "name": "tokeniser",
              "id": "tokeniser",
              "action": "tokenise",
              "stepEvent": "onChange",
              "params": {
                "barcode": "{{ inputData.barcode }}",
                "shouldGetItems": 1
              },
              "loadingMessage": "Please wait..."
            }
          ],
          "visual": {
            "transition": true
          },
          "inputValidation": [
            {
              "field": "enablers.tokeniser.Rref",
              "uniqueness": {
                "selector": "{{ basketData[*].id }}",
                "message": "This item is already in the basket"
              }
            }
          ],
          "nodes": [
            {
              "type": "condition",
              "given": "{{ outputData.barcodeInfo.Rref }}",
              "expected": "{{ appData.basket.items[*].basket.id }}",
              "comparison": "in",
              "nodes": [
                {
                  "type": "info",
                  "title": "This barcode has already been added to the basket, Please check and try again"
                },
                {
                  "type": "choice",
                  "title": "Scan another item",
                  "visual": {
                    "transition": true
                  },
                  "nodes": [
                    {
                      "type": "abort",
                      "returnTo": "inputBarcode"
                    }
                  ]
                }
              ]
            },
            {
              "type": "condition",
              "given": "1",
              "expected": "1",
              "comparison": "eq",
              "outputData":{
                "basketID": "{{ outputData.barcodeInfo.UPUTrackingNumber }}"
              },
              "nodes": [
                {
                  "type": "subJourney",
                  "name": "BillPay"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "choice",
      "title": "Others",
      "visual": {
        "transition": true
      },
      "nodes": [
        {
          "type": "abort",
          "nodes": null
        }
      ]
    },
    {
      "type": "choice",
      "title": "Chip & PIN",
      "visual": {
        "transition": true,
        "variant": "secondary"
      },
      "nodes": [
        {
          "type": "info",
          "title": "Chip & PIN",
          "params": [],
          "visual": {
            "view": "list"
          },
          "nodes": null
        },
        {
          "type": "choice",
          "title": "Cash Withdrawal",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "OnlineCashWithdrawal"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Balance Enquiry",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "OnlineBalanceEnquiry"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Change PIN",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "OnlineChangePin"
            }
          ]
        },
        {
          "type": "choice",
          "title": "Cash Deposit",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "subJourney",
              "name": "OnlineCashDeposit"
            }
          ]
        },
        {
          "type": "choice",
          "title": "POca Withdrawal Correction",
          "visual": {
            "transition": true
          },
          "nodes": [
            {
              "type": "abort",
              "nodes": null
            }
          ]
        }
      ]
    }
  ]
}
